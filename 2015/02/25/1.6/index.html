<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>




  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.2"/>




  <meta name="keywords" content="String,DP,Recursion," />



  <link rel="alternate" href="//atom.xml" title="Cici's Blog" type="application/atom+xml" />



  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.2" />




  <title> Substring with Concatenation of All Words, Longest Substring Without Repeating Characters, Minimum Window Substring, Longest Palindromic Substring // Cici's Blog </title>
</head>

<body>
  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">Cici's Blog</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>


  <ul id="menu" class="menu">
     
    
      
      <li class="menu-item menu-item-home">
        <a href="/">
          <i class="menu-item-icon icon-home"></i> <br />
          Home
        </a>
      </li>
    
      
      <li class="menu-item menu-item-categories">
        <a href="/categories">
          <i class="menu-item-icon icon-categories"></i> <br />
          Categories
        </a>
      </li>
    
      
      <li class="menu-item menu-item-archives">
        <a href="/archives">
          <i class="menu-item-icon icon-archives"></i> <br />
          Archives
        </a>
      </li>
    
      
      <li class="menu-item menu-item-tags">
        <a href="/tags">
          <i class="menu-item-icon icon-tags"></i> <br />
          Tags
        </a>
      </li>
    
      
      <li class="menu-item menu-item-about">
        <a href="/about">
          <i class="menu-item-icon icon-about"></i> <br />
          About
        </a>
      </li>
    
  </ul>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              Substring with Concatenation of All Words, Longest Substring Without Repeating Characters, Minimum Window Substring, Longest Palindromic Substring
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on 2015-02-26
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; In
            
              <a href="/categories/刷题/">刷题</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/02/25/1.6/#comments" >
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/02/25/1.6/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        <h2 id="Substring_with_Concatenation_of_All_Words">Substring with Concatenation of All Words</h2>
<blockquote>
<p>You are given a string, S, and a list of words, L, that are all of the same length. Find all starting indices of substring(s) in S that is a concatenation of each word in L exactly once and without any intervening characters.<br>For example, given:<br>S: “barfoothefoobarman”<br>L: [“foo”, “bar”]<br>You should return the indices: [0,9].<br>(order does not matter).</p>
</blockquote>
<h3 id="Brute_Force_Solution">Brute Force Solution</h3>
<p>Two Hashmaps</p>
<li>rest: store all words in L, including times of appreance</li>

<li>found: renew at each round, store matched words, including times of appreance</li>

<p>Two pointers</p>
<li>i: starting index of current substring</li>

<li>j: numebers of words matched to current substring</li>

<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title">findSubstring</span>(String S, String[] L) {</div><div class="line">     ArrayList&lt;Integer&gt; res=<span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line">     HashMap&lt;String, Integer&gt; rest=<span class="keyword">new</span>  HashMap&lt;String, Integer&gt;();</div><div class="line">     HashMap&lt;String, Integer&gt; found=<span class="keyword">new</span>  HashMap&lt;String, Integer&gt;();</div><div class="line">     <span class="keyword">if</span>(S==<span class="keyword">null</span>||L.length==<span class="number">0</span>) <span class="keyword">return</span> res;</div><div class="line">     <span class="keyword">int</span> wordlen=L[<span class="number">0</span>].length(), Llen=L.length, Slen=S.length();</div><div class="line">     <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;L.length;i++){</div><div class="line">         <span class="keyword">int</span> num=<span class="number">1</span>;</div><div class="line">         <span class="keyword">if</span>(rest.get(L[i])!=<span class="keyword">null</span>) </div><div class="line">             num+=rest.get(L[i]);</div><div class="line">         rest.put(L[i], num);</div><div class="line">     }</div><div class="line">    </div><div class="line">     <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;Slen-Llen*wordlen+<span class="number">1</span>;i++){</div><div class="line">         <span class="keyword">int</span> j=<span class="number">0</span>;</div><div class="line">         found.clear();</div><div class="line">         <span class="keyword">for</span>(;j&lt;Llen;j++){</div><div class="line">             <span class="keyword">int</span> start=i+j*wordlen;</div><div class="line">             <span class="keyword">int</span> end=start+wordlen;</div><div class="line">             <span class="keyword">int</span> num=<span class="number">1</span>;</div><div class="line">             String tmp=S.substring(start, end);</div><div class="line">             <span class="keyword">if</span>(!rest.containsKey(tmp)) <span class="keyword">break</span>;</div><div class="line">             <span class="keyword">if</span>(found.get(tmp)!=<span class="keyword">null</span>) num+=found.get(tmp);</div><div class="line">             <span class="keyword">if</span>(num&gt;rest.get(tmp)) <span class="keyword">break</span>;</div><div class="line">             found.put(tmp, num);</div><div class="line">         }</div><div class="line">         <span class="keyword">if</span>(j==Llen) res.add(i);</div><div class="line">     }</div><div class="line">     <span class="keyword">return</span> res;   </div><div class="line"> }</div></pre></td></tr></table></figure>

<p><a href="http://www.cnblogs.com/springfor/p/3872516.html" target="_blank" rel="external">Minimun Window Solution</a></p>
<li>outer loop: i increment wordlen times, each time scan through S</li>

<li>inner loop: j increment wordlen per time, until first letter of last word</li>

<li>each outerloop: reset count=0, reset index=i</li>

<li>each innerloop: curdict to store current window</li>

<p>If tmp str not found in dict, increment index, reset count and curdict<br>If found, add to curdict, count++<br>before count++: compare num, if exceeded, increment index ,then decrement count and curdict<br>If count equals listlen add index into result, increment index, update curdict</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> ArrayList&lt;Integer&gt; <span class="title">findSubstring</span>(String S, String[] L) { </div><div class="line">  ArrayList&lt;Integer&gt; res = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line">  <span class="keyword">if</span>(S==<span class="keyword">null</span>||L==<span class="keyword">null</span>||S.length()==<span class="number">0</span>||L.length==<span class="number">0</span>)</div><div class="line">     <span class="keyword">return</span> res;</div><div class="line">  <span class="keyword">int</span> wordLen = L[<span class="number">0</span>].length();<span class="comment">//same length for each word in dictionary</span></div><div class="line">  </div><div class="line">  <span class="comment">//put given dictionary into hashmap with each word's count</span></div><div class="line">  HashMap&lt;String, Integer&gt; dict = <span class="keyword">new</span> HashMap&lt;String, Integer&gt;();</div><div class="line">  <span class="keyword">for</span>(String word: L){</div><div class="line">      <span class="keyword">if</span>(!dict.containsKey(word))</div><div class="line">         dict.put(word, <span class="number">1</span>);</div><div class="line">      <span class="keyword">else</span></div><div class="line">         dict.put(word, dict.get(word) + <span class="number">1</span>);</div><div class="line">  }</div><div class="line">  </div><div class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; wordLen; i++){</div><div class="line">      <span class="keyword">int</span> count = <span class="number">0</span>;</div><div class="line">      <span class="keyword">int</span> index = i;<span class="comment">//index of each startpoint</span></div><div class="line">      HashMap&lt;String, Integer&gt; curdict = <span class="keyword">new</span> HashMap&lt;String, Integer&gt;();</div><div class="line">      <span class="comment">//till the first letter of last word </span></div><div class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &lt;= S.length() - wordLen; j += wordLen){</div><div class="line">          String curWord = S.substring(j, j + wordLen);</div><div class="line">          <span class="comment">//check each word to tell if it existes in give dictionary</span></div><div class="line">          <span class="keyword">if</span>(!dict.containsKey(curWord)){</div><div class="line">              curdict.clear();</div><div class="line">              count = <span class="number">0</span>;</div><div class="line">              index = j + wordLen;</div><div class="line">          }<span class="keyword">else</span>{</div><div class="line">              <span class="comment">//form current dictionary</span></div><div class="line">              <span class="keyword">if</span>(!curdict.containsKey(curWord))</div><div class="line">                 curdict.put(curWord, <span class="number">1</span>);</div><div class="line">              <span class="keyword">else</span></div><div class="line">                 curdict.put(curWord, curdict.get(curWord) + <span class="number">1</span>);</div><div class="line">              </div><div class="line">              <span class="comment">//count for current found word and check if it exceed given word count</span></div><div class="line">              <span class="keyword">if</span>(curdict.get(curWord) &lt;= dict.get(curWord)){</div><div class="line">                  count++;</div><div class="line">              }<span class="keyword">else</span>{</div><div class="line">                <span class="keyword">while</span>(curdict.get(curWord) &gt; dict.get(curWord)){</div><div class="line">                     String temp = S.substring(index, index + wordLen);</div><div class="line">                     curdict.put(temp, curdict.get(temp)-<span class="number">1</span>);</div><div class="line">                     index = index + wordLen;<span class="comment">//make index move next</span></div><div class="line">                     <span class="keyword">if</span>(curdict.get(temp)&lt;dict.get(temp))</div><div class="line">                     count--;</div><div class="line">                 }</div><div class="line">              }</div><div class="line">              </div><div class="line">              <span class="comment">//put into res and move index point to nextword </span></div><div class="line">              <span class="comment">//and update current dictionary as well as count num</span></div><div class="line">              <span class="keyword">if</span>(count == L.length){</div><div class="line">                  res.add(index);</div><div class="line">                  String temp = S.substring(index, index + wordLen);</div><div class="line">                  curdict.put(temp, curdict.get(temp)-<span class="number">1</span>);</div><div class="line">                  index = index + wordLen;</div><div class="line">                  count--;</div><div class="line">              }</div><div class="line">          }</div><div class="line">      }<span class="comment">//end for j</span></div><div class="line">  }<span class="comment">//end for i</span></div><div class="line">   <span class="keyword">return</span> res;</div><div class="line"> }</div></pre></td></tr></table></figure>

<h2 id="Longest_Substring_Without_Repeating_Characters">Longest Substring Without Repeating Characters</h2>
<blockquote>
<p>Given a string, find the length of the longest substring without repeating characters. For example, the longest substring without repeating letters for “abcabcbb” is “abc”, which the length is 3. For “bbbbb” the longest substring is “b”, with the length of 1.</p>
</blockquote>
<h3 id="Brute_force_method">Brute force method</h3>
<p>Find all substrings and check if each of it contains only unique characters. As for the maxlength, we use Greedy Algorithm to only keep the longest substring seen so far. There are one inner loop and each check takes linear time, O(N^2) time won’t pass the OJ.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span>(String s) {</div><div class="line"><span class="keyword">if</span>(s==<span class="keyword">null</span>||s.length()==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line"><span class="keyword">int</span> maxlen=<span class="number">1</span>;</div><div class="line">Hashtable &lt;Character, Boolean&gt; map=<span class="keyword">new</span> Hashtable&lt;Character, Boolean&gt;();</div><div class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt; s.length();i++){</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;s.length();j++){</div><div class="line">        <span class="keyword">if</span>(map.containsKey(s.charAt(j))){map.clear(); <span class="keyword">break</span>;}</div><div class="line">        <span class="keyword">else</span>{map.put(s.charAt(j), <span class="keyword">false</span>);}</div><div class="line">        <span class="keyword">int</span> len=map.size();</div><div class="line">        <span class="keyword">if</span>(len&gt;maxlen){maxlen=len;}</div><div class="line">    }</div><div class="line">}</div><div class="line">    <span class="keyword">return</span> maxlen;</div><div class="line">}</div></pre></td></tr></table></figure>

<p><a href="http://www.geeksforgeeks.org/length-of-the-longest-substring-without-repeating-characters/" target="_blank" rel="external">Better Solution</a><br>Use a Hashmap/Hashset recording current substring and two pointers to record current positions.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span>(String s) {</div><div class="line">    <span class="keyword">if</span>(s==<span class="keyword">null</span>||s.length()==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> maxlen=<span class="number">1</span>,l=<span class="number">0</span>,r=<span class="number">0</span>;</div><div class="line">        Hashtable &lt;Character, Boolean&gt; map=<span class="keyword">new</span> Hashtable&lt;Character, Boolean&gt;();</div><div class="line">        <span class="keyword">while</span>(r&lt;s.length()){</div><div class="line">            <span class="keyword">char</span> tmp=s.charAt(r);</div><div class="line">            <span class="keyword">if</span>(!map.containsKey(tmp)||map.get(tmp)==<span class="keyword">false</span>){</div><div class="line">                map.put(tmp, <span class="keyword">true</span>);</div><div class="line">                maxlen=Math.max((r-l+<span class="number">1</span>), maxlen);</div><div class="line">            }</div><div class="line">            <span class="keyword">else</span>{</div><div class="line">                <span class="keyword">while</span>(s.charAt(l)!=s.charAt(r)){map.put(s.charAt(l), <span class="keyword">false</span>);l++;}</div><div class="line">                l++;</div><div class="line">            }</div><div class="line">            r++;</div><div class="line">        }</div><div class="line">        </div><div class="line">        <span class="keyword">return</span> maxlen;</div><div class="line">}</div></pre></td></tr></table></figure>

<h2 id="Minimum_Window_Substring">Minimum Window Substring</h2>
<blockquote>
<p>Given a string S and a string T, find the minimum window in S which will contain all the characters in T in complexity O(n).<br>For example,<br>S = “ADOBECODEBANC”<br>T = “ABC”<br>Minimum window is “BANC”.<br>Note:<br>If there is no such window in S that covers all characters in T, return the emtpy string “”.<br>If there are multiple such windows, you are guaranteed that there will always be only one unique minimum window in S.</p>
</blockquote>
<h3 id="Min_Sliding_Window_Solution"><a href="http://blog.csdn.net/linhuanmars/article/details/20343903" target="_blank" rel="external">Min Sliding Window Solution</a></h3>
<li>Use a Hashmap to record each character, numbers in T</li>

<li>Two pointers:</li><br>left: increment when current substring contains all chars in T, pass unrelevant chars and exceeded chars<br>right: increment each loop, if found a match in T decrement its Hashmap value<br><br><li>Minlen: when we found a new substring update minlength</li>

<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> String <span class="title">minWindow</span>(String S, String T) {</div><div class="line">    HashMap&lt;Character,Integer&gt; dict=<span class="keyword">new</span> HashMap&lt;Character,Integer&gt;();</div><div class="line">    <span class="keyword">int</span> tlen=T.length(), slen=S.length(),minlen=slen+<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;tlen;i++){</div><div class="line">        <span class="keyword">int</span> num=<span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span>(dict.containsKey(T.charAt(i))) num+=dict.get(T.charAt(i));</div><div class="line">        dict.put(T.charAt(i),num);</div><div class="line">    }</div><div class="line">    <span class="keyword">int</span> count=<span class="number">0</span>,left=<span class="number">0</span>,start=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;slen;i++){</div><div class="line">        <span class="keyword">if</span>(dict.containsKey(S.charAt(i))){</div><div class="line">            dict.put(S.charAt(i),dict.get(S.charAt(i))-<span class="number">1</span>);</div><div class="line">            <span class="keyword">if</span>(dict.get(S.charAt(i))&gt;=<span class="number">0</span>) count++;</div><div class="line">            <span class="keyword">if</span>(count==tlen){</div><div class="line">                <span class="keyword">while</span>(count==tlen){</div><div class="line">                    <span class="keyword">if</span>(i-left+<span class="number">1</span>&lt;minlen){minlen=i-left+<span class="number">1</span>; start=left; }</div><div class="line">                    <span class="keyword">if</span>(dict.containsKey(S.charAt(left))) {</div><div class="line">                         dict.put(S.charAt(left),dict.get(S.charAt(left))+<span class="number">1</span>);</div><div class="line">                         <span class="keyword">if</span>(dict.get(S.charAt(left))&gt;<span class="number">0</span>) count--;</div><div class="line">                    }</div><div class="line">                    left++;</div><div class="line">                }</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line">    </div><div class="line">     <span class="keyword">return</span> minlen&gt;slen? <span class="string">""</span>:S.substring(start,start+minlen);</div><div class="line">    </div><div class="line">}</div></pre></td></tr></table></figure>

<p>Another version using <a href="http://www.lifeincode.net/programming/leetcode-minimum-window-substring-java/" target="_blank" rel="external">two hashmaps</a>:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> String <span class="title">minWindow</span>(String S, String T) {</div><div class="line">    HashMap&lt;Character, Integer&gt; dict = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; T.length(); i++) {</div><div class="line">        <span class="keyword">char</span> c = T.charAt(i);</div><div class="line">        <span class="keyword">if</span> (!dict.containsKey(c))</div><div class="line">            dict.put(c, <span class="number">1</span>);</div><div class="line">        <span class="keyword">else</span></div><div class="line">            dict.put(c, dict.get(c) + <span class="number">1</span>);</div><div class="line">    }</div><div class="line">    HashMap&lt;Character, Integer&gt; found = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">    <span class="keyword">int</span> foundCounter = <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> start = <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> end = <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> min = Integer.MAX_VALUE;</div><div class="line">    String minWindow = <span class="string">""</span>;</div><div class="line">    <span class="keyword">while</span> (end &lt; S.length()) {</div><div class="line">        <span class="keyword">char</span> c = S.charAt(end);</div><div class="line">        <span class="keyword">if</span> (dict.containsKey(c)) {</div><div class="line">            <span class="keyword">if</span> (found.containsKey(c)) {</div><div class="line">                <span class="keyword">if</span> (found.get(c) &lt; dict.get(c))</div><div class="line">                    foundCounter++;</div><div class="line">                found.put(c, found.get(c) + <span class="number">1</span>);</div><div class="line">            } <span class="keyword">else</span> {</div><div class="line">                found.put(c, <span class="number">1</span>);</div><div class="line">                foundCounter++;</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keyword">if</span> (foundCounter == T.length()) {</div><div class="line">            <span class="comment">//When foundCounter equals to T.length(), in other words, found all characters.</span></div><div class="line">            <span class="keyword">char</span> sc = S.charAt(start);</div><div class="line">            <span class="keyword">while</span> (!found.containsKey(sc) || found.get(sc) &gt; dict.get(sc)) {</div><div class="line">                <span class="keyword">if</span> (found.containsKey(sc) && found.get(sc) &gt; dict.get(sc))</div><div class="line">                    found.put(sc, found.get(sc) - <span class="number">1</span>);</div><div class="line">                start++;</div><div class="line">                sc = S.charAt(start);</div><div class="line">            }</div><div class="line">            <span class="keyword">if</span> (end - start + <span class="number">1</span> &lt; min) {</div><div class="line">                minWindow = S.substring(start, end + <span class="number">1</span>);</div><div class="line">                min = end - start + <span class="number">1</span>;</div><div class="line">            }</div><div class="line">        }</div><div class="line">        end++;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> minWindow;</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="Array_Solution">Array Solution</h3>
<p>To count occurrence of characters, instead of using a hash map, can use an int array of 256<br>Two pointer method with one point to end and one point to start.<br>Pointer advance condition: move end forward till finds one window, then move start forward till the window no longer valid</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">  </div><div class="line">  <span class="keyword">public</span> String <span class="title">minWindow</span>(String S, String T) {</div><div class="line">        <span class="keyword">int</span>[] map=<span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">256</span>],found=<span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">256</span>];</div><div class="line">        <span class="keyword">int</span> start=<span class="number">0</span>, count=<span class="number">0</span>,end=<span class="number">0</span>,minlen=S.length()+<span class="number">1</span>,tlen=T.length(),slen=S.length();</div><div class="line">        String min=<span class="string">""</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; tlen; i++){</div><div class="line">            map[T.charAt(i)]++;</div><div class="line">        }</div><div class="line">        <span class="keyword">for</span>(;end&lt;slen;end++){</div><div class="line">            <span class="keyword">if</span>(map[S.charAt(end)]&gt;found[S.charAt(end)]) {count++;}</div><div class="line">            found[S.charAt(end)]++;</div><div class="line">            <span class="keyword">if</span>(count==T.length()){</div><div class="line">                <span class="keyword">while</span>(found[S.charAt(start)]&gt;map[S.charAt(start)])</div><div class="line">                {   found[S.charAt(start)]--;</div><div class="line">                    start++;</div><div class="line">                }</div><div class="line">                <span class="keyword">if</span>(end-start+<span class="number">1</span>&lt;minlen) {minlen=end-start+<span class="number">1</span>; min = S.substring(start, end+<span class="number">1</span>);</div><div class="line">}</div><div class="line">                found[S.charAt(start)]--;</div><div class="line">                start++;</div><div class="line">                count--;</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> min;</div><div class="line">    }</div></pre></td></tr></table></figure>

<h2 id="Longest_Palindromic_Substring">Longest Palindromic Substring</h2>
<blockquote>
<p>Given a string S, find the longest palindromic substring in S. You may assume that the maximum length of S is 1000, and there exists one unique longest palindromic substring.</p>
</blockquote>
<h3 id="Brute_Force_Solution-1">Brute Force Solution</h3>
<p>Find all possible substrings and check if each is palindrome. O(N^3) too LTE…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> String <span class="title">longestPalindrome</span>(String s) {</div><div class="line">       <span class="keyword">int</span> maxlen=<span class="number">0</span>; </div><div class="line">       String maxstr=<span class="keyword">null</span>;</div><div class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++){</div><div class="line">           <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;s.length();j++){</div><div class="line">               String tmp=s.substring(i,j+<span class="number">1</span>);</div><div class="line">               <span class="keyword">if</span>(IsPalindrome(tmp)&&tmp.length()&gt;maxlen)</div><div class="line">                   {</div><div class="line">                   maxlen=tmp.length();</div><div class="line">                   maxstr=tmp;}</div><div class="line">           }</div><div class="line">       }<span class="keyword">return</span> maxstr;</div><div class="line">   }</div><div class="line"> </div><div class="line"> <span class="keyword">public</span> Boolean <span class="title">IsPalindrome</span>(String s) {</div><div class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++){</div><div class="line">       <span class="keyword">if</span>(s.charAt(i)!=s.charAt(s.length()-<span class="number">1</span>-i)) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">       } <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">   }</div></pre></td></tr></table></figure>

<h3 id="DP_Solution">DP Solution</h3>
<p>Time O(n^2) Space O(n^2) but didn’t pass OJ. Why?<br>Three rounds of loops:</p>
<li>set diagonal to 1: t[i][i]=0</li><br><li>set top-right second diagonal: t[i][i+1]=1 if two consecutive character</li><br><li>set whole table [diagonaly]</li><br><li>a. start from substring length 3 to full length</li><br><li>b. inner loop: from 0 to length-len, check substring(i, i+len), set t[i][i+len-1] according to changing rule:</li><br><li>c. If s.charAt(i) == s.charAt(j) then t[i][j] = t[i + 1][j - 1]</li>

<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> String <span class="title">longestPalindrome2</span>(String s) {</div><div class="line">          <span class="keyword">int</span> maxlen=<span class="number">0</span>; </div><div class="line">          String maxstr=<span class="keyword">null</span>;</div><div class="line">          <span class="keyword">int</span>[][] t=<span class="keyword">new</span> <span class="keyword">int</span>[s.length()][s.length()];</div><div class="line">          <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++){t[i][i]=<span class="number">1</span>;}</div><div class="line">          <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length()-<span class="number">1</span>;i++){</div><div class="line">              <span class="keyword">if</span>(s.charAt(i)==s.charAt(i+<span class="number">1</span>))</div><div class="line">                  {t[i][i+<span class="number">1</span>]=<span class="number">1</span>;</div><div class="line">                  maxlen=<span class="number">2</span>;maxstr=s.substring(i,i+<span class="number">2</span>);}</div><div class="line">              <span class="keyword">else</span> t[i][i+<span class="number">1</span>]=<span class="number">0</span>;</div><div class="line">              }</div><div class="line">          </div><div class="line">          printTable(t);</div><div class="line">          </div><div class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> len = <span class="number">3</span>; len &lt;= s.length(); len++) {</div><div class="line">              <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= s.length()-len; i++) {</div><div class="line">                  <span class="keyword">int</span> j = i + len - <span class="number">1</span>;</div><div class="line">                  <span class="keyword">if</span> (s.charAt(i) == s.charAt(j)) {</div><div class="line">                      t[i][j] = t[i + <span class="number">1</span>][j - <span class="number">1</span>];</div><div class="line">                      <span class="keyword">if</span> (t[i][j] == <span class="number">1</span> && len &gt; maxlen)</div><div class="line">                          maxstr = s.substring(i, j + <span class="number">1</span>);</div><div class="line">                  } </div><div class="line">                  <span class="keyword">else</span> {t[i][j]=<span class="number">0</span>;}</div><div class="line">                  printTable(t);</div><div class="line">              }</div><div class="line">          }</div><div class="line">          </div><div class="line">          <span class="keyword">return</span> maxstr;</div><div class="line">          </div><div class="line">    }</div><div class="line">      </div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printTable</span>(<span class="keyword">int</span>[][] x){</div><div class="line">          <span class="keyword">for</span>(<span class="keyword">int</span> [] y : x){</div><div class="line">              <span class="keyword">for</span>(<span class="keyword">int</span> z: y){</div><div class="line">                  System.out.print(z + <span class="string">" "</span>);</div><div class="line">              }</div><div class="line">              System.out.println();</div><div class="line">          }</div><div class="line">          System.out.println(<span class="string">"------"</span>);</div><div class="line">      }</div></pre></td></tr></table></figure>

<p><a href="http://www.programcreek.com/2013/12/leetcode-solution-of-longest-palindromic-substring-java/" target="_blank" rel="external">Another Algorithm</a></p>
<p>i from 0 to length-1, get palindrom substring with center of i or i, i+1, keep updating the longest substring: Time O(n^2), space O(1)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> String <span class="title">longestPalindrome</span>(String s) {       </div><div class="line">          String maxstr = <span class="string">""</span>;</div><div class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++) {</div><div class="line">              <span class="comment">// get longest palindrome with center of i eg: BAB</span></div><div class="line">              String tmp = helper(s, i, i);</div><div class="line">              <span class="keyword">if</span> (tmp.length() &gt; maxstr.length()) {</div><div class="line">                  maxstr = tmp;</div><div class="line">              }</div><div class="line">       </div><div class="line">              <span class="comment">// get longest palindrome with center of i, i+1 eg: ABBA</span></div><div class="line">              tmp = helper(s, i, i + <span class="number">1</span>);</div><div class="line">              <span class="keyword">if</span> (tmp.length() &gt; maxstr.length()) {</div><div class="line">                  maxstr = tmp;</div><div class="line">              }</div><div class="line">          }</div><div class="line">       </div><div class="line">          <span class="keyword">return</span> maxstr;</div><div class="line">      }</div><div class="line">    </div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">helper</span>(String s, <span class="keyword">int</span> begin, <span class="keyword">int</span> end) {</div><div class="line">          <span class="keyword">while</span> (begin &gt;= <span class="number">0</span> && end &lt;= s.length() - <span class="number">1</span> && s.charAt(begin) == s.charAt(end)) {</div><div class="line">              begin--;</div><div class="line">              end++;</div><div class="line">          }</div><div class="line">          <span class="keyword">return</span> s.substring(begin + <span class="number">1</span>, end);</div><div class="line">          }</div></pre></td></tr></table></figure>

<p><a href="http://algs4.cs.princeton.edu/53substring/Manacher.java.html" target="_blank" rel="external">Manacher’s algorithm</a><br>Computes the longest palindromic substring in linear time.</p>
<iframe width="100%" height="160" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A%2F%2Fsoundcloud.com%2Flidogotsongs%2Fbastille-bad-blood-lido-remix-1&auto_play=false&hide_related=true&show_comments=true&show_user=true&show_reposts=false&visual=true"></iframe>

      
    </div>

    <div class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/String/"> #String </a>
          
            <a href="/tags/DP/"> #DP </a>
          
            <a href="/tags/Recursion/"> #Recursion </a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/02/25/1.9/">Reverse Integer, Reverse Linked List I, Reverse Linked List II, Reverse Nodes in k-Group, Rotate List</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/02/25/1.5/">Remove Duplicates from Sorted List I & II, Remove Duplicates from Sorted Array I & II</a>
            
          </div>
        </div>
      

      
      
    </div>
  </div>



    
      <div class="comments" id="comments">
        
          <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          </div>
        
      </div>
    
  </div>


        </div>
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table Of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <div class="site-overview">
        <div class="site-author motion-element">
          <img class="site-author-image" src="/images/default_avatar.jpg" alt="Cici Sun" />
          <p class="site-author-name">Cici Sun</p>
        </div>
        <p class="site-description motion-element"></p>
        <div class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">45</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">5</span>
              <span class="site-state-item-name">categories</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">22</span>
              <span class="site-state-item-name">tags</span>
              </a>
          </div>

        </div>

        
          <div class="feed-link motion-element">
            <a href="//atom.xml">
              <i class="menu-item-icon icon-feed"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
              <a href="https://github.com/CICISUN/" target="_blank">GitHub</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="https://twitter.com/insertsomthin" target="_blank">Twitter</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://www.weibo.com/bingjiesun" target="_blank">Weibo</a>
            </span>
            
          
        </div>

        
        

      </div>

      
        <div class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Substring_with_Concatenation_of_All_Words"><span class="nav-number">1.</span> <span class="nav-text">Substring with Concatenation of All Words</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Brute_Force_Solution"><span class="nav-number">1.1.</span> <span class="nav-text">Brute Force Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Longest_Substring_Without_Repeating_Characters"><span class="nav-number">2.</span> <span class="nav-text">Longest Substring Without Repeating Characters</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Brute_force_method"><span class="nav-number">2.1.</span> <span class="nav-text">Brute force method</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Minimum_Window_Substring"><span class="nav-number">3.</span> <span class="nav-text">Minimum Window Substring</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Min_Sliding_Window_Solution"><span class="nav-number">3.1.</span> <span class="nav-text">Min Sliding Window Solution</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Array_Solution"><span class="nav-number">3.2.</span> <span class="nav-text">Array Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Longest_Palindromic_Substring"><span class="nav-number">4.</span> <span class="nav-text">Longest Palindromic Substring</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Brute_Force_Solution-1"><span class="nav-number">4.1.</span> <span class="nav-text">Brute Force Solution</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DP_Solution"><span class="nav-number">4.2.</span> <span class="nav-text">DP Solution</span></a></li></ol></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </div>
      

    </div>
  </div>


    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp; 
  2015
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author">Cici Sun</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $('.content img').each(function () {
        var $image = $(this);
        var $imageWrapLink = $image.parent('a');

        if ($imageWrapLink.size() < 1) {
          $imageWrapLink = $image.wrap('<a href="' + this.getAttribute('src') + '"></a>').parent('a');
        }
        $imageWrapLink.addClass('fancybox');
      });
    });
    $('.fancybox').fancybox({
      helpers: {
        overlay: {
          locked: false
        }
      }
    });
  </script>


  <script type="text/javascript">
  function hasMobileUA () {
    var nav = window.navigator;
    var ua = nav.userAgent;
    var pa = /iPad|iPhone|Android|Opera Mini|BlackBerry|webOS|UCWEB|Blazer|PSP|IEMobile|Symbian/g;

    return pa.test(ua);
  }

  function isDesktop () {
    return screen.width > 991 && !hasMobileUA();
  }

  function isTablet () {
    return screen.width < 992 && screen.width > 767 && hasMobileUA();
  }

  function isMobile () {
    return screen.width < 767 && hasMobileUA();
  }

  function escapeSelector (selector) {
    return selector.replace(/[!"$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g, "\\$&")
  }
</script>

  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" id="motion.global">
  $(document).ready(function () {
    var body = $('body');
    var isSidebarVisible = false;
    var sidebarToggle = $('.sidebar-toggle');
    var sidebarToggleLine1st = $('.sidebar-toggle-line-first')
    var sidebarToggleLine2nd = $('.sidebar-toggle-line-middle');
    var sidebarToggleLine3rd = $('.sidebar-toggle-line-last');
    var sidebar = $('.sidebar');

    var SIDEBAR_WIDTH = '320px';
    var SIDEBAR_DISPLAY_DURATION = 300;

    var sidebarToogleLineStatusInit = {width: '100%', opacity: 1, left: 0, rotateZ: 0, top: 0};

    var sidebarToggleLine1stStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine1stStatusArrow = {width: '50%', rotateZ: '-45deg', top: '2px'};
    var sidebarToogleLine1stStatusClose = {width: '100%', rotateZ: '-45deg', top: '5px'};

    var sidebarToggleLine2ndStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine2ndStatusArrow = {width: '90%'};
    var sidebarToogleLine2ndStatusClose = {opacity: 0};

    var sidebarToggleLine3rdStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine3rdStatusArrow = {width: '50%', rotateZ: '45deg', top: '-2px'};
    var sidebarToogleLine3rdStatusClose = {width: '100%', rotateZ: '45deg', top: '-5px'};

    LogoAndMenuMotion();
    sidebatToggleMotion();
    postsListMotion();
    backToTopMotion();


    $(document)
      .on('sidebar.isShowing', function () {
        isDesktop() && body.velocity(
          {paddingRight: SIDEBAR_WIDTH},
          SIDEBAR_DISPLAY_DURATION
        );
        sidebarContentMotion();
      })
      .on('sidebar.isHiding', function () {});

    function LogoAndMenuMotion() {
      $.Velocity.RunSequence([
        { e: $('.brand'), p: { opacity: 1 }, o: { duration: 100 } },
        { e: $('.logo'), p: { opacity: 1, top: 0 }, o: { duration: 50} },
        
        { e: $('.logo-line-before i'), p: { translateX: "100%" }, o: { duration: 500, sequenceQueue: false } },
        { e: $('.logo-line-after i'), p: { translateX: "-100%" }, o: { duration: 500, sequenceQueue: false } },
        
        { e: $('.site-title'), p: { opacity: 1, top: 0 }, o: { duration: 200 } }
      ]);
      $('.menu-item').velocity('transition.slideDownIn', {display: null});
    }


    function backToTopMotion () {
      var b2top = $('.back-to-top');
      b2top.on('click', function () {
        body.velocity('scroll');
      });
    }

    function sidebarShowMotion () {

      sidebarToggleLine1st.velocity(sidebarToogleLine1stStatusClose);
      sidebarToggleLine2nd.velocity(sidebarToogleLine2ndStatusClose);
      sidebarToggleLine3rd.velocity(sidebarToogleLine3rdStatusClose);

      sidebar.velocity({width: SIDEBAR_WIDTH}, {
        display: 'block',
        duration: SIDEBAR_DISPLAY_DURATION,
        complete: function () {
          sidebar.addClass('sidebar-active');
          sidebar.trigger('sidebar.didShow');
        }
      });
      sidebar.trigger('sidebar.isShowing');
    }

    function sidebarHideMotion () {
      isDesktop() && body.velocity({paddingRight: 0});
      sidebar.velocity('reverse');

      sidebarToggleLine1st.velocity(sidebarToggleLine1stStatusInit);
      sidebarToggleLine2nd.velocity(sidebarToggleLine2ndStatusInit);
      sidebarToggleLine3rd.velocity(sidebarToggleLine3rdStatusInit);

      sidebar.removeClass('sidebar-active');
      sidebar.trigger('sidebar.isHiding');
    };

    function sidebarContentMotion () {
      $('.sidebar .motion-element').velocity(
        'transition.slideRightIn',
        {stagger: 50, drag: true}
      );
    }

    function postsListMotion () {
      var postMotionOptions = window.postMotionOptions || {stagger: 300, drag: true};
      $('.post').velocity('transition.slideDownIn', postMotionOptions);
    }

    function sidebatToggleMotion () {
      sidebarToggle.on('click', function () {
        isSidebarVisible ? sidebarHideMotion() : sidebarShowMotion();
        isSidebarVisible = !isSidebarVisible;
      });

      sidebarToggle.hover(function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusArrow);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusArrow);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusArrow);
      }, function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusInit);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusInit);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusInit);
      });
    }
  });

</script>





  
  
<script type="text/javascript" id="bootstrap.scrollspy.custom">
  /* ========================================================================
  * Bootstrap: scrollspy.js v3.3.2
  * http://getbootstrap.com/javascript/#scrollspy
  * ========================================================================
  * Copyright 2011-2015 Twitter, Inc.
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  * ======================================================================== */

  /**
   * Custom by iissnan
   *
   * - Add a `clear.bs.scrollspy` event.
   * - Esacpe targets selector.
   */


  +function ($) {
    'use strict';

    // SCROLLSPY CLASS DEFINITION
    // ==========================

    function ScrollSpy(element, options) {
      this.$body          = $(document.body)
      this.$scrollElement = $(element).is(document.body) ? $(window) : $(element)
      this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)
      this.selector       = (this.options.target || '') + ' .nav li > a'
      this.offsets        = []
      this.targets        = []
      this.activeTarget   = null
      this.scrollHeight   = 0

      this.$scrollElement.on('scroll.bs.scrollspy', $.proxy(this.process, this))
      this.refresh()
      this.process()
    }

    ScrollSpy.VERSION  = '3.3.2'

    ScrollSpy.DEFAULTS = {
      offset: 10
    }

    ScrollSpy.prototype.getScrollHeight = function () {
      return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
    }

    ScrollSpy.prototype.refresh = function () {
      var that          = this
      var offsetMethod  = 'offset'
      var offsetBase    = 0

      this.offsets      = []
      this.targets      = []
      this.scrollHeight = this.getScrollHeight()

      if (!$.isWindow(this.$scrollElement[0])) {
        offsetMethod = 'position'
        offsetBase   = this.$scrollElement.scrollTop()
      }

      this.$body
        .find(this.selector)
        .map(function () {
          var $el   = $(this)
          var href  = $el.data('target') || $el.attr('href')
          var $href = /^#./.test(href) && $(escapeSelector(href)) // Need to escape selector.

          return ($href
            && $href.length
            && $href.is(':visible')
            && [[$href[offsetMethod]().top + offsetBase, href]]) || null
        })
        .sort(function (a, b) { return a[0] - b[0] })
        .each(function () {
          that.offsets.push(this[0])
          that.targets.push(this[1])
        })


    }

    ScrollSpy.prototype.process = function () {
      var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset
      var scrollHeight = this.getScrollHeight()
      var maxScroll    = this.options.offset + scrollHeight - this.$scrollElement.height()
      var offsets      = this.offsets
      var targets      = this.targets
      var activeTarget = this.activeTarget
      var i

      if (this.scrollHeight != scrollHeight) {
        this.refresh()
      }

      if (scrollTop >= maxScroll) {
        return activeTarget != (i = targets[targets.length - 1]) && this.activate(i)
      }

      if (activeTarget && scrollTop < offsets[0]) {
        $(this.selector).trigger('clear.bs.scrollspy')  // Add a custom event.
        this.activeTarget = null
        return this.clear()
      }

      for (i = offsets.length; i--;) {
        activeTarget != targets[i]
          && scrollTop >= offsets[i]
          && (!offsets[i + 1] || scrollTop <= offsets[i + 1])
          && this.activate(targets[i])
      }
    }

    ScrollSpy.prototype.activate = function (target) {
      this.activeTarget = target

      this.clear()

      var selector = this.selector +
        '[data-target="' + target + '"],' +
        this.selector + '[href="' + target + '"]'

      var active = $(selector)
        .parents('li')
        .addClass('active')

      if (active.parent('.dropdown-menu').length) {
        active = active
          .closest('li.dropdown')
          .addClass('active')
      }

      active.trigger('activate.bs.scrollspy')
    }

    ScrollSpy.prototype.clear = function () {
      $(this.selector)
        .parentsUntil(this.options.target, '.active')
        .removeClass('active')
    }


    // SCROLLSPY PLUGIN DEFINITION
    // ===========================

    function Plugin(option) {
      return this.each(function () {
        var $this   = $(this)
        var data    = $this.data('bs.scrollspy')
        var options = typeof option == 'object' && option

        if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))
        if (typeof option == 'string') data[option]()
      })
    }

    var old = $.fn.scrollspy

    $.fn.scrollspy             = Plugin
    $.fn.scrollspy.Constructor = ScrollSpy


    // SCROLLSPY NO CONFLICT
    // =====================

    $.fn.scrollspy.noConflict = function () {
      $.fn.scrollspy = old
      return this
    }


    // SCROLLSPY DATA-API
    // ==================

    $(window).on('load.bs.scrollspy.data-api', function () {
      $('[data-spy="scroll"]').each(function () {
        var $spy = $(this)
        Plugin.call($spy, $spy.data())
      })
    })

  }(jQuery);
</script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var $sidebarInner = $('.sidebar-inner');
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.didShow', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;
          var self = this;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      $(indicator).velocity('stop').velocity({
        opacity: action === 'show' ? 0.4 : 0
      }, { duration: 100 });
    }

  });
</script>


  <script type="text/javascript" id="sidebar.nav">
    $(document).ready(function () {
      var html = $('html');

      $('.sidebar-nav li').on('click', function () {
        var item = $(this);
        var activeTabClassName = 'sidebar-nav-active';
        var activePanelClassName = 'sidebar-panel-active';
        if (item.hasClass(activeTabClassName)) {
          return;
        }

        var currentTarget = $('.' + activePanelClassName);
        var target = $('.' + item.data('target'));

        currentTarget.velocity('transition.slideUpOut', 200, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', 200)
            .addClass(activePanelClassName);
        });

        item.siblings().removeClass(activeTabClassName);
        item.addClass(activeTabClassName);
      });

      $('.post-toc a').on('click', function (e) {
        e.preventDefault();
        var offset = $(escapeSelector(this.getAttribute('href'))).offset().top;
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        });
      });

      // Expand sidebar on post detail page by default, when post has a toc.
      var $tocContent = $('.post-toc-content');
      if ($tocContent.length > 0 && $tocContent.html().trim().length > 0 && isDesktop()) {
        setTimeout(function () {
          $('.sidebar-toggle').trigger('click');
        }, 800);
      }
    });
  </script>




  

  
  
  

  

    
      
    

    <script type="text/javascript">
      var disqus_shortname = 'sunbingjie';
      var disqus_identifier = '2015/02/25/1.6/';
      var disqus_url = 'http://sunbingjie.tk/2015/02/25/1.6/';

      (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }());
    </script>
  




  
</body>
</html>
