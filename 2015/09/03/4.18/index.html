<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>




  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.2"/>




  <meta name="keywords" content="Tree,Recursion,LinkedList," />



  <link rel="alternate" href="//atom.xml" title="Cici's Blog" type="application/atom+xml" />



  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.2" />




  <title> The Great Tree-List Recursion Problem, LRU Cache, Search Insert Position, Longest Common Prefix, Linked List Cycle, Linked List Cycle II // Cici's Blog </title>
</head>

<body>
  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">Cici's Blog</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>


  <ul id="menu" class="menu">
     
    
      
      <li class="menu-item menu-item-home">
        <a href="/">
          <i class="menu-item-icon icon-home"></i> <br />
          Home
        </a>
      </li>
    
      
      <li class="menu-item menu-item-categories">
        <a href="/categories">
          <i class="menu-item-icon icon-categories"></i> <br />
          Categories
        </a>
      </li>
    
      
      <li class="menu-item menu-item-archives">
        <a href="/archives">
          <i class="menu-item-icon icon-archives"></i> <br />
          Archives
        </a>
      </li>
    
      
      <li class="menu-item menu-item-tags">
        <a href="/tags">
          <i class="menu-item-icon icon-tags"></i> <br />
          Tags
        </a>
      </li>
    
      
      <li class="menu-item menu-item-about">
        <a href="/about">
          <i class="menu-item-icon icon-about"></i> <br />
          About
        </a>
      </li>
    
  </ul>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              The Great Tree-List Recursion Problem, LRU Cache, Search Insert Position, Longest Common Prefix, Linked List Cycle, Linked List Cycle II
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on 2015-09-04
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; In
            
              <a href="/categories/刷题/">刷题</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/09/03/4.18/#comments" >
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/09/03/4.18/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        <h2 id="First_Problem_ఠ_ఠ">First Problem ఠ_ఠ</h2>
<blockquote>
<p>Convert a given Binary Tree to Doubly Linked List</p>
</blockquote>
<a id="more"></a>
<h3 id="Solution">Solution</h3>
<p>Inorder traversal, then link each value…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> DListNode pre = <span class="keyword">new</span> DListNode();</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> DListNode dummy = pre;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">btreetolist</span>(TreeNode r){</div><div class="line">    <span class="keyword">if</span>(r==<span class="keyword">null</span>) <span class="keyword">return</span>;</div><div class="line">    btreetolist(r.left);</div><div class="line">    DListNode cur = <span class="keyword">new</span> DListNode(r);</div><div class="line">    cur.prev = pre;</div><div class="line">    pre.next = cur;</div><div class="line">    pre = cur;</div><div class="line">    btreetolist(r.right);</div><div class="line">    }</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] args) {</div><div class="line">    TreeNode root = <span class="keyword">new</span> TreeNode(<span class="number">2</span>);</div><div class="line">    TreeNode l = <span class="keyword">new</span> TreeNode(<span class="number">1</span>);</div><div class="line">    TreeNode r = <span class="keyword">new</span> TreeNode(<span class="number">3</span>);</div><div class="line">    root.left = l; root.right=r;</div><div class="line">    btreetolist(root);</div><div class="line">    System.out.println(dummy.next.val.val);</div><div class="line">    System.out.println(dummy.next.next.val.val);</div><div class="line">    System.out.println(dummy.next.next.next.val.val);</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="The_Great_Tree-List_Recursion_Problem"><a href="http://cslibrary.stanford.edu/109/TreeListRecursion.html" target="_blank" rel="external">The Great Tree-List Recursion Problem</a></h2>
<blockquote>
<p>Here’s the formal problem statement: Write a recursive function treeToList(Node root) that takes an ordered binary tree and rearranges the internal pointers to make a circular doubly linked list out of the tree nodes. The “previous” pointers should be stored in the “small” field and the “next” pointers should be stored in the “large” field. The list should be arranged so that the nodes are in increasing order. Return the head pointer to the new list. The operation can be done in O(n) time — essentially operating on each node once. Basically take figure-1 as input and rearrange the pointers to make figure-2.</p>
</blockquote>
<p><img src="http://cslibrary.stanford.edu/109/tree.gif" alt=""><br><img src="http://cslibrary.stanford.edu/109/list.gif" alt=""></p>
<h3 id="Solution-1">Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">This is the simple Node class from which the tree and list</div><div class="line">are built. This does not have any methods -- it's just used</div><div class="line">as dumb storage by TreeList.</div><div class="line">The code below tries to be clear where it treats a Node pointer</div><div class="line">as a tree vs. where it is treated as a list.</div><div class="line"> */</div><div class="line">class Node {</div><div class="line">    <span class="keyword">int</span> data;</div><div class="line">    Node small;</div><div class="line">    Node large;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="title">Node</span>(<span class="keyword">int</span> data) {</div><div class="line">        <span class="keyword">this</span>.data = data;</div><div class="line">        small = <span class="keyword">null</span>;</div><div class="line">        large = <span class="keyword">null</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">TreeList main methods:</div><div class="line">-join() -- utility to connect two list nodes</div><div class="line">-append() -- utility to append two lists</div><div class="line">-treeToList() -- the core recursive function</div><div class="line">-treeInsert() -- used to build the tree</div><div class="line"> */</div><div class="line">class TreeList {</div><div class="line">    <span class="comment">/*</span></div><div class="line">  helper function -- given two list nodes, join them</div><div class="line">  together so the second immediately follow the first.</div><div class="line">  Sets the .next of the first and the .previous of the second.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">join</span>(Node a, Node b) {</div><div class="line">        a.large = b;</div><div class="line">        b.small = a;</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line">  helper function -- given two circular doubly linked</div><div class="line">  lists, append them and return the new list.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Node <span class="title">append</span>(Node a, Node b) {</div><div class="line">        <span class="comment">// if either is null, return the other</span></div><div class="line">        <span class="keyword">if</span> (a==<span class="keyword">null</span>) <span class="keyword">return</span>(b);</div><div class="line">        <span class="keyword">if</span> (b==<span class="keyword">null</span>) <span class="keyword">return</span>(a);</div><div class="line"></div><div class="line">        <span class="comment">// find the last node in each using the .previous pointer</span></div><div class="line">        Node aLast = a.small;</div><div class="line">        Node bLast = b.small;</div><div class="line"></div><div class="line">        <span class="comment">// join the two together to make it connected and circular</span></div><div class="line">        join(aLast, b);</div><div class="line">        join(bLast, a);</div><div class="line"></div><div class="line">        <span class="keyword">return</span>(a);</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line">  --Recursion--</div><div class="line">  Given an ordered binary tree, recursively change it into</div><div class="line">  a circular doubly linked list which is returned.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Node <span class="title">treeToList</span>(Node root) {</div><div class="line">        <span class="comment">// base case: empty tree -&gt; empty list</span></div><div class="line">        <span class="keyword">if</span> (root==<span class="keyword">null</span>) <span class="keyword">return</span>(<span class="keyword">null</span>);</div><div class="line"></div><div class="line">        <span class="comment">// Recursively do the subtrees (leap of faith!)</span></div><div class="line">        Node aList = treeToList(root.small);</div><div class="line">        Node bList = treeToList(root.large);</div><div class="line"></div><div class="line">        <span class="comment">// Make the single root node into a list length-1</span></div><div class="line">        <span class="comment">// in preparation for the appending</span></div><div class="line">        root.small = root;</div><div class="line">        root.large = root;</div><div class="line"></div><div class="line">        <span class="comment">// At this point we have three lists, and it's</span></div><div class="line">        <span class="comment">// just a matter of appending them together</span></div><div class="line">        <span class="comment">// in the right order (aList, root, bList)</span></div><div class="line">        aList = append(aList, root);</div><div class="line">        aList = append(aList, bList);</div><div class="line"></div><div class="line">        <span class="keyword">return</span>(aList);</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line">  Given a non-empty tree, insert a new node in the proper</div><div class="line">  place. The tree must be non-empty because Java's lack</div><div class="line">  of reference variables makes that case and this</div><div class="line">  method messier than they should be.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">treeInsert</span>(Node root, <span class="keyword">int</span> newData) {</div><div class="line">        <span class="keyword">if</span> (newData&lt;=root.data) {</div><div class="line">            <span class="keyword">if</span> (root.small!=<span class="keyword">null</span>) treeInsert(root.small, newData);</div><div class="line">            <span class="keyword">else</span> root.small = <span class="keyword">new</span> Node(newData);</div><div class="line">        }</div><div class="line">        <span class="keyword">else</span> {</div><div class="line">            <span class="keyword">if</span> (root.large!=<span class="keyword">null</span>) treeInsert(root.large, newData);</div><div class="line">            <span class="keyword">else</span> root.large = <span class="keyword">new</span> Node(newData);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">// Do an inorder traversal to print a tree</span></div><div class="line">    <span class="comment">// Does not print the ending "\n"</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printTree</span>(Node root) {</div><div class="line">        <span class="keyword">if</span> (root==<span class="keyword">null</span>) <span class="keyword">return</span>;</div><div class="line">        printTree(root.small);</div><div class="line">        System.out.print(Integer.toString(root.data) + <span class="string">" "</span>);</div><div class="line">        printTree(root.large);</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">// Do a traversal of the list and print it out</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printList</span>(Node head) {</div><div class="line">        Node current = head;</div><div class="line"></div><div class="line">        <span class="keyword">while</span> (current != <span class="keyword">null</span>) {</div><div class="line">            System.out.print(Integer.toString(current.data) + <span class="string">" "</span>);</div><div class="line">            current = current.large;</div><div class="line">            <span class="keyword">if</span> (current == head) <span class="keyword">break</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        System.out.println();</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">// Demonstrate tree-&gt;list with the list 1..5</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] args) {</div><div class="line"></div><div class="line">        <span class="comment">// first build the tree shown in the problem document</span></div><div class="line">        <span class="comment">// http://cslibrary.stanford.edu/109/</span></div><div class="line">        Node root = <span class="keyword">new</span> Node(<span class="number">4</span>);</div><div class="line">        treeInsert(root, <span class="number">2</span>);</div><div class="line">        treeInsert(root, <span class="number">1</span>);</div><div class="line">        treeInsert(root, <span class="number">3</span>);</div><div class="line">        treeInsert(root, <span class="number">5</span>);</div><div class="line"></div><div class="line">        System.out.println(<span class="string">"tree:"</span>);</div><div class="line">        printTree(root);   <span class="comment">// 1 2 3 4 5</span></div><div class="line">        System.out.println();</div><div class="line"></div><div class="line">        System.out.println(<span class="string">"list:"</span>);</div><div class="line">        Node head = treeToList(root);</div><div class="line">        printList(head);   <span class="comment">// 1 2 3 4 5   yay!</span></div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="LRU_Cache">LRU Cache</h2>
<blockquote>
<p>Design and implement a data structure for Least Recently Used (LRU) cache. It should support the following operations: get and set.<br>get(key) - Get the value (will always be positive) of the key if the key exists in the cache, otherwise return -1.<br>set(key, value) - Set or insert the value if the key is not already present. When the cache reached its capacity, it should invalidate the least recently used item before inserting a new item.</p>
</blockquote>
<h3 id="LinkedHashMap_Solution">LinkedHashMap Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> java.util.LinkedHashMap&lt;Integer,Integer&gt; self = <span class="keyword">new</span> java.util.LinkedHashMap&lt;Integer,Integer&gt;();</div><div class="line"><span class="keyword">private</span> <span class="keyword">int</span> capacity;</div><div class="line"><span class="keyword">public</span> <span class="title">LRUCache</span>(<span class="keyword">int</span> capacity) {</div><div class="line">    <span class="keyword">this</span>.capacity = capacity;</div><div class="line">}</div><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span>(<span class="keyword">int</span> key) {</div><div class="line">    Integer val = self.get(key);</div><div class="line">    <span class="keyword">if</span>(val==<span class="keyword">null</span>) <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">    self.remove(key);</div><div class="line">    self.put(key,val);</div><div class="line">    <span class="keyword">return</span> val;</div><div class="line">}</div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span>(<span class="keyword">int</span> key, <span class="keyword">int</span> value) {</div><div class="line">    Integer val = self.get(key);</div><div class="line">    <span class="keyword">if</span>(val==<span class="keyword">null</span> && self.size() == capacity){</div><div class="line">        self.remove(self.keySet().iterator().next());</div><div class="line">    }</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(val!=<span class="keyword">null</span>) self.remove(key);</div><div class="line">    self.put(key,value);</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="Map_+_List_Solution">Map + List Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> HashMap&lt;Integer,Integer&gt; map;</div><div class="line"><span class="keyword">private</span> ArrayList&lt;Integer&gt; list;</div><div class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> cap;</div><div class="line"><span class="keyword">public</span> <span class="title">LRUCache</span>(<span class="keyword">int</span> cap){</div><div class="line">    map = <span class="keyword">new</span> HashMap&lt;Integer, Integer&gt;();</div><div class="line">    list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line">    <span class="keyword">this</span>.cap = cap; </div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span>(<span class="keyword">int</span> key){</div><div class="line">    <span class="keyword">if</span>(!map.containsKey(key)) <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> var = map.get(key);</div><div class="line">    list.remove(list.indexOf(key));</div><div class="line">    list.add(key);</div><div class="line">    <span class="keyword">return</span> var;</div><div class="line">}</div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span>(<span class="keyword">int</span> key, <span class="keyword">int</span> value){</div><div class="line">    <span class="keyword">int</span> val = get(key);</div><div class="line">    map.put(key, value);</div><div class="line">    <span class="keyword">if</span>(val == -<span class="number">1</span>){</div><div class="line">        list.add(key);</div><div class="line">        <span class="keyword">if</span>(map.size()&gt; cap){</div><div class="line">            map.remove(list.get(<span class="number">0</span>));</div><div class="line">            list.remove(<span class="number">0</span>);</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Search_Insert_Position">Search Insert Position</h2>
<blockquote>
<p>Given a sorted array and a target value, return the index if the target is found. If not, return the index where it would be if it were inserted in order.<br>You may assume no duplicates in the array.<br>Here are few examples.<br>[1,3,5,6], 5 → 2<br>[1,3,5,6], 2 → 1<br>[1,3,5,6], 7 → 4<br>[1,3,5,6], 0 → 0</p>
</blockquote>
<h3 id="Binary_Search_Solution">Binary Search Solution</h3>
<ul>
<li>Aside form the obvious scan solution..</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">searchInsert</span>(<span class="keyword">int</span>[] A, <span class="keyword">int</span> target) {</div><div class="line">    <span class="keyword">int</span> index = bsearch(A, target, <span class="number">0</span>, A.length-<span class="number">1</span>);</div><div class="line">    <span class="keyword">return</span> index;</div><div class="line">}</div><div class="line"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">bsearch</span>(<span class="keyword">int</span>[] A, <span class="keyword">int</span> target, <span class="keyword">int</span> l, <span class="keyword">int</span> r){</div><div class="line">    <span class="keyword">int</span> mid = (l+r) / <span class="number">2</span>;</div><div class="line">    <span class="keyword">if</span>(l&gt;=r) </div><div class="line">    {<span class="keyword">if</span>(A[l]&lt;target) <span class="keyword">return</span> l+<span class="number">1</span>;</div><div class="line">     <span class="keyword">if</span>(A[l]&gt;target) <span class="keyword">return</span> l;}</div><div class="line">    <span class="keyword">if</span>(target == A[mid]) <span class="keyword">return</span> mid;</div><div class="line">    <span class="keyword">if</span>(target &gt; A[mid]) <span class="keyword">return</span> bsearch(A,target,mid+<span class="number">1</span>,r);</div><div class="line">    <span class="keyword">else</span> <span class="keyword">return</span> bsearch(A,target,l,mid-<span class="number">1</span>);</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Longest_Common_Prefix">Longest Common Prefix</h2>
<blockquote>
<p>Write a function to find the longest common prefix string amongst an array of strings.</p>
</blockquote>
<h3 id="Solution-2">Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> String <span class="title">longestCommonPrefix</span>(String[] strs) {</div><div class="line">    <span class="keyword">int</span> n = strs.length;</div><div class="line">    <span class="keyword">if</span>(n==<span class="number">0</span>) <span class="keyword">return</span> <span class="string">""</span>;</div><div class="line">    StringBuilder sb = <span class="keyword">new</span> StringBuilder(); </div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;strs[<span class="number">0</span>].length();i++){</div><div class="line">        <span class="keyword">char</span> tmp = strs[<span class="number">0</span>].charAt(i);</div><div class="line">        <span class="keyword">for</span>(String s: strs){</div><div class="line">            <span class="keyword">if</span>(i+<span class="number">1</span>&gt;s.length() || s.charAt(i)!=tmp) <span class="keyword">return</span> sb.toString();</div><div class="line">        }</div><div class="line">        sb.append(tmp);</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> sb.toString();</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Linked_List_Cycle">Linked List Cycle</h2>
<blockquote>
<p>Given a linked list, determine if it has a cycle in it.<br>Follow up:<br>Can you solve it without using extra space?</p>
</blockquote>
<h3 id="Fast_Slow_Pointer_Solution">Fast Slow Pointer Solution</h3>
<ul>
<li>Edge case one: input &lt;=1 element</li>
<li>Edge case two: fast==null || fast.next==null</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasCycle</span>(ListNode head) {</div><div class="line">    <span class="keyword">if</span>(head==<span class="keyword">null</span> || head.next==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    ListNode a = head;</div><div class="line">    ListNode b = head;</div><div class="line">    <span class="keyword">while</span>(b!=<span class="keyword">null</span> && b.next!=<span class="keyword">null</span>){</div><div class="line">        a = a.next;</div><div class="line">        b = b.next.next;</div><div class="line">        <span class="keyword">if</span>(a==b) <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Linked_List_Cycle_II">Linked List Cycle II</h2>
<blockquote>
<p>Given a linked list, return the node where the cycle begins. If there is no cycle, return null.<br>Follow up:<br>Can you solve it without using extra space?</p>
</blockquote>
<h3 id="Solution-3">Solution</h3>
<ul>
<li>fast dis = a+b+c+b = 2 X slow dis = 2 * (a+b) -&gt; a=c</li>
</ul>
<p><img src="http://images.cnitblog.com/blog/354747/201311/05171805-64db9f059a1641e7afaf3dd8223c4fe7.jpg" alt=""></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> ListNode <span class="title">detectCycle</span>(ListNode head) {</div><div class="line">    ListNode a = head;</div><div class="line">    ListNode b = head;</div><div class="line">    <span class="keyword">while</span>(b!=<span class="keyword">null</span> && b.next!=<span class="keyword">null</span>){</div><div class="line">        a = a.next;</div><div class="line">        b = b.next.next;</div><div class="line">        <span class="keyword">if</span>(a==b){</div><div class="line">            a=head;</div><div class="line">            <span class="keyword">while</span>(a!=b){</div><div class="line">                a=a.next;</div><div class="line">                b=b.next;</div><div class="line">            }</div><div class="line">            <span class="keyword">return</span> a;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<iframe width="100%" height="160" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A%2F%2Fsoundcloud.com%2Falice-jemima%2Fno-diggity-1%3Fin%3Dcici-42%2Fsets%2Fsuits&auto_play=false&hide_related=true&show_comments=true&show_user=true&show_reposts=false&visual=true"></iframe>

      
    </div>

    <div class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Tree/"> #Tree </a>
          
            <a href="/tags/Recursion/"> #Recursion </a>
          
            <a href="/tags/LinkedList/"> #LinkedList </a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/09/03/4.12/">Single Number, Single Number II, Decode Ways, Triangle</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/09/03/9.3/">Combination Sum,Combination Sum II, Combination Sum III</a>
            
          </div>
        </div>
      

      
      
    </div>
  </div>



    
      <div class="comments" id="comments">
        
          <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          </div>
        
      </div>
    
  </div>


        </div>
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table Of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <div class="site-overview">
        <div class="site-author motion-element">
          <img class="site-author-image" src="/images/default_avatar.jpg" alt="Cici Sun" />
          <p class="site-author-name">Cici Sun</p>
        </div>
        <p class="site-description motion-element"></p>
        <div class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">49</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">5</span>
              <span class="site-state-item-name">categories</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">24</span>
              <span class="site-state-item-name">tags</span>
              </a>
          </div>

        </div>

        
          <div class="feed-link motion-element">
            <a href="//atom.xml">
              <i class="menu-item-icon icon-feed"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
              <a href="https://github.com/CICISUN/" target="_blank">GitHub</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="https://twitter.com/insertsomthin" target="_blank">Twitter</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://www.weibo.com/bingjiesun" target="_blank">Weibo</a>
            </span>
            
          
        </div>

        
        

      </div>

      
        <div class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#First_Problem_ఠ_ఠ"><span class="nav-number">1.</span> <span class="nav-text">First Problem ఠ_ఠ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution"><span class="nav-number">1.1.</span> <span class="nav-text">Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The_Great_Tree-List_Recursion_Problem"><span class="nav-number">2.</span> <span class="nav-text">The Great Tree-List Recursion Problem</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution-1"><span class="nav-number">2.1.</span> <span class="nav-text">Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#LRU_Cache"><span class="nav-number">3.</span> <span class="nav-text">LRU Cache</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#LinkedHashMap_Solution"><span class="nav-number">3.1.</span> <span class="nav-text">LinkedHashMap Solution</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Map_+_List_Solution"><span class="nav-number">3.2.</span> <span class="nav-text">Map + List Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Search_Insert_Position"><span class="nav-number">4.</span> <span class="nav-text">Search Insert Position</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Binary_Search_Solution"><span class="nav-number">4.1.</span> <span class="nav-text">Binary Search Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Longest_Common_Prefix"><span class="nav-number">5.</span> <span class="nav-text">Longest Common Prefix</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution-2"><span class="nav-number">5.1.</span> <span class="nav-text">Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linked_List_Cycle"><span class="nav-number">6.</span> <span class="nav-text">Linked List Cycle</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Fast_Slow_Pointer_Solution"><span class="nav-number">6.1.</span> <span class="nav-text">Fast Slow Pointer Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linked_List_Cycle_II"><span class="nav-number">7.</span> <span class="nav-text">Linked List Cycle II</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution-3"><span class="nav-number">7.1.</span> <span class="nav-text">Solution</span></a></li></ol></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </div>
      

    </div>
  </div>


    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp; 
  2015
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author">Cici Sun</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $('.content img').each(function () {
        var $image = $(this);
        var $imageWrapLink = $image.parent('a');

        if ($imageWrapLink.size() < 1) {
          $imageWrapLink = $image.wrap('<a href="' + this.getAttribute('src') + '"></a>').parent('a');
        }
        $imageWrapLink.addClass('fancybox');
      });
    });
    $('.fancybox').fancybox({
      helpers: {
        overlay: {
          locked: false
        }
      }
    });
  </script>


  <script type="text/javascript">
  function hasMobileUA () {
    var nav = window.navigator;
    var ua = nav.userAgent;
    var pa = /iPad|iPhone|Android|Opera Mini|BlackBerry|webOS|UCWEB|Blazer|PSP|IEMobile|Symbian/g;

    return pa.test(ua);
  }

  function isDesktop () {
    return screen.width > 991 && !hasMobileUA();
  }

  function isTablet () {
    return screen.width < 992 && screen.width > 767 && hasMobileUA();
  }

  function isMobile () {
    return screen.width < 767 && hasMobileUA();
  }

  function escapeSelector (selector) {
    return selector.replace(/[!"$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g, "\\$&")
  }
</script>

  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" id="motion.global">
  $(document).ready(function () {
    var body = $('body');
    var isSidebarVisible = false;
    var sidebarToggle = $('.sidebar-toggle');
    var sidebarToggleLine1st = $('.sidebar-toggle-line-first')
    var sidebarToggleLine2nd = $('.sidebar-toggle-line-middle');
    var sidebarToggleLine3rd = $('.sidebar-toggle-line-last');
    var sidebar = $('.sidebar');

    var SIDEBAR_WIDTH = '320px';
    var SIDEBAR_DISPLAY_DURATION = 300;

    var sidebarToogleLineStatusInit = {width: '100%', opacity: 1, left: 0, rotateZ: 0, top: 0};

    var sidebarToggleLine1stStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine1stStatusArrow = {width: '50%', rotateZ: '-45deg', top: '2px'};
    var sidebarToogleLine1stStatusClose = {width: '100%', rotateZ: '-45deg', top: '5px'};

    var sidebarToggleLine2ndStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine2ndStatusArrow = {width: '90%'};
    var sidebarToogleLine2ndStatusClose = {opacity: 0};

    var sidebarToggleLine3rdStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine3rdStatusArrow = {width: '50%', rotateZ: '45deg', top: '-2px'};
    var sidebarToogleLine3rdStatusClose = {width: '100%', rotateZ: '45deg', top: '-5px'};

    LogoAndMenuMotion();
    sidebatToggleMotion();
    postsListMotion();
    backToTopMotion();


    $(document)
      .on('sidebar.isShowing', function () {
        isDesktop() && body.velocity(
          {paddingRight: SIDEBAR_WIDTH},
          SIDEBAR_DISPLAY_DURATION
        );
        sidebarContentMotion();
      })
      .on('sidebar.isHiding', function () {});

    function LogoAndMenuMotion() {
      $.Velocity.RunSequence([
        { e: $('.brand'), p: { opacity: 1 }, o: { duration: 100 } },
        { e: $('.logo'), p: { opacity: 1, top: 0 }, o: { duration: 50} },
        
        { e: $('.logo-line-before i'), p: { translateX: "100%" }, o: { duration: 500, sequenceQueue: false } },
        { e: $('.logo-line-after i'), p: { translateX: "-100%" }, o: { duration: 500, sequenceQueue: false } },
        
        { e: $('.site-title'), p: { opacity: 1, top: 0 }, o: { duration: 200 } }
      ]);
      $('.menu-item').velocity('transition.slideDownIn', {display: null});
    }


    function backToTopMotion () {
      var b2top = $('.back-to-top');
      b2top.on('click', function () {
        body.velocity('scroll');
      });
    }

    function sidebarShowMotion () {

      sidebarToggleLine1st.velocity(sidebarToogleLine1stStatusClose);
      sidebarToggleLine2nd.velocity(sidebarToogleLine2ndStatusClose);
      sidebarToggleLine3rd.velocity(sidebarToogleLine3rdStatusClose);

      sidebar.velocity({width: SIDEBAR_WIDTH}, {
        display: 'block',
        duration: SIDEBAR_DISPLAY_DURATION,
        complete: function () {
          sidebar.addClass('sidebar-active');
          sidebar.trigger('sidebar.didShow');
        }
      });
      sidebar.trigger('sidebar.isShowing');
    }

    function sidebarHideMotion () {
      isDesktop() && body.velocity({paddingRight: 0});
      sidebar.velocity('reverse');

      sidebarToggleLine1st.velocity(sidebarToggleLine1stStatusInit);
      sidebarToggleLine2nd.velocity(sidebarToggleLine2ndStatusInit);
      sidebarToggleLine3rd.velocity(sidebarToggleLine3rdStatusInit);

      sidebar.removeClass('sidebar-active');
      sidebar.trigger('sidebar.isHiding');
    };

    function sidebarContentMotion () {
      $('.sidebar .motion-element').velocity(
        'transition.slideRightIn',
        {stagger: 50, drag: true}
      );
    }

    function postsListMotion () {
      var postMotionOptions = window.postMotionOptions || {stagger: 300, drag: true};
      $('.post').velocity('transition.slideDownIn', postMotionOptions);
    }

    function sidebatToggleMotion () {
      sidebarToggle.on('click', function () {
        isSidebarVisible ? sidebarHideMotion() : sidebarShowMotion();
        isSidebarVisible = !isSidebarVisible;
      });

      sidebarToggle.hover(function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusArrow);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusArrow);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusArrow);
      }, function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusInit);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusInit);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusInit);
      });
    }
  });

</script>





  
  
<script type="text/javascript" id="bootstrap.scrollspy.custom">
  /* ========================================================================
  * Bootstrap: scrollspy.js v3.3.2
  * http://getbootstrap.com/javascript/#scrollspy
  * ========================================================================
  * Copyright 2011-2015 Twitter, Inc.
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  * ======================================================================== */

  /**
   * Custom by iissnan
   *
   * - Add a `clear.bs.scrollspy` event.
   * - Esacpe targets selector.
   */


  +function ($) {
    'use strict';

    // SCROLLSPY CLASS DEFINITION
    // ==========================

    function ScrollSpy(element, options) {
      this.$body          = $(document.body)
      this.$scrollElement = $(element).is(document.body) ? $(window) : $(element)
      this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)
      this.selector       = (this.options.target || '') + ' .nav li > a'
      this.offsets        = []
      this.targets        = []
      this.activeTarget   = null
      this.scrollHeight   = 0

      this.$scrollElement.on('scroll.bs.scrollspy', $.proxy(this.process, this))
      this.refresh()
      this.process()
    }

    ScrollSpy.VERSION  = '3.3.2'

    ScrollSpy.DEFAULTS = {
      offset: 10
    }

    ScrollSpy.prototype.getScrollHeight = function () {
      return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
    }

    ScrollSpy.prototype.refresh = function () {
      var that          = this
      var offsetMethod  = 'offset'
      var offsetBase    = 0

      this.offsets      = []
      this.targets      = []
      this.scrollHeight = this.getScrollHeight()

      if (!$.isWindow(this.$scrollElement[0])) {
        offsetMethod = 'position'
        offsetBase   = this.$scrollElement.scrollTop()
      }

      this.$body
        .find(this.selector)
        .map(function () {
          var $el   = $(this)
          var href  = $el.data('target') || $el.attr('href')
          var $href = /^#./.test(href) && $(escapeSelector(href)) // Need to escape selector.

          return ($href
            && $href.length
            && $href.is(':visible')
            && [[$href[offsetMethod]().top + offsetBase, href]]) || null
        })
        .sort(function (a, b) { return a[0] - b[0] })
        .each(function () {
          that.offsets.push(this[0])
          that.targets.push(this[1])
        })


    }

    ScrollSpy.prototype.process = function () {
      var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset
      var scrollHeight = this.getScrollHeight()
      var maxScroll    = this.options.offset + scrollHeight - this.$scrollElement.height()
      var offsets      = this.offsets
      var targets      = this.targets
      var activeTarget = this.activeTarget
      var i

      if (this.scrollHeight != scrollHeight) {
        this.refresh()
      }

      if (scrollTop >= maxScroll) {
        return activeTarget != (i = targets[targets.length - 1]) && this.activate(i)
      }

      if (activeTarget && scrollTop < offsets[0]) {
        $(this.selector).trigger('clear.bs.scrollspy')  // Add a custom event.
        this.activeTarget = null
        return this.clear()
      }

      for (i = offsets.length; i--;) {
        activeTarget != targets[i]
          && scrollTop >= offsets[i]
          && (!offsets[i + 1] || scrollTop <= offsets[i + 1])
          && this.activate(targets[i])
      }
    }

    ScrollSpy.prototype.activate = function (target) {
      this.activeTarget = target

      this.clear()

      var selector = this.selector +
        '[data-target="' + target + '"],' +
        this.selector + '[href="' + target + '"]'

      var active = $(selector)
        .parents('li')
        .addClass('active')

      if (active.parent('.dropdown-menu').length) {
        active = active
          .closest('li.dropdown')
          .addClass('active')
      }

      active.trigger('activate.bs.scrollspy')
    }

    ScrollSpy.prototype.clear = function () {
      $(this.selector)
        .parentsUntil(this.options.target, '.active')
        .removeClass('active')
    }


    // SCROLLSPY PLUGIN DEFINITION
    // ===========================

    function Plugin(option) {
      return this.each(function () {
        var $this   = $(this)
        var data    = $this.data('bs.scrollspy')
        var options = typeof option == 'object' && option

        if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))
        if (typeof option == 'string') data[option]()
      })
    }

    var old = $.fn.scrollspy

    $.fn.scrollspy             = Plugin
    $.fn.scrollspy.Constructor = ScrollSpy


    // SCROLLSPY NO CONFLICT
    // =====================

    $.fn.scrollspy.noConflict = function () {
      $.fn.scrollspy = old
      return this
    }


    // SCROLLSPY DATA-API
    // ==================

    $(window).on('load.bs.scrollspy.data-api', function () {
      $('[data-spy="scroll"]').each(function () {
        var $spy = $(this)
        Plugin.call($spy, $spy.data())
      })
    })

  }(jQuery);
</script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var $sidebarInner = $('.sidebar-inner');
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.didShow', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;
          var self = this;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      $(indicator).velocity('stop').velocity({
        opacity: action === 'show' ? 0.4 : 0
      }, { duration: 100 });
    }

  });
</script>


  <script type="text/javascript" id="sidebar.nav">
    $(document).ready(function () {
      var html = $('html');

      $('.sidebar-nav li').on('click', function () {
        var item = $(this);
        var activeTabClassName = 'sidebar-nav-active';
        var activePanelClassName = 'sidebar-panel-active';
        if (item.hasClass(activeTabClassName)) {
          return;
        }

        var currentTarget = $('.' + activePanelClassName);
        var target = $('.' + item.data('target'));

        currentTarget.velocity('transition.slideUpOut', 200, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', 200)
            .addClass(activePanelClassName);
        });

        item.siblings().removeClass(activeTabClassName);
        item.addClass(activeTabClassName);
      });

      $('.post-toc a').on('click', function (e) {
        e.preventDefault();
        var offset = $(escapeSelector(this.getAttribute('href'))).offset().top;
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        });
      });

      // Expand sidebar on post detail page by default, when post has a toc.
      var $tocContent = $('.post-toc-content');
      if ($tocContent.length > 0 && $tocContent.html().trim().length > 0 && isDesktop()) {
        setTimeout(function () {
          $('.sidebar-toggle').trigger('click');
        }, 800);
      }
    });
  </script>




  

  
  
  

  

    
      
    

    <script type="text/javascript">
      var disqus_shortname = 'sunbingjie';
      var disqus_identifier = '2015/09/03/4.18/';
      var disqus_url = 'http://sunbingjie.tk/2015/09/03/4.18/';

      (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }());
    </script>
  




  
</body>
</html>
