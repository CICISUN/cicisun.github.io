<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>




  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.2"/>




  <meta name="keywords" content="Concepts," />



  <link rel="alternate" href="//atom.xml" title="Cici's Blog" type="application/atom+xml" />



  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.2" />




  <title> Java Related Questions // Cici's Blog </title>
</head>

<body>
  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">Cici's Blog</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>


  <ul id="menu" class="menu">
     
    
      
      <li class="menu-item menu-item-home">
        <a href="/">
          <i class="menu-item-icon icon-home"></i> <br />
          Home
        </a>
      </li>
    
      
      <li class="menu-item menu-item-categories">
        <a href="/categories">
          <i class="menu-item-icon icon-categories"></i> <br />
          Categories
        </a>
      </li>
    
      
      <li class="menu-item menu-item-archives">
        <a href="/archives">
          <i class="menu-item-icon icon-archives"></i> <br />
          Archives
        </a>
      </li>
    
      
      <li class="menu-item menu-item-tags">
        <a href="/tags">
          <i class="menu-item-icon icon-tags"></i> <br />
          Tags
        </a>
      </li>
    
      
      <li class="menu-item menu-item-about">
        <a href="/about">
          <i class="menu-item-icon icon-about"></i> <br />
          About
        </a>
      </li>
    
  </ul>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              Java Related Questions
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on 2015-03-13
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; In
            
              <a href="/categories/CC/">CC</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/03/13/2.12-3/#comments" >
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/03/13/2.12-3/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        <h1 id="Java_Questions">Java Questions</h1>
<p>Contents:</p>
<ul>
<li><a href="#Keywords">Keywords</a></li>
<li><a href="#Concepts">Concepts</a></li>
<li><a href="#OOP">OOP</a></li>
<li><a href="#Collections">Collections</a></li>
<li><a href="#Thread">Threading</a></li>
</ul>
<h2 id="Object_Oriented">Object Oriented</h2>
<ul>
<li>model organized around objects rather than actions and data rather than logic</li>
<li>based on the concept of “objects”</li>
<li>contain data in the form of fields(attributes)</li>
<li>code in the form of procedures(methods)</li>
<li>object’s procedures can access and modify the data fields of the associated object</li>
</ul>
<p><a name="Keywords"></a></p>
<h2 id="Java_Keywords">Java Keywords</h2>
<ul>
<li><p>Access modifiers</p>
<p>| modifier | access in same package | access in different package |<br>| ———— | ——————————— | —————————————- |<br>| private  |         no             |          no                 |<br>| public   |         yes            |         yes                 |<br>| default  |         yes            |          no                 |<br>| protected|         yes            |     only if extend class    |  </p>
</li>
<li><p><code>final</code> keyword</p>
<ul>
<li>can be assigned to variable, method, class, object</li>
<li>if assigned<ul>
<li>variable: behave like a constant and cannot change value</li>
<li>method: cannot be overridden in its child class</li>
<li>class: no other class can extend it</li>
<li>object: only instantiated once</li>
</ul>
</li>
</ul>
</li>
<li><p><code>synchronized</code> keyword</p>
<ul>
<li>provide lock on the object and prevent race condition</li>
<li>can be applied to static/non-static methods or block of code</li>
<li>only one thread at a time can access synchronized methods</li>
<li>if multiple threads, need to wait for execution complete</li>
</ul>
</li>
<li><p><code>volatile</code> keyword</p>
<ul>
<li>volatile variable stored in main memory</li>
<li>every thread can access </li>
<li>local copy updated from main memory</li>
<li>has performance issues</li>
</ul>
</li>
<li><p><code>static</code> variable</p>
<ul>
<li><code>static</code> cannot be used for class</li>
<li>everything declared as <code>static</code> is related to class not object</li>
<li>multiple objects of a class share the same instance of static variable</li>
</ul>
</li>
<li><p><code>static</code> method</p>
<ul>
<li>can be accessed without creating the objects</li>
<li>use class name to access static method</li>
<li>static method can only access static variables and not local or global non-static variable: because if the class is not instantiated and therefore the variables are not initialized and cannot be accessed from a static method</li>
<li>static method can only call static methods and not non-static methods</li>
<li>non-static methods can call static methods</li>
</ul>
</li>
<li><p>static class</p>
<ul>
<li>class cannot be declared as static</li>
<li>class is static if all variables and methods are static and constructor is private, so the only way to access is to use class name </li>
</ul>
</li>
<li><p><code>throw</code> keyword</p>
<ul>
<li>throw exception manually</li>
<li>used when program fails the condition and wants to give warning</li>
<li>throw the exception from a method to the calling method</li>
<li>calling method can decide to handle exception or throw to its calling method</li>
</ul>
</li>
</ul>
<p><a name="Concepts"></a></p>
<h2 id="Concepts">Concepts</h2>
<ul>
<li><p>object vs. class</p>
<ul>
<li>an object is an instance of a class<ul>
<li>object refers to an actual instance of a class</li>
<li>every object must belong to a class</li>
<li>objects are created and then destroyed, only live in the program for limited time</li>
</ul>
</li>
<li>objects have a lifespan but classes do not<ul>
<li>properties of objects can change while they live</li>
</ul>
</li>
</ul>
</li>
<li><p><code>static</code> and <code>instance</code> method</p>
<ul>
<li>instance method<ul>
<li>belong to the instance of a class and require the instance before it can be called</li>
<li>dynamic binding</li>
<li>JVM selects the method to invoke based on the type of object reference, known at run time </li>
</ul>
</li>
<li>static method<ul>
<li>belong to the class itself</li>
<li>static binding </li>
<li>JVM selects the method to invoke based on the actual class of the object, known at compile time</li>
</ul>
</li>
</ul>
</li>
<li><p><code>abstract</code> class and <code>interface</code></p>
<ul>
<li>abstract class<ul>
<li>contain at least one abstract method</li>
<li>can contain numbers of concrete methods</li>
<li>variable can be <code>public</code>, <code>private</code>,<code>protected</code>, <code>default</code>, or constants</li>
<li>a class can only extend one abstract class</li>
<li>not compulsory to implement all methods</li>
<li>if want to add a new feature, simply implement in the abstract class and call it from subclass</li>
</ul>
</li>
<li>interface<ul>
<li>only contain abstract methods</li>
<li>variable is by default <code>public final</code>, only has constants</li>
<li>a class can implement multiple interfaces</li>
<li>compulsory to implement all methods</li>
<li>if want to add a new feature, need to implement the method in all classes implementing the interface</li>
</ul>
</li>
</ul>
</li>
<li><p><code>instanceof</code> and <code>isInstance(Object obj)</code></p>
<ul>
<li><code>instacneof</code> is a keyword but <code>isInstance()</code> is a method</li>
<li><code>instanceof</code> check whether the object is type of particular class or subclass</li>
<li><code>isInstance()</code> only used to identify if object is of a particular class</li>
</ul>
</li>
<li><p>pass by value and pass by reference</p>
<ul>
<li>Java only supports pass by value, actual value is passed</li>
<li>Java passes the references by value, the pointer to the object is passed as value</li>
<li>references passed to the method are actually copies of the original references</li>
</ul>
</li>
<li><p><code>==</code> and <code>equals()</code></p>
<ul>
<li><code>==</code> is used to compare the references of the objects</li>
<li><code>equals()</code> can compare the values of two objects</li>
</ul>
</li>
<li><p><code>StringBuffer</code> and <code>StringBuild</code></p>
<ul>
<li><code>StringBuffer</code> is synchronized but <code>StringBuild</code> is not</li>
</ul>
</li>
<li><p><code>final</code>, <code>finally</code>,<code>finalize()</code></p>
<ul>
<li><code>final</code>: a final variable acts like constant, a final method cannot be overridden, a final class is immutable</li>
<li><code>finally</code>: handles exception, clean up after try block</li>
<li><code>finalize()</code>: method helps in garbage collection, invoked before an object is discarded by the garbage collector, allowing it to clean up its state</li>
</ul>
</li>
<li><p>static block and init block</p>
<ul>
<li>static block is loaded when class is loaded by JVM for the first time</li>
<li>init block is loaded every time the class is loaded</li>
</ul>
</li>
<li><p>object reflections</p>
<ul>
<li>provide a way to get reflective information of class and object</li>
<li>perform operations such as<ul>
<li>get information about methods and fields present inside the class at runtime</li>
<li>get a new instance of a class</li>
<li>get and set object fields directly by getting field reference, regardless what the access modifier is</li>
</ul>
</li>
<li>advantage<ul>
<li>help in observing or manipulating runtime behavior</li>
<li>help in debugging or testing programs</li>
<li>can call method by name when we do not know the method in advance  </li>
</ul>
</li>
</ul>
</li>
<li><p>Overload, Override<br>-Overloading and overriding are complementary things, overloading means the same method name but different parameters, and overriding means the same method name in a subclass with the same parameters. So its not possible for overloading and overriding to happen at the same time because overloading implies different parameters.</p>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> doSth() { <span class="comment">/// }</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="inheritance"><span class="keyword">extends</span></span> <span class="title">A</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> doSth() { <span class="comment">/* method overriden */</span> }</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> doSth(String b) { <span class="comment">/* method overloaded */</span> }</div><div class="line"></div><div class="line">}</div></pre></td></tr></table></figure>


<p><a name="OOP"></a></p>
<h2 id="OOP">OOP</h2>
<ul>
<li><p>polymorphism</p>
<ul>
<li>define more than one function with the same name</li>
<li>compile time polymorphism(overloading) and runtime polymorphism(overriding)</li>
<li>method override: a class method has same name and signature as a method in parent class, JVM determines the proper method to call at runtime</li>
<li>method overloading: method with same name but different signature, determined at compile time</li>
</ul>
</li>
<li><p>inheritance</p>
<ul>
<li>allow a child class to inherit some properties from its parent class</li>
<li>use <code>extends</code> keyword</li>
<li>only public and protected access modifiers can be accessed in child class</li>
</ul>
</li>
<li><p>multiple inheritance</p>
<ul>
<li>Java does not support multiple inheritance</li>
<li>diamond problem</li>
<li>use of multiple interfaces (or extend a class and implement some interfaces)</li>
</ul>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">A</span></span>{</div><div class="line">   add();</div><div class="line">}</div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">B</span></span>{</div><div class="line">   add();</div><div class="line">}</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">implements</span> <span class="title">A</span>,<span class="title">B</span></span>{</div><div class="line">   add();</div><div class="line">}</div></pre></td></tr></table></figure>

<ul>
<li><p>abstraction</p>
<ul>
<li>convert real world objects in terms of class</li>
</ul>
</li>
<li><p>encapsulation</p>
<ul>
<li>achieved by combining the methods and attribute into a class</li>
<li>class acting like a container encapsulation the properties</li>
<li>hide how things work and expose the user requests</li>
</ul>
</li>
</ul>
<p><a name="Collections"></a></p>
<h2 id="Collections">Collections</h2>
<ul>
<li><p>ArrayList and vector</p>
<ul>
<li>synchronization<ul>
<li>ArrayList is not thread-safe but vector is </li>
<li>each method in vector class is surrounded by a synchronized block</li>
</ul>
</li>
<li>data growth<ul>
<li>both use arrays to store contents</li>
<li>enlarge array if not enough space</li>
</ul>
</li>
<li>performance<ul>
<li>vector is slower than arraylist because of thread-safe</li>
</ul>
</li>
</ul>
</li>
<li><p>Sort objects in lists</p>
<ul>
<li>implement Comparable interface for the object class and override compareTo() method</li>
<li>if object class is a jar file, create Comparator and override compare() method</li>
<li>call Collection.sort()</li>
</ul>
</li>
<li><p>HashMap and HashTable</p>
<ul>
<li>HashMap is not synchronized but HashTable is</li>
<li>use Iterator for HashMap(fail-safe) and enumerator for Hashtable(not fail-safe)</li>
<li>HashMap allows null values and only one null key; Hashtable does not allow null key or null value</li>
</ul>
</li>
<li><p>List interface</p>
<ul>
<li>ArrayList<ul>
<li>resizable array implementation</li>
<li>dynamic size</li>
<li>not thread-safe</li>
</ul>
</li>
<li>Vector<ul>
<li>ArrayList implementation</li>
<li>thread-safe</li>
</ul>
</li>
<li>LinkedList<ul>
<li>also implements Queue interface</li>
<li>FIFO</li>
<li>faster for insertion and deletion</li>
</ul>
</li>
</ul>
</li>
<li><p>Set interface</p>
<ul>
<li>SortedSet<ul>
<li>interface extends Set</li>
<li>allow data to be sorted</li>
<li>all elements inserted must implement Comparator or Comparable interface</li>
</ul>
</li>
<li>TreeSet<ul>
<li>implementation of SortedSet interface</li>
<li>O(logn) time for add, remove, contains operations</li>
<li>not synchronized</li>
</ul>
</li>
<li>HashSet<ul>
<li>implements Set interface</li>
<li>back up by hash table</li>
<li>no guarantee on constant order</li>
<li>allow null element</li>
<li>O(1) time for add,remove,contains</li>
</ul>
</li>
</ul>
</li>
<li><p>Arrays and ArrayList</p>
<ul>
<li>arrays are fixed size but ArrayLists are dynamic</li>
<li>elements in the array list can be added or removed at runtime</li>
<li>array contains elements of same type but arraylist can contain elements of different type</li>
</ul>
</li>
<li><p>ArrayList and LinkedList</p>
<ul>
<li>both fast in insertion, inserting into arraylist and into first position of linkedlist takes O(1) time</li>
<li>random lookup in ArrayList is fast, but slow for LinkedList</li>
<li>remove is slow for ArrayList(elements need to be shifted) but fast for LinkedList</li>
</ul>
</li>
<li><p>Advantage of iterator</p>
<ul>
<li>used when no clue about object type</li>
<li>iterator allows updates</li>
</ul>
</li>
<li><p>Preferred declaration</p>
<ul>
<li><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;()</code> not <code>ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;()</code></li>
<li>because function may take List as parameter</li>
<li>more flexible</li>
</ul>
</li>
<li><p>Iterator access and index access</p>
<ul>
<li>insert,update,or delete is faster for iterator access for elements in between the structure</li>
<li>insert,update,or delete is faster for index access for elements at the end</li>
<li>search is fast for index access</li>
</ul>
</li>
</ul>
<p><a name="Thread"></a></p>
<h2 id="Threading">Threading</h2>
<ul>
<li>Thread vs. Process<ul>
<li>definition<ul>
<li>process: executing instance of an application</li>
<li>thread: a path of execution within a process</li>
</ul>
</li>
<li>relationship<ul>
<li>a process can contain multiple threads</li>
<li>thread considered as lightweight process</li>
</ul>
</li>
<li>comparison<ul>
<li>thread for small tasks, process for heavy tasks</li>
<li>thread within the same process share the same address space(allow threads to read and write data to the same structures and variables, allow communication between threads), but different processes do not</li>
<li>threads are easier to create than processes because they do not require a separate address space</li>
<li>multi-threading: be careful that threads share structures that should be modified by one thread at a time</li>
<li>processes are independent of each other</li>
</ul>
</li>
</ul>
</li>
</ul>
<iframe width="100%" height="160" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A%2F%2Fsoundcloud.com%2Fxenyriki%2Fthe-pretty-reckless-under-the&auto_play=false&hide_related=true&show_comments=true&show_user=true&show_reposts=false&visual=true"></iframe>

      
    </div>

    <div class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Concepts/"> #Concepts </a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/03/13/2.12/">Basic Comparisons</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/02/27/1.3/">Shortest word in Dictionary</a>
            
          </div>
        </div>
      

      
      
    </div>
  </div>



    
      <div class="comments" id="comments">
        
          <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          </div>
        
      </div>
    
  </div>


        </div>
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table Of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <div class="site-overview">
        <div class="site-author motion-element">
          <img class="site-author-image" src="/images/default_avatar.jpg" alt="Cici Sun" />
          <p class="site-author-name">Cici Sun</p>
        </div>
        <p class="site-description motion-element"></p>
        <div class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">42</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">5</span>
              <span class="site-state-item-name">categories</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">21</span>
              <span class="site-state-item-name">tags</span>
              </a>
          </div>

        </div>

        
          <div class="feed-link motion-element">
            <a href="//atom.xml">
              <i class="menu-item-icon icon-feed"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
              <a href="https://github.com/CICISUN/" target="_blank">GitHub</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="https://twitter.com/insertsomthin" target="_blank">Twitter</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://www.weibo.com/bingjiesun" target="_blank">Weibo</a>
            </span>
            
          
        </div>

        
        

      </div>

      
        <div class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Java_Questions"><span class="nav-number">1.</span> <span class="nav-text">Java Questions</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Object_Oriented"><span class="nav-number">1.1.</span> <span class="nav-text">Object Oriented</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Java_Keywords"><span class="nav-number">1.2.</span> <span class="nav-text">Java Keywords</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Concepts"><span class="nav-number">1.3.</span> <span class="nav-text">Concepts</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OOP"><span class="nav-number">1.4.</span> <span class="nav-text">OOP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Collections"><span class="nav-number">1.5.</span> <span class="nav-text">Collections</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Threading"><span class="nav-number">1.6.</span> <span class="nav-text">Threading</span></a></li></ol></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </div>
      

    </div>
  </div>


    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp; 
  2015
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author">Cici Sun</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $('.content img').each(function () {
        var $image = $(this);
        var $imageWrapLink = $image.parent('a');

        if ($imageWrapLink.size() < 1) {
          $imageWrapLink = $image.wrap('<a href="' + this.getAttribute('src') + '"></a>').parent('a');
        }
        $imageWrapLink.addClass('fancybox');
      });
    });
    $('.fancybox').fancybox({
      helpers: {
        overlay: {
          locked: false
        }
      }
    });
  </script>


  <script type="text/javascript">
  function hasMobileUA () {
    var nav = window.navigator;
    var ua = nav.userAgent;
    var pa = /iPad|iPhone|Android|Opera Mini|BlackBerry|webOS|UCWEB|Blazer|PSP|IEMobile|Symbian/g;

    return pa.test(ua);
  }

  function isDesktop () {
    return screen.width > 991 && !hasMobileUA();
  }

  function isTablet () {
    return screen.width < 992 && screen.width > 767 && hasMobileUA();
  }

  function isMobile () {
    return screen.width < 767 && hasMobileUA();
  }

  function escapeSelector (selector) {
    return selector.replace(/[!"$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g, "\\$&")
  }
</script>

  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" id="motion.global">
  $(document).ready(function () {
    var body = $('body');
    var isSidebarVisible = false;
    var sidebarToggle = $('.sidebar-toggle');
    var sidebarToggleLine1st = $('.sidebar-toggle-line-first')
    var sidebarToggleLine2nd = $('.sidebar-toggle-line-middle');
    var sidebarToggleLine3rd = $('.sidebar-toggle-line-last');
    var sidebar = $('.sidebar');

    var SIDEBAR_WIDTH = '320px';
    var SIDEBAR_DISPLAY_DURATION = 300;

    var sidebarToogleLineStatusInit = {width: '100%', opacity: 1, left: 0, rotateZ: 0, top: 0};

    var sidebarToggleLine1stStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine1stStatusArrow = {width: '50%', rotateZ: '-45deg', top: '2px'};
    var sidebarToogleLine1stStatusClose = {width: '100%', rotateZ: '-45deg', top: '5px'};

    var sidebarToggleLine2ndStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine2ndStatusArrow = {width: '90%'};
    var sidebarToogleLine2ndStatusClose = {opacity: 0};

    var sidebarToggleLine3rdStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine3rdStatusArrow = {width: '50%', rotateZ: '45deg', top: '-2px'};
    var sidebarToogleLine3rdStatusClose = {width: '100%', rotateZ: '45deg', top: '-5px'};

    LogoAndMenuMotion();
    sidebatToggleMotion();
    postsListMotion();
    backToTopMotion();


    $(document)
      .on('sidebar.isShowing', function () {
        isDesktop() && body.velocity(
          {paddingRight: SIDEBAR_WIDTH},
          SIDEBAR_DISPLAY_DURATION
        );
        sidebarContentMotion();
      })
      .on('sidebar.isHiding', function () {});

    function LogoAndMenuMotion() {
      $.Velocity.RunSequence([
        { e: $('.brand'), p: { opacity: 1 }, o: { duration: 100 } },
        { e: $('.logo'), p: { opacity: 1, top: 0 }, o: { duration: 50} },
        
        { e: $('.logo-line-before i'), p: { translateX: "100%" }, o: { duration: 500, sequenceQueue: false } },
        { e: $('.logo-line-after i'), p: { translateX: "-100%" }, o: { duration: 500, sequenceQueue: false } },
        
        { e: $('.site-title'), p: { opacity: 1, top: 0 }, o: { duration: 200 } }
      ]);
      $('.menu-item').velocity('transition.slideDownIn', {display: null});
    }


    function backToTopMotion () {
      var b2top = $('.back-to-top');
      b2top.on('click', function () {
        body.velocity('scroll');
      });
    }

    function sidebarShowMotion () {

      sidebarToggleLine1st.velocity(sidebarToogleLine1stStatusClose);
      sidebarToggleLine2nd.velocity(sidebarToogleLine2ndStatusClose);
      sidebarToggleLine3rd.velocity(sidebarToogleLine3rdStatusClose);

      sidebar.velocity({width: SIDEBAR_WIDTH}, {
        display: 'block',
        duration: SIDEBAR_DISPLAY_DURATION,
        complete: function () {
          sidebar.addClass('sidebar-active');
          sidebar.trigger('sidebar.didShow');
        }
      });
      sidebar.trigger('sidebar.isShowing');
    }

    function sidebarHideMotion () {
      isDesktop() && body.velocity({paddingRight: 0});
      sidebar.velocity('reverse');

      sidebarToggleLine1st.velocity(sidebarToggleLine1stStatusInit);
      sidebarToggleLine2nd.velocity(sidebarToggleLine2ndStatusInit);
      sidebarToggleLine3rd.velocity(sidebarToggleLine3rdStatusInit);

      sidebar.removeClass('sidebar-active');
      sidebar.trigger('sidebar.isHiding');
    };

    function sidebarContentMotion () {
      $('.sidebar .motion-element').velocity(
        'transition.slideRightIn',
        {stagger: 50, drag: true}
      );
    }

    function postsListMotion () {
      var postMotionOptions = window.postMotionOptions || {stagger: 300, drag: true};
      $('.post').velocity('transition.slideDownIn', postMotionOptions);
    }

    function sidebatToggleMotion () {
      sidebarToggle.on('click', function () {
        isSidebarVisible ? sidebarHideMotion() : sidebarShowMotion();
        isSidebarVisible = !isSidebarVisible;
      });

      sidebarToggle.hover(function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusArrow);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusArrow);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusArrow);
      }, function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusInit);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusInit);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusInit);
      });
    }
  });

</script>





  
  
<script type="text/javascript" id="bootstrap.scrollspy.custom">
  /* ========================================================================
  * Bootstrap: scrollspy.js v3.3.2
  * http://getbootstrap.com/javascript/#scrollspy
  * ========================================================================
  * Copyright 2011-2015 Twitter, Inc.
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  * ======================================================================== */

  /**
   * Custom by iissnan
   *
   * - Add a `clear.bs.scrollspy` event.
   * - Esacpe targets selector.
   */


  +function ($) {
    'use strict';

    // SCROLLSPY CLASS DEFINITION
    // ==========================

    function ScrollSpy(element, options) {
      this.$body          = $(document.body)
      this.$scrollElement = $(element).is(document.body) ? $(window) : $(element)
      this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)
      this.selector       = (this.options.target || '') + ' .nav li > a'
      this.offsets        = []
      this.targets        = []
      this.activeTarget   = null
      this.scrollHeight   = 0

      this.$scrollElement.on('scroll.bs.scrollspy', $.proxy(this.process, this))
      this.refresh()
      this.process()
    }

    ScrollSpy.VERSION  = '3.3.2'

    ScrollSpy.DEFAULTS = {
      offset: 10
    }

    ScrollSpy.prototype.getScrollHeight = function () {
      return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
    }

    ScrollSpy.prototype.refresh = function () {
      var that          = this
      var offsetMethod  = 'offset'
      var offsetBase    = 0

      this.offsets      = []
      this.targets      = []
      this.scrollHeight = this.getScrollHeight()

      if (!$.isWindow(this.$scrollElement[0])) {
        offsetMethod = 'position'
        offsetBase   = this.$scrollElement.scrollTop()
      }

      this.$body
        .find(this.selector)
        .map(function () {
          var $el   = $(this)
          var href  = $el.data('target') || $el.attr('href')
          var $href = /^#./.test(href) && $(escapeSelector(href)) // Need to escape selector.

          return ($href
            && $href.length
            && $href.is(':visible')
            && [[$href[offsetMethod]().top + offsetBase, href]]) || null
        })
        .sort(function (a, b) { return a[0] - b[0] })
        .each(function () {
          that.offsets.push(this[0])
          that.targets.push(this[1])
        })


    }

    ScrollSpy.prototype.process = function () {
      var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset
      var scrollHeight = this.getScrollHeight()
      var maxScroll    = this.options.offset + scrollHeight - this.$scrollElement.height()
      var offsets      = this.offsets
      var targets      = this.targets
      var activeTarget = this.activeTarget
      var i

      if (this.scrollHeight != scrollHeight) {
        this.refresh()
      }

      if (scrollTop >= maxScroll) {
        return activeTarget != (i = targets[targets.length - 1]) && this.activate(i)
      }

      if (activeTarget && scrollTop < offsets[0]) {
        $(this.selector).trigger('clear.bs.scrollspy')  // Add a custom event.
        this.activeTarget = null
        return this.clear()
      }

      for (i = offsets.length; i--;) {
        activeTarget != targets[i]
          && scrollTop >= offsets[i]
          && (!offsets[i + 1] || scrollTop <= offsets[i + 1])
          && this.activate(targets[i])
      }
    }

    ScrollSpy.prototype.activate = function (target) {
      this.activeTarget = target

      this.clear()

      var selector = this.selector +
        '[data-target="' + target + '"],' +
        this.selector + '[href="' + target + '"]'

      var active = $(selector)
        .parents('li')
        .addClass('active')

      if (active.parent('.dropdown-menu').length) {
        active = active
          .closest('li.dropdown')
          .addClass('active')
      }

      active.trigger('activate.bs.scrollspy')
    }

    ScrollSpy.prototype.clear = function () {
      $(this.selector)
        .parentsUntil(this.options.target, '.active')
        .removeClass('active')
    }


    // SCROLLSPY PLUGIN DEFINITION
    // ===========================

    function Plugin(option) {
      return this.each(function () {
        var $this   = $(this)
        var data    = $this.data('bs.scrollspy')
        var options = typeof option == 'object' && option

        if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))
        if (typeof option == 'string') data[option]()
      })
    }

    var old = $.fn.scrollspy

    $.fn.scrollspy             = Plugin
    $.fn.scrollspy.Constructor = ScrollSpy


    // SCROLLSPY NO CONFLICT
    // =====================

    $.fn.scrollspy.noConflict = function () {
      $.fn.scrollspy = old
      return this
    }


    // SCROLLSPY DATA-API
    // ==================

    $(window).on('load.bs.scrollspy.data-api', function () {
      $('[data-spy="scroll"]').each(function () {
        var $spy = $(this)
        Plugin.call($spy, $spy.data())
      })
    })

  }(jQuery);
</script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var $sidebarInner = $('.sidebar-inner');
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.didShow', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;
          var self = this;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      $(indicator).velocity('stop').velocity({
        opacity: action === 'show' ? 0.4 : 0
      }, { duration: 100 });
    }

  });
</script>


  <script type="text/javascript" id="sidebar.nav">
    $(document).ready(function () {
      var html = $('html');

      $('.sidebar-nav li').on('click', function () {
        var item = $(this);
        var activeTabClassName = 'sidebar-nav-active';
        var activePanelClassName = 'sidebar-panel-active';
        if (item.hasClass(activeTabClassName)) {
          return;
        }

        var currentTarget = $('.' + activePanelClassName);
        var target = $('.' + item.data('target'));

        currentTarget.velocity('transition.slideUpOut', 200, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', 200)
            .addClass(activePanelClassName);
        });

        item.siblings().removeClass(activeTabClassName);
        item.addClass(activeTabClassName);
      });

      $('.post-toc a').on('click', function (e) {
        e.preventDefault();
        var offset = $(escapeSelector(this.getAttribute('href'))).offset().top;
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        });
      });

      // Expand sidebar on post detail page by default, when post has a toc.
      var $tocContent = $('.post-toc-content');
      if ($tocContent.length > 0 && $tocContent.html().trim().length > 0 && isDesktop()) {
        setTimeout(function () {
          $('.sidebar-toggle').trigger('click');
        }, 800);
      }
    });
  </script>




  

  
  
  

  

    
      
    

    <script type="text/javascript">
      var disqus_shortname = 'sunbingjie';
      var disqus_identifier = '2015/03/13/2.12-3/';
      var disqus_url = 'http://sunbingjie.tk/2015/03/13/2.12-3/';

      (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }());
    </script>
  




  
</body>
</html>
