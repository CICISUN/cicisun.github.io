<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>




  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.2"/>




  <meta name="keywords" content="Math,String,Bit Manipulation," />



  <link rel="alternate" href="//atom.xml" title="Cici's Blog" type="application/atom+xml" />



  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.2" />




  <title> Excel Sheet Column Title, Excel Sheet Column Number, Number of Digit One, Count Primes, Perfect Squares, Ugly Number, Ugly Number II, Power of Two, Add Digits, Happy Number, Missing Number // Cici's Blog </title>
</head>

<body>
  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">Cici's Blog</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>


  <ul id="menu" class="menu">
     
    
      
      <li class="menu-item menu-item-home">
        <a href="/">
          <i class="menu-item-icon icon-home"></i> <br />
          Home
        </a>
      </li>
    
      
      <li class="menu-item menu-item-categories">
        <a href="/categories">
          <i class="menu-item-icon icon-categories"></i> <br />
          Categories
        </a>
      </li>
    
      
      <li class="menu-item menu-item-archives">
        <a href="/archives">
          <i class="menu-item-icon icon-archives"></i> <br />
          Archives
        </a>
      </li>
    
      
      <li class="menu-item menu-item-tags">
        <a href="/tags">
          <i class="menu-item-icon icon-tags"></i> <br />
          Tags
        </a>
      </li>
    
      
      <li class="menu-item menu-item-about">
        <a href="/about">
          <i class="menu-item-icon icon-about"></i> <br />
          About
        </a>
      </li>
    
  </ul>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              Excel Sheet Column Title, Excel Sheet Column Number, Number of Digit One, Count Primes, Perfect Squares, Ugly Number, Ugly Number II, Power of Two, Add Digits, Happy Number, Missing Number
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on 2015-10-15
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; In
            
              <a href="/categories/刷题/">刷题</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/10/15/10.2/#comments" >
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/15/10.2/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        <h2 id="Excel_Sheet_Column_Title">Excel Sheet Column Title</h2>
<blockquote>
<p>Given a positive integer, return its corresponding column title as appear in an Excel sheet.<br>For example:<br>    1 -&gt; A<br>    2 -&gt; B<br>    3 -&gt; C<br>    …<br>    26 -&gt; Z<br>    27 -&gt; AA<br>    28 -&gt; AB </p>
</blockquote>
<a id="more"></a>
<h3 id="Solution">Solution</h3>
<ul>
<li>n— mod 26 gives the current last digit value</li>
<li>n— / 26 gives the number for substring(0,len-1)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> String <span class="title">convertToTitle</span>(<span class="keyword">int</span> n) {</div><div class="line">    String res=<span class="string">""</span>;</div><div class="line">    <span class="keyword">while</span>(n!=<span class="number">0</span>){</div><div class="line">        n--;</div><div class="line">        res=(<span class="keyword">char</span>)(<span class="string">'A'</span>+n%<span class="number">26</span>)+res;</div><div class="line">        n/=<span class="number">26</span>;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Excel_Sheet_Column_Number">Excel Sheet Column Number</h2>
<blockquote>
<p>Related to question Excel Sheet Column Title<br>Given a column title as appear in an Excel sheet, return its corresponding column number.<br>For example:</p>
</blockquote>
<pre><code><span class="input"><span class="prompt">A -&gt;</span> <span class="number">1</span></span>
<span class="input"><span class="prompt">B -&gt;</span> <span class="number">2</span></span>
<span class="input"><span class="prompt">C -&gt;</span> <span class="number">3</span></span>
<span class="input"><span class="prompt">...
Z -&gt;</span> <span class="number">26</span></span>
<span class="input"><span class="prompt">AA -&gt;</span> <span class="number">27</span></span>
<span class="input"><span class="prompt">AB -&gt;</span> <span class="number">28</span> </span>
</code></pre><h3 id="Solution-1">Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">titleToNumber</span>(String s) {</div><div class="line">    <span class="keyword">int</span> n=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;s.length();i++){</div><div class="line">        n=n*<span class="number">26</span> + s.charAt(i)-<span class="string">'A'</span> + <span class="number">1</span>;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> n;</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Number_of_Digit_One">Number of Digit One</h2>
<blockquote>
<p>Given an integer n, count the total number of digit 1 appearing in all non-negative integers less than or equal to n.<br>For example:<br>Given n = 13,<br>Return 6, because digit 1 occurred in the following numbers: 1, 10, 11, 12, 13.</p>
</blockquote>
<h3 id="Naive_Solution">Naive Solution</h3>
<p>LTE</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countDigitOne</span>(<span class="keyword">int</span> n) {</div><div class="line">    <span class="keyword">int</span> totalcount=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</div><div class="line">        <span class="keyword">int</span> cur=i;</div><div class="line">        <span class="keyword">while</span>(cur&gt;<span class="number">0</span>){</div><div class="line">            <span class="keyword">if</span>(cur%<span class="number">10</span>==<span class="number">1</span>) totalcount++;</div><div class="line">            cur/=<span class="number">10</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> totalcount;</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="Mathy_Solution">Mathy Solution</h3>
<ul>
<li>Observation: looking at each digit, 1 appears 1 time on digit 1, 10 times on digit 2, 100 times on digit 3…</li>
<li>Three cases when counting 1 on digit 3 : for 1131, 11-31 we have 1<em>100+31+1;for 1231, 12-31 we have (1+1)</em>100; for 1031, 10-31 we have 1*100</li>
</ul>
<figure class="highlight `java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countDigitOne</span>(<span class="keyword">int</span> n) {</div><div class="line">    <span class="keyword">int</span> totalcount=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">long</span> i=<span class="number">1</span>;i&lt;=n;i*=<span class="number">10</span>){</div><div class="line">        <span class="keyword">long</span> left=n/i; <span class="keyword">long</span> right=n%i;</div><div class="line">        totalcount+= (left+<span class="number">8</span>)/<span class="number">10</span> * i;</div><div class="line">        <span class="keyword">if</span>(left%<span class="number">10</span>==<span class="number">1</span>) totalcount+=right+<span class="number">1</span>;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> totalcount;</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Count_Primes">Count Primes</h2>
<blockquote>
<p>Description: Count the number of prime numbers less than a non-negative number, n.</p>
</blockquote>
<h3 id="Naive_Solution-1">Naive Solution</h3>
<p>LTE</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countPrimes</span>(<span class="keyword">int</span> n) {</div><div class="line">    <span class="keyword">int</span> count=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;n;i++){</div><div class="line">        <span class="keyword">if</span>(checkprime(i)) count++;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> count;</div><div class="line">}</div><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">checkprime</span>(<span class="keyword">int</span> x){</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;x;i++){</div><div class="line">        <span class="keyword">if</span>(x%i==<span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="DP_solution">DP solution</h3>
<ul>
<li>record dp[i<em>j] as not prime for each i and i</em>j pair less than n </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countPrimes</span>(<span class="keyword">int</span> n) {</div><div class="line">    <span class="keyword">int</span> count=<span class="number">0</span>;</div><div class="line">    <span class="keyword">boolean</span>[] notPrime = <span class="keyword">new</span> <span class="keyword">boolean</span>[n];</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;n;i++){</div><div class="line">        <span class="keyword">if</span>(!notPrime[i]) count++;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>; i*j&lt;n; j++){</div><div class="line">            notPrime[i*j] = <span class="keyword">true</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> count;</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Perfect_Square">Perfect Square</h2>
<blockquote>
<p>Given a positive integer n, find the least number of perfect square numbers (for example, 1, 4, 9, 16, …) which sum to n.<br>For example, given n = 12, return 3 because 12 = 4 + 4 + 4; given n = 13, return 2 because 13 = 4 + 9.</p>
</blockquote>
<h3 id="DFS_Solution">DFS Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numSquares</span>(<span class="keyword">int</span> n) {</div><div class="line">    <span class="keyword">int</span> uppernum = (<span class="keyword">int</span>)Math.sqrt(n) + <span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span>[] minlen= {Integer.MAX_VALUE};</div><div class="line">    dfs(n, uppernum, <span class="number">1</span>, <span class="keyword">new</span> ArrayList&lt;Integer&gt;(),minlen,<span class="number">0</span>);</div><div class="line">    <span class="keyword">return</span> minlen[<span class="number">0</span>];</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dfs</span>(<span class="keyword">int</span> n, <span class="keyword">int</span> uppernum, <span class="keyword">int</span> start, ArrayList&lt;Integer&gt; list, <span class="keyword">int</span>[] minlen, <span class="keyword">int</span> cursum){</div><div class="line">    <span class="keyword">if</span>(list.size()&gt;=minlen[<span class="number">0</span>] || cursum&gt;n){</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    }</div><div class="line">    <span class="keyword">if</span>(cursum==n){</div><div class="line">        minlen[<span class="number">0</span>]=Math.min(minlen[<span class="number">0</span>], list.size());</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    }</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=start; i&lt;=uppernum; i++){</div><div class="line">        list.add(i);</div><div class="line">        dfs(n, uppernum, i, list, minlen, cursum+i*i);</div><div class="line">        list.remove(list.size()-<span class="number">1</span>);</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="DP_Solution">DP Solution</h3>
<ul>
<li>dp[i] records the least number of squares used to sum to i</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numSquares</span>(<span class="keyword">int</span> n) {</div><div class="line">    <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[n+<span class="number">1</span>];</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt; dp.length; i++){</div><div class="line">        dp[i]=Integer.MAX_VALUE;</div><div class="line">    }</div><div class="line">    dp[<span class="number">0</span>]=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=n; i++){</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; (i+j*j) &lt;= n ; j++){</div><div class="line">            dp[i+j*j] = Math.min(dp[i]+<span class="number">1</span>, dp[i+j*j]);</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> dp[n];</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Ugly_Number">Ugly Number</h2>
<blockquote>
<p>Write a program to check whether a given number is an ugly number.<br>Ugly numbers are positive numbers whose prime factors only include 2, 3, 5. For example, 6, 8 are ugly while 14 is not ugly since it includes another prime factor 7.<br>Note that 1 is typically treated as an ugly number.</p>
</blockquote>
<h3 id="Naive_Solution-1">Naive Solution</h3>
<p>LTE</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isUgly</span>(<span class="keyword">int</span> num) {</div><div class="line">    <span class="keyword">if</span>(num==<span class="number">1</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    <span class="keyword">long</span> n = Math.abs(num);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;n; i++){</div><div class="line">        <span class="keyword">if</span>(n%i==<span class="number">0</span> && i!=<span class="number">2</span> && i!=<span class="number">3</span> && i!=<span class="number">5</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="DP_Solution-1">DP Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isUgly</span>(<span class="keyword">int</span> num) {</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;<span class="number">6</span> &&num&gt;<span class="number">0</span>; i++){</div><div class="line">        <span class="keyword">while</span>(num%i==<span class="number">0</span>){</div><div class="line">            num/=i;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> num==<span class="number">1</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Ugly_Number_II">Ugly Number II</h2>
<blockquote>
<p>Write a program to find the n-th ugly number.<br>Ugly numbers are positive numbers whose prime factors only include 2, 3, 5. For example, 1, 2, 3, 4, 5, 6, 8, 9, 10, 12 is the sequence of the first 10 ugly numbers.<br>Note that 1 is typically treated as an ugly number.<br>Hint:<br>The naive approach is to call isUgly for every number until you reach the nth one. Most numbers are not ugly. Try to focus your effort on generating only the ugly ones.<br>An ugly number must be multiplied by either 2, 3, or 5 from a smaller ugly number.<br>The key is how to maintain the order of the ugly numbers. Try a similar approach of merging from three sorted lists: L1, L2, and L3.<br>Assume you have Uk, the kth ugly number. Then Uk+1 must be Min(L1 <em> 2, L2 </em> 3, L3 * 5).</p>
</blockquote>
<h3 id="Solution-2">Solution</h3>
<ul>
<li>//(1) 1×2, 2×2, 3×2, 4×2, 5×2, …</li>
<li>//(2) 1×3, 2×3, 3×3, 4×3, 5×3, …</li>
<li>//(3) 1×5, 2×5, 3×5, 4×5, 5×5, …</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">nthUglyNumber</span>(<span class="keyword">int</span> n) {</div><div class="line">        <span class="keyword">int</span> a=<span class="number">2</span>, b=<span class="number">3</span>, c=<span class="number">5</span>;</div><div class="line">        <span class="keyword">int</span> pa=<span class="number">0</span>, pb=<span class="number">0</span>, pc=<span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span>[] dp=<span class="keyword">new</span> <span class="keyword">int</span>[n];</div><div class="line">        dp[<span class="number">0</span>]=<span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;n; i++){</div><div class="line">            dp[i]=Math.min(Math.min(a,b),c);</div><div class="line">            <span class="keyword">if</span>(dp[i]==a){</div><div class="line">                pa++;</div><div class="line">                a=<span class="number">2</span>*dp[pa];</div><div class="line">            }</div><div class="line">            <span class="keyword">if</span>(dp[i]==b){</div><div class="line">                pb++;</div><div class="line">                b=<span class="number">3</span>*dp[pb];</div><div class="line">            }</div><div class="line">            <span class="keyword">if</span>(dp[i]==c){</div><div class="line">                pc++;</div><div class="line">                c=<span class="number">5</span>*dp[pc];</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> dp[n-<span class="number">1</span>];</div><div class="line">    }</div></pre></td></tr></table></figure>

<hr>
<h2 id="Power_of_Two">Power of Two</h2>
<blockquote>
<p>Given an integer, write a function to determine if it is a power of two.</p>
</blockquote>
<h3 id="Solution-3">Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPowerOfTwo</span>(<span class="keyword">int</span> n) {</div><div class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    <span class="keyword">while</span>(n&gt;<span class="number">1</span>){</div><div class="line">        <span class="keyword">if</span>(n%<span class="number">2</span>!=<span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        n/=<span class="number">2</span>;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> n==<span class="number">1</span>;</div><div class="line">}</div></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPowerOfTwo</span>(<span class="keyword">int</span> n) {</div><div class="line">    <span class="keyword">return</span> (n&gt;<span class="number">0</span>) &&  (n & (n-<span class="number">1</span>))==<span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Add_Digits">Add Digits</h2>
<blockquote>
<p>Given a non-negative integer num, repeatedly add all its digits until the result has only one digit.<br>For example:<br>Given num = 38, the process is like: 3 + 8 = 11, 1 + 1 = 2. Since 2 has only one digit, return it.<br>Follow up:<br>Could you do it without any loop/recursion in O(1) runtime?<br>Hint:<br>A naive implementation of the above process is trivial. Could you come up with other methods?<br>What are all the possible results?<br>How do they occur, periodically or randomly?<br>You may find this Wikipedia article useful.</p>
</blockquote>
<h3 id="Solution-4">Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">addDigits</span>(<span class="keyword">int</span> num) {</div><div class="line">    <span class="keyword">if</span>(num/<span class="number">10</span>==<span class="number">0</span>) <span class="keyword">return</span> num;</div><div class="line">    <span class="keyword">int</span> cur=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>(num&gt;<span class="number">0</span>){</div><div class="line">        cur+=num%<span class="number">10</span>;</div><div class="line">        num/=<span class="number">10</span>;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> addDigits(cur);</div><div class="line">}</div></pre></td></tr></table></figure>

<p>Or make the following observation:<br>Supposed the digit is 534 , it equals (5x100 + 3x 10 +4) ,when it % 9 ,that is (5x100 + 3x 10 +4) %9 = ( (5x100 ）%9+ (3x10)%9 +4%9)%9 = (5+3+4)%9 = (12)%9 = (1x10+2)%9 = (1+2)%9 = 3<br>Or…<br>in  out  in  out<br>0   0    10  1<br>1   1    11  2<br>2   2    12  3<br>3   3    13  4<br>4   4    14  5<br>5   5    15  6<br>6   6    16  7<br>7   7    17  8<br>8   8    18  9<br>9   9    19  1<br>根据上面的列举，我们可以得出规律，每9个一循环，所有大于9的数的树根都是对9取余，那么小于等于9的数对9取余就是0了，为了得到其本身，而且同样也要对大于9的数适用，我们就用(n-1)%9+1这个表达式来包括所有的情况…<br>out = (num - 1) % 9 + 1</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">addDigits</span>(<span class="keyword">int</span> num) {</div><div class="line">    <span class="keyword">return</span> num&gt;<span class="number">0</span> ? (num%<span class="number">9</span>==<span class="number">0</span> ? <span class="number">9</span> : num%<span class="number">9</span>) : <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Happy_Number">Happy Number</h2>
<blockquote>
<p>Write an algorithm to determine if a number is “happy”.<br>A happy number is a number defined by the following process: Starting with any positive integer, replace the number by the sum of the squares of its digits, and repeat the process until the number equals 1 (where it will stay), or it loops endlessly in a cycle which does not include 1. Those numbers for which this process ends in 1 are happy numbers.<br>Example: 19 is a happy number<br>12 + 92 = 82<br>82 + 22 = 68<br>62 + 82 = 100<br>12 + 02 + 02 = 1</p>
</blockquote>
<h3 id="Solution-5">Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isHappy</span>(<span class="keyword">int</span> n) {</div><div class="line">    HashSet&lt;Integer&gt; hs = <span class="keyword">new</span> HashSet&lt;Integer&gt;();</div><div class="line">    <span class="keyword">while</span>(hs.add(n)){</div><div class="line">        <span class="keyword">int</span> cur = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>(n&gt;<span class="number">0</span>){</div><div class="line">            cur+= Math.pow(n%<span class="number">10</span>, <span class="number">2</span>);</div><div class="line">            n/=<span class="number">10</span>;</div><div class="line">        }</div><div class="line">        <span class="keyword">if</span>(cur==<span class="number">1</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        n=cur;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Missing_Number">Missing Number</h2>
<blockquote>
<p>Given an array containing n distinct numbers taken from 0, 1, 2, …, n, find the one that is missing from the array.<br>For example,<br>Given nums = [0, 1, 3] return 2.<br>Note:<br>Your algorithm should run in linear runtime complexity. Could you implement it using only constant extra space complexity?</p>
</blockquote>
<h3 id="Solution-6">Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">missingNumber</span>(<span class="keyword">int</span>[] nums) {</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;nums.length; i++){</div><div class="line">        <span class="keyword">if</span>(i!=nums[i] && nums[i]&lt;nums.length){</div><div class="line">            <span class="keyword">int</span> tmp=nums[nums[i]];</div><div class="line">            nums[nums[i]] = nums[i];</div><div class="line">            nums[i] = tmp;</div><div class="line">            i--;</div><div class="line">        }</div><div class="line">    }   </div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;nums.length; i++){</div><div class="line">        <span class="keyword">if</span>(i!=nums[i]) <span class="keyword">return</span> i;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> nums.length;</div><div class="line">}</div></pre></td></tr></table></figure>


      
    </div>

    <div class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Math/"> #Math </a>
          
            <a href="/tags/String/"> #String </a>
          
            <a href="/tags/Bit-Manipulation/"> #Bit Manipulation </a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/10/13/8.24/">Divide Two Integers, Fraction to Recurring Decimal</a>
            
          </div>
        </div>
      

      
      
    </div>
  </div>



    
      <div class="comments" id="comments">
        
          <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          </div>
        
      </div>
    
  </div>


        </div>
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table Of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <div class="site-overview">
        <div class="site-author motion-element">
          <img class="site-author-image" src="/images/default_avatar.jpg" alt="Cici Sun" />
          <p class="site-author-name">Cici Sun</p>
        </div>
        <p class="site-description motion-element"></p>
        <div class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">60</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">5</span>
              <span class="site-state-item-name">categories</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">26</span>
              <span class="site-state-item-name">tags</span>
              </a>
          </div>

        </div>

        
          <div class="feed-link motion-element">
            <a href="//atom.xml">
              <i class="menu-item-icon icon-feed"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
              <a href="https://github.com/CICISUN/" target="_blank">GitHub</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="https://twitter.com/insertsomthin" target="_blank">Twitter</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://www.weibo.com/bingjiesun" target="_blank">Weibo</a>
            </span>
            
          
        </div>

        
        

      </div>

      
        <div class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Excel_Sheet_Column_Title"><span class="nav-number">1.</span> <span class="nav-text">Excel Sheet Column Title</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution"><span class="nav-number">1.1.</span> <span class="nav-text">Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Excel_Sheet_Column_Number"><span class="nav-number">2.</span> <span class="nav-text">Excel Sheet Column Number</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution-1"><span class="nav-number">2.1.</span> <span class="nav-text">Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Number_of_Digit_One"><span class="nav-number">3.</span> <span class="nav-text">Number of Digit One</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Naive_Solution"><span class="nav-number">3.1.</span> <span class="nav-text">Naive Solution</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Mathy_Solution"><span class="nav-number">3.2.</span> <span class="nav-text">Mathy Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Count_Primes"><span class="nav-number">4.</span> <span class="nav-text">Count Primes</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Naive_Solution-1"><span class="nav-number">4.1.</span> <span class="nav-text">Naive Solution</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DP_solution"><span class="nav-number">4.2.</span> <span class="nav-text">DP solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Perfect_Square"><span class="nav-number">5.</span> <span class="nav-text">Perfect Square</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#DFS_Solution"><span class="nav-number">5.1.</span> <span class="nav-text">DFS Solution</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DP_Solution"><span class="nav-number">5.2.</span> <span class="nav-text">DP Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ugly_Number"><span class="nav-number">6.</span> <span class="nav-text">Ugly Number</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Naive_Solution-1"><span class="nav-number">6.1.</span> <span class="nav-text">Naive Solution</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DP_Solution-1"><span class="nav-number">6.2.</span> <span class="nav-text">DP Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ugly_Number_II"><span class="nav-number">7.</span> <span class="nav-text">Ugly Number II</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution-2"><span class="nav-number">7.1.</span> <span class="nav-text">Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Power_of_Two"><span class="nav-number">8.</span> <span class="nav-text">Power of Two</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution-3"><span class="nav-number">8.1.</span> <span class="nav-text">Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Add_Digits"><span class="nav-number">9.</span> <span class="nav-text">Add Digits</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution-4"><span class="nav-number">9.1.</span> <span class="nav-text">Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Happy_Number"><span class="nav-number">10.</span> <span class="nav-text">Happy Number</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution-5"><span class="nav-number">10.1.</span> <span class="nav-text">Solution</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Missing_Number"><span class="nav-number">11.</span> <span class="nav-text">Missing Number</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution-6"><span class="nav-number">11.1.</span> <span class="nav-text">Solution</span></a></li></ol></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </div>
      

    </div>
  </div>


    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp; 
  2015
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author">Cici Sun</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $('.content img').each(function () {
        var $image = $(this);
        var $imageWrapLink = $image.parent('a');

        if ($imageWrapLink.size() < 1) {
          $imageWrapLink = $image.wrap('<a href="' + this.getAttribute('src') + '"></a>').parent('a');
        }
        $imageWrapLink.addClass('fancybox');
      });
    });
    $('.fancybox').fancybox({
      helpers: {
        overlay: {
          locked: false
        }
      }
    });
  </script>


  <script type="text/javascript">
  function hasMobileUA () {
    var nav = window.navigator;
    var ua = nav.userAgent;
    var pa = /iPad|iPhone|Android|Opera Mini|BlackBerry|webOS|UCWEB|Blazer|PSP|IEMobile|Symbian/g;

    return pa.test(ua);
  }

  function isDesktop () {
    return screen.width > 991 && !hasMobileUA();
  }

  function isTablet () {
    return screen.width < 992 && screen.width > 767 && hasMobileUA();
  }

  function isMobile () {
    return screen.width < 767 && hasMobileUA();
  }

  function escapeSelector (selector) {
    return selector.replace(/[!"$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g, "\\$&")
  }
</script>

  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" id="motion.global">
  $(document).ready(function () {
    var body = $('body');
    var isSidebarVisible = false;
    var sidebarToggle = $('.sidebar-toggle');
    var sidebarToggleLine1st = $('.sidebar-toggle-line-first')
    var sidebarToggleLine2nd = $('.sidebar-toggle-line-middle');
    var sidebarToggleLine3rd = $('.sidebar-toggle-line-last');
    var sidebar = $('.sidebar');

    var SIDEBAR_WIDTH = '320px';
    var SIDEBAR_DISPLAY_DURATION = 300;

    var sidebarToogleLineStatusInit = {width: '100%', opacity: 1, left: 0, rotateZ: 0, top: 0};

    var sidebarToggleLine1stStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine1stStatusArrow = {width: '50%', rotateZ: '-45deg', top: '2px'};
    var sidebarToogleLine1stStatusClose = {width: '100%', rotateZ: '-45deg', top: '5px'};

    var sidebarToggleLine2ndStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine2ndStatusArrow = {width: '90%'};
    var sidebarToogleLine2ndStatusClose = {opacity: 0};

    var sidebarToggleLine3rdStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine3rdStatusArrow = {width: '50%', rotateZ: '45deg', top: '-2px'};
    var sidebarToogleLine3rdStatusClose = {width: '100%', rotateZ: '45deg', top: '-5px'};

    LogoAndMenuMotion();
    sidebatToggleMotion();
    postsListMotion();
    backToTopMotion();


    $(document)
      .on('sidebar.isShowing', function () {
        isDesktop() && body.velocity(
          {paddingRight: SIDEBAR_WIDTH},
          SIDEBAR_DISPLAY_DURATION
        );
        sidebarContentMotion();
      })
      .on('sidebar.isHiding', function () {});

    function LogoAndMenuMotion() {
      $.Velocity.RunSequence([
        { e: $('.brand'), p: { opacity: 1 }, o: { duration: 100 } },
        { e: $('.logo'), p: { opacity: 1, top: 0 }, o: { duration: 50} },
        
        { e: $('.logo-line-before i'), p: { translateX: "100%" }, o: { duration: 500, sequenceQueue: false } },
        { e: $('.logo-line-after i'), p: { translateX: "-100%" }, o: { duration: 500, sequenceQueue: false } },
        
        { e: $('.site-title'), p: { opacity: 1, top: 0 }, o: { duration: 200 } }
      ]);
      $('.menu-item').velocity('transition.slideDownIn', {display: null});
    }


    function backToTopMotion () {
      var b2top = $('.back-to-top');
      b2top.on('click', function () {
        body.velocity('scroll');
      });
    }

    function sidebarShowMotion () {

      sidebarToggleLine1st.velocity(sidebarToogleLine1stStatusClose);
      sidebarToggleLine2nd.velocity(sidebarToogleLine2ndStatusClose);
      sidebarToggleLine3rd.velocity(sidebarToogleLine3rdStatusClose);

      sidebar.velocity({width: SIDEBAR_WIDTH}, {
        display: 'block',
        duration: SIDEBAR_DISPLAY_DURATION,
        complete: function () {
          sidebar.addClass('sidebar-active');
          sidebar.trigger('sidebar.didShow');
        }
      });
      sidebar.trigger('sidebar.isShowing');
    }

    function sidebarHideMotion () {
      isDesktop() && body.velocity({paddingRight: 0});
      sidebar.velocity('reverse');

      sidebarToggleLine1st.velocity(sidebarToggleLine1stStatusInit);
      sidebarToggleLine2nd.velocity(sidebarToggleLine2ndStatusInit);
      sidebarToggleLine3rd.velocity(sidebarToggleLine3rdStatusInit);

      sidebar.removeClass('sidebar-active');
      sidebar.trigger('sidebar.isHiding');
    };

    function sidebarContentMotion () {
      $('.sidebar .motion-element').velocity(
        'transition.slideRightIn',
        {stagger: 50, drag: true}
      );
    }

    function postsListMotion () {
      var postMotionOptions = window.postMotionOptions || {stagger: 300, drag: true};
      $('.post').velocity('transition.slideDownIn', postMotionOptions);
    }

    function sidebatToggleMotion () {
      sidebarToggle.on('click', function () {
        isSidebarVisible ? sidebarHideMotion() : sidebarShowMotion();
        isSidebarVisible = !isSidebarVisible;
      });

      sidebarToggle.hover(function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusArrow);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusArrow);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusArrow);
      }, function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusInit);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusInit);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusInit);
      });
    }
  });

</script>





  
  
<script type="text/javascript" id="bootstrap.scrollspy.custom">
  /* ========================================================================
  * Bootstrap: scrollspy.js v3.3.2
  * http://getbootstrap.com/javascript/#scrollspy
  * ========================================================================
  * Copyright 2011-2015 Twitter, Inc.
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  * ======================================================================== */

  /**
   * Custom by iissnan
   *
   * - Add a `clear.bs.scrollspy` event.
   * - Esacpe targets selector.
   */


  +function ($) {
    'use strict';

    // SCROLLSPY CLASS DEFINITION
    // ==========================

    function ScrollSpy(element, options) {
      this.$body          = $(document.body)
      this.$scrollElement = $(element).is(document.body) ? $(window) : $(element)
      this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)
      this.selector       = (this.options.target || '') + ' .nav li > a'
      this.offsets        = []
      this.targets        = []
      this.activeTarget   = null
      this.scrollHeight   = 0

      this.$scrollElement.on('scroll.bs.scrollspy', $.proxy(this.process, this))
      this.refresh()
      this.process()
    }

    ScrollSpy.VERSION  = '3.3.2'

    ScrollSpy.DEFAULTS = {
      offset: 10
    }

    ScrollSpy.prototype.getScrollHeight = function () {
      return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
    }

    ScrollSpy.prototype.refresh = function () {
      var that          = this
      var offsetMethod  = 'offset'
      var offsetBase    = 0

      this.offsets      = []
      this.targets      = []
      this.scrollHeight = this.getScrollHeight()

      if (!$.isWindow(this.$scrollElement[0])) {
        offsetMethod = 'position'
        offsetBase   = this.$scrollElement.scrollTop()
      }

      this.$body
        .find(this.selector)
        .map(function () {
          var $el   = $(this)
          var href  = $el.data('target') || $el.attr('href')
          var $href = /^#./.test(href) && $(escapeSelector(href)) // Need to escape selector.

          return ($href
            && $href.length
            && $href.is(':visible')
            && [[$href[offsetMethod]().top + offsetBase, href]]) || null
        })
        .sort(function (a, b) { return a[0] - b[0] })
        .each(function () {
          that.offsets.push(this[0])
          that.targets.push(this[1])
        })


    }

    ScrollSpy.prototype.process = function () {
      var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset
      var scrollHeight = this.getScrollHeight()
      var maxScroll    = this.options.offset + scrollHeight - this.$scrollElement.height()
      var offsets      = this.offsets
      var targets      = this.targets
      var activeTarget = this.activeTarget
      var i

      if (this.scrollHeight != scrollHeight) {
        this.refresh()
      }

      if (scrollTop >= maxScroll) {
        return activeTarget != (i = targets[targets.length - 1]) && this.activate(i)
      }

      if (activeTarget && scrollTop < offsets[0]) {
        $(this.selector).trigger('clear.bs.scrollspy')  // Add a custom event.
        this.activeTarget = null
        return this.clear()
      }

      for (i = offsets.length; i--;) {
        activeTarget != targets[i]
          && scrollTop >= offsets[i]
          && (!offsets[i + 1] || scrollTop <= offsets[i + 1])
          && this.activate(targets[i])
      }
    }

    ScrollSpy.prototype.activate = function (target) {
      this.activeTarget = target

      this.clear()

      var selector = this.selector +
        '[data-target="' + target + '"],' +
        this.selector + '[href="' + target + '"]'

      var active = $(selector)
        .parents('li')
        .addClass('active')

      if (active.parent('.dropdown-menu').length) {
        active = active
          .closest('li.dropdown')
          .addClass('active')
      }

      active.trigger('activate.bs.scrollspy')
    }

    ScrollSpy.prototype.clear = function () {
      $(this.selector)
        .parentsUntil(this.options.target, '.active')
        .removeClass('active')
    }


    // SCROLLSPY PLUGIN DEFINITION
    // ===========================

    function Plugin(option) {
      return this.each(function () {
        var $this   = $(this)
        var data    = $this.data('bs.scrollspy')
        var options = typeof option == 'object' && option

        if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))
        if (typeof option == 'string') data[option]()
      })
    }

    var old = $.fn.scrollspy

    $.fn.scrollspy             = Plugin
    $.fn.scrollspy.Constructor = ScrollSpy


    // SCROLLSPY NO CONFLICT
    // =====================

    $.fn.scrollspy.noConflict = function () {
      $.fn.scrollspy = old
      return this
    }


    // SCROLLSPY DATA-API
    // ==================

    $(window).on('load.bs.scrollspy.data-api', function () {
      $('[data-spy="scroll"]').each(function () {
        var $spy = $(this)
        Plugin.call($spy, $spy.data())
      })
    })

  }(jQuery);
</script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var $sidebarInner = $('.sidebar-inner');
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.didShow', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;
          var self = this;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      $(indicator).velocity('stop').velocity({
        opacity: action === 'show' ? 0.4 : 0
      }, { duration: 100 });
    }

  });
</script>


  <script type="text/javascript" id="sidebar.nav">
    $(document).ready(function () {
      var html = $('html');

      $('.sidebar-nav li').on('click', function () {
        var item = $(this);
        var activeTabClassName = 'sidebar-nav-active';
        var activePanelClassName = 'sidebar-panel-active';
        if (item.hasClass(activeTabClassName)) {
          return;
        }

        var currentTarget = $('.' + activePanelClassName);
        var target = $('.' + item.data('target'));

        currentTarget.velocity('transition.slideUpOut', 200, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', 200)
            .addClass(activePanelClassName);
        });

        item.siblings().removeClass(activeTabClassName);
        item.addClass(activeTabClassName);
      });

      $('.post-toc a').on('click', function (e) {
        e.preventDefault();
        var offset = $(escapeSelector(this.getAttribute('href'))).offset().top;
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        });
      });

      // Expand sidebar on post detail page by default, when post has a toc.
      var $tocContent = $('.post-toc-content');
      if ($tocContent.length > 0 && $tocContent.html().trim().length > 0 && isDesktop()) {
        setTimeout(function () {
          $('.sidebar-toggle').trigger('click');
        }, 800);
      }
    });
  </script>




  

  
  
  

  

    
      
    

    <script type="text/javascript">
      var disqus_shortname = 'sunbingjie';
      var disqus_identifier = '2015/10/15/10.2/';
      var disqus_url = 'http://sunbingjie.tk/2015/10/15/10.2/';

      (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }());
    </script>
  




  
</body>
</html>
