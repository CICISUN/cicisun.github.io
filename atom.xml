<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[Cici's Blog]]></title>
  
  <link href="//atom.xml" rel="self"/>
  <link href="http://sunbingjie.tk/"/>
  <updated>2015-06-01T04:45:30.393Z</updated>
  <id>http://sunbingjie.tk/</id>
  
  <author>
    <name><![CDATA[Cici Sun]]></name>
    
  </author>
  
  <generator uri="http://zespia.tw/hexo/">Hexo</generator>
  
  <entry>
    <title><![CDATA[Jump Game, Jump Game II]]></title>
    <link href="http://sunbingjie.tk/2015/06/01/5.30/"/>
    <id>http://sunbingjie.tk/2015/06/01/5.30/</id>
    <published>2015-06-01T04:44:32.000Z</published>
    <updated>2015-06-01T04:44:32.000Z</updated>
    <content type="html"><![CDATA[<h2 id="Jump_Game">Jump Game</h2>
<blockquote>
<p>Given an array of non-negative integers, you are initially positioned at the first index of the array.<br>Each element in the array represents your maximum jump length at that position.<br>Determine if you are able to reach the last index.<br>For example:<br>A = [2,3,1,1,4], return true.<br>A = [3,2,1,0,4], return false.</p>
</blockquote>
<a id="more"></a>
<h3 id="Solution">Solution</h3>
<p>Inorder traversal, then link each value…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canJump</span>(<span class="keyword">int</span>[] nums) {</div><div class="line">    <span class="keyword">if</span>(nums==<span class="keyword">null</span> || nums.length==<span class="number">0</span> || nums.length==<span class="number">1</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    <span class="keyword">int</span> maxjump = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++){</div><div class="line">        <span class="keyword">if</span>(i &gt; maxjump) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        <span class="keyword">if</span>(nums[i]+i &gt; maxjump){</div><div class="line">            maxjump = nums[i]+i;</div><div class="line">        }</div><div class="line">        <span class="keyword">if</span>(maxjump &gt;= nums.length-<span class="number">1</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Jump_Game_II">Jump Game II</h2>
<blockquote>
<p>Given an array of non-negative integers, you are initially positioned at the first index of the array.<br>Each element in the array represents your maximum jump length at that position.<br>Your goal is to reach the last index in the minimum number of jumps.<br>For example:<br>Given array A = [2,3,1,1,4]<br>The minimum number of jumps to reach the last index is 2. (Jump 1 step from index 0 to 1, then 3 steps to the last index.)</p>
</blockquote>
<p>Thinking…</p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="Jump_Game">Jump Game</h2>
<blockquote>
<p>Given an array of non-negative integers, you are initially positioned at the first index of the array.<br>Each element in the array represents your maximum jump length at that position.<br>Determine if you are able to reach the last index.<br>For example:<br>A = [2,3,1,1,4], return true.<br>A = [3,2,1,0,4], return false.</p>
</blockquote>
]]>
    
    </summary>
    
      <category term="DP" scheme="http://sunbingjie.tk/tags/DP/"/>
    
      <category term="Array" scheme="http://sunbingjie.tk/tags/Array/"/>
    
      <category term="刷题" scheme="http://sunbingjie.tk/categories/%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[The Great Tree-List Recursion Problem, LRU Cache, Search Insert Position, Longest Common Prefix, Linked List Cycle, Linked List Cycle II]]></title>
    <link href="http://sunbingjie.tk/2015/05/03/4.18/"/>
    <id>http://sunbingjie.tk/2015/05/03/4.18/</id>
    <published>2015-05-04T03:20:10.000Z</published>
    <updated>2015-05-04T03:20:10.000Z</updated>
    <content type="html"><![CDATA[<h2 id="First_Problem_ఠ_ఠ">First Problem ఠ_ఠ</h2>
<blockquote>
<p>Convert a given Binary Tree to Doubly Linked List</p>
</blockquote>
<a id="more"></a>
<h3 id="Solution">Solution</h3>
<p>Inorder traversal, then link each value…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> DListNode pre = <span class="keyword">new</span> DListNode();</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> DListNode dummy = pre;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">btreetolist</span>(TreeNode r){</div><div class="line">    <span class="keyword">if</span>(r==<span class="keyword">null</span>) <span class="keyword">return</span>;</div><div class="line">    btreetolist(r.left);</div><div class="line">    DListNode cur = <span class="keyword">new</span> DListNode(r);</div><div class="line">    cur.prev = pre;</div><div class="line">    pre.next = cur;</div><div class="line">    pre = cur;</div><div class="line">    btreetolist(r.right);</div><div class="line">    }</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] args) {</div><div class="line">    TreeNode root = <span class="keyword">new</span> TreeNode(<span class="number">2</span>);</div><div class="line">    TreeNode l = <span class="keyword">new</span> TreeNode(<span class="number">1</span>);</div><div class="line">    TreeNode r = <span class="keyword">new</span> TreeNode(<span class="number">3</span>);</div><div class="line">    root.left = l; root.right=r;</div><div class="line">    btreetolist(root);</div><div class="line">    System.out.println(dummy.next.val.val);</div><div class="line">    System.out.println(dummy.next.next.val.val);</div><div class="line">    System.out.println(dummy.next.next.next.val.val);</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="The_Great_Tree-List_Recursion_Problem"><a href="http://cslibrary.stanford.edu/109/TreeListRecursion.html" target="_blank" rel="external">The Great Tree-List Recursion Problem</a></h2>
<blockquote>
<p>Here’s the formal problem statement: Write a recursive function treeToList(Node root) that takes an ordered binary tree and rearranges the internal pointers to make a circular doubly linked list out of the tree nodes. The “previous” pointers should be stored in the “small” field and the “next” pointers should be stored in the “large” field. The list should be arranged so that the nodes are in increasing order. Return the head pointer to the new list. The operation can be done in O(n) time — essentially operating on each node once. Basically take figure-1 as input and rearrange the pointers to make figure-2.</p>
</blockquote>
<p><img src="http://cslibrary.stanford.edu/109/tree.gif" alt=""><br><img src="http://cslibrary.stanford.edu/109/list.gif" alt=""></p>
<h3 id="Solution-1">Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">This is the simple Node class from which the tree and list</div><div class="line">are built. This does not have any methods -- it's just used</div><div class="line">as dumb storage by TreeList.</div><div class="line">The code below tries to be clear where it treats a Node pointer</div><div class="line">as a tree vs. where it is treated as a list.</div><div class="line"> */</div><div class="line">class Node {</div><div class="line">    <span class="keyword">int</span> data;</div><div class="line">    Node small;</div><div class="line">    Node large;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="title">Node</span>(<span class="keyword">int</span> data) {</div><div class="line">        <span class="keyword">this</span>.data = data;</div><div class="line">        small = <span class="keyword">null</span>;</div><div class="line">        large = <span class="keyword">null</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">TreeList main methods:</div><div class="line">-join() -- utility to connect two list nodes</div><div class="line">-append() -- utility to append two lists</div><div class="line">-treeToList() -- the core recursive function</div><div class="line">-treeInsert() -- used to build the tree</div><div class="line"> */</div><div class="line">class TreeList {</div><div class="line">    <span class="comment">/*</span></div><div class="line">  helper function -- given two list nodes, join them</div><div class="line">  together so the second immediately follow the first.</div><div class="line">  Sets the .next of the first and the .previous of the second.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">join</span>(Node a, Node b) {</div><div class="line">        a.large = b;</div><div class="line">        b.small = a;</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line">  helper function -- given two circular doubly linked</div><div class="line">  lists, append them and return the new list.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Node <span class="title">append</span>(Node a, Node b) {</div><div class="line">        <span class="comment">// if either is null, return the other</span></div><div class="line">        <span class="keyword">if</span> (a==<span class="keyword">null</span>) <span class="keyword">return</span>(b);</div><div class="line">        <span class="keyword">if</span> (b==<span class="keyword">null</span>) <span class="keyword">return</span>(a);</div><div class="line"></div><div class="line">        <span class="comment">// find the last node in each using the .previous pointer</span></div><div class="line">        Node aLast = a.small;</div><div class="line">        Node bLast = b.small;</div><div class="line"></div><div class="line">        <span class="comment">// join the two together to make it connected and circular</span></div><div class="line">        join(aLast, b);</div><div class="line">        join(bLast, a);</div><div class="line"></div><div class="line">        <span class="keyword">return</span>(a);</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line">  --Recursion--</div><div class="line">  Given an ordered binary tree, recursively change it into</div><div class="line">  a circular doubly linked list which is returned.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Node <span class="title">treeToList</span>(Node root) {</div><div class="line">        <span class="comment">// base case: empty tree -&gt; empty list</span></div><div class="line">        <span class="keyword">if</span> (root==<span class="keyword">null</span>) <span class="keyword">return</span>(<span class="keyword">null</span>);</div><div class="line"></div><div class="line">        <span class="comment">// Recursively do the subtrees (leap of faith!)</span></div><div class="line">        Node aList = treeToList(root.small);</div><div class="line">        Node bList = treeToList(root.large);</div><div class="line"></div><div class="line">        <span class="comment">// Make the single root node into a list length-1</span></div><div class="line">        <span class="comment">// in preparation for the appending</span></div><div class="line">        root.small = root;</div><div class="line">        root.large = root;</div><div class="line"></div><div class="line">        <span class="comment">// At this point we have three lists, and it's</span></div><div class="line">        <span class="comment">// just a matter of appending them together</span></div><div class="line">        <span class="comment">// in the right order (aList, root, bList)</span></div><div class="line">        aList = append(aList, root);</div><div class="line">        aList = append(aList, bList);</div><div class="line"></div><div class="line">        <span class="keyword">return</span>(aList);</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line">  Given a non-empty tree, insert a new node in the proper</div><div class="line">  place. The tree must be non-empty because Java's lack</div><div class="line">  of reference variables makes that case and this</div><div class="line">  method messier than they should be.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">treeInsert</span>(Node root, <span class="keyword">int</span> newData) {</div><div class="line">        <span class="keyword">if</span> (newData&lt;=root.data) {</div><div class="line">            <span class="keyword">if</span> (root.small!=<span class="keyword">null</span>) treeInsert(root.small, newData);</div><div class="line">            <span class="keyword">else</span> root.small = <span class="keyword">new</span> Node(newData);</div><div class="line">        }</div><div class="line">        <span class="keyword">else</span> {</div><div class="line">            <span class="keyword">if</span> (root.large!=<span class="keyword">null</span>) treeInsert(root.large, newData);</div><div class="line">            <span class="keyword">else</span> root.large = <span class="keyword">new</span> Node(newData);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">// Do an inorder traversal to print a tree</span></div><div class="line">    <span class="comment">// Does not print the ending "\n"</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printTree</span>(Node root) {</div><div class="line">        <span class="keyword">if</span> (root==<span class="keyword">null</span>) <span class="keyword">return</span>;</div><div class="line">        printTree(root.small);</div><div class="line">        System.out.print(Integer.toString(root.data) + <span class="string">" "</span>);</div><div class="line">        printTree(root.large);</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">// Do a traversal of the list and print it out</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printList</span>(Node head) {</div><div class="line">        Node current = head;</div><div class="line"></div><div class="line">        <span class="keyword">while</span> (current != <span class="keyword">null</span>) {</div><div class="line">            System.out.print(Integer.toString(current.data) + <span class="string">" "</span>);</div><div class="line">            current = current.large;</div><div class="line">            <span class="keyword">if</span> (current == head) <span class="keyword">break</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        System.out.println();</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">// Demonstrate tree-&gt;list with the list 1..5</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] args) {</div><div class="line"></div><div class="line">        <span class="comment">// first build the tree shown in the problem document</span></div><div class="line">        <span class="comment">// http://cslibrary.stanford.edu/109/</span></div><div class="line">        Node root = <span class="keyword">new</span> Node(<span class="number">4</span>);</div><div class="line">        treeInsert(root, <span class="number">2</span>);</div><div class="line">        treeInsert(root, <span class="number">1</span>);</div><div class="line">        treeInsert(root, <span class="number">3</span>);</div><div class="line">        treeInsert(root, <span class="number">5</span>);</div><div class="line"></div><div class="line">        System.out.println(<span class="string">"tree:"</span>);</div><div class="line">        printTree(root);   <span class="comment">// 1 2 3 4 5</span></div><div class="line">        System.out.println();</div><div class="line"></div><div class="line">        System.out.println(<span class="string">"list:"</span>);</div><div class="line">        Node head = treeToList(root);</div><div class="line">        printList(head);   <span class="comment">// 1 2 3 4 5   yay!</span></div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="LRU_Cache">LRU Cache</h2>
<blockquote>
<p>Design and implement a data structure for Least Recently Used (LRU) cache. It should support the following operations: get and set.<br>get(key) - Get the value (will always be positive) of the key if the key exists in the cache, otherwise return -1.<br>set(key, value) - Set or insert the value if the key is not already present. When the cache reached its capacity, it should invalidate the least recently used item before inserting a new item.</p>
</blockquote>
<h3 id="LinkedHashMap_Solution">LinkedHashMap Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> java.util.LinkedHashMap&lt;Integer,Integer&gt; self = <span class="keyword">new</span> java.util.LinkedHashMap&lt;Integer,Integer&gt;();</div><div class="line"><span class="keyword">private</span> <span class="keyword">int</span> capacity;</div><div class="line"><span class="keyword">public</span> <span class="title">LRUCache</span>(<span class="keyword">int</span> capacity) {</div><div class="line">    <span class="keyword">this</span>.capacity = capacity;</div><div class="line">}</div><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span>(<span class="keyword">int</span> key) {</div><div class="line">    Integer val = self.get(key);</div><div class="line">    <span class="keyword">if</span>(val==<span class="keyword">null</span>) <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">    self.remove(key);</div><div class="line">    self.put(key,val);</div><div class="line">    <span class="keyword">return</span> val;</div><div class="line">}</div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span>(<span class="keyword">int</span> key, <span class="keyword">int</span> value) {</div><div class="line">    Integer val = self.get(key);</div><div class="line">    <span class="keyword">if</span>(val==<span class="keyword">null</span> && self.size() == capacity){</div><div class="line">        self.remove(self.keySet().iterator().next());</div><div class="line">    }</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(val!=<span class="keyword">null</span>) self.remove(key);</div><div class="line">    self.put(key,value);</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="Map_+_List_Solution">Map + List Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> HashMap&lt;Integer,Integer&gt; map;</div><div class="line"><span class="keyword">private</span> ArrayList&lt;Integer&gt; list;</div><div class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> cap;</div><div class="line"><span class="keyword">public</span> <span class="title">LRUCache</span>(<span class="keyword">int</span> cap){</div><div class="line">    map = <span class="keyword">new</span> HashMap&lt;Integer, Integer&gt;();</div><div class="line">    list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line">    <span class="keyword">this</span>.cap = cap; </div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span>(<span class="keyword">int</span> key){</div><div class="line">    <span class="keyword">if</span>(!map.containsKey(key)) <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> var = map.get(key);</div><div class="line">    list.remove(list.indexOf(key));</div><div class="line">    list.add(key);</div><div class="line">    <span class="keyword">return</span> var;</div><div class="line">}</div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span>(<span class="keyword">int</span> key, <span class="keyword">int</span> value){</div><div class="line">    <span class="keyword">int</span> val = get(key);</div><div class="line">    map.put(key, value);</div><div class="line">    <span class="keyword">if</span>(val == -<span class="number">1</span>){</div><div class="line">        list.add(key);</div><div class="line">        <span class="keyword">if</span>(map.size()&gt; cap){</div><div class="line">            map.remove(list.get(<span class="number">0</span>));</div><div class="line">            list.remove(<span class="number">0</span>);</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Generate_Parentheses">Generate Parentheses</h2>
<blockquote>
<p>Given n pairs of parentheses, write a function to generate all combinations of well-formed parentheses.<br>For example, given n = 3, a solution set is:<br>“((()))”, “(()())”, “(())()”, “()(())”, “()()()”</p>
</blockquote>
<h3 id="DFS_+_Backtracking_Solution">DFS + Backtracking Solution</h3>
<ul>
<li>left/right represents how many l/r brackets left for use</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> ArrayList&lt;String&gt; <span class="title">generateParenthesis</span>(<span class="keyword">int</span> n) {</div><div class="line">    ArrayList&lt;String&gt; res = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">    StringBuilder sb = <span class="keyword">new</span> StringBuilder(); </div><div class="line">    <span class="keyword">if</span>(n==<span class="number">0</span>) <span class="keyword">return</span> res;</div><div class="line">    dfs(res, sb, n, n);</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">    </div><div class="line">}</div><div class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span>(ArrayList&lt;String&gt; res, StringBuilder sb,<span class="keyword">int</span> left, <span class="keyword">int</span> right){</div><div class="line">    <span class="keyword">if</span>(left &gt; right) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">if</span>(left == <span class="number">0</span> && right == <span class="number">0</span>){</div><div class="line">        res.add(sb.toString());</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    }</div><div class="line">    <span class="keyword">if</span>(left&gt;<span class="number">0</span>){</div><div class="line">        dfs(res,sb.append(<span class="string">'('</span>), left-<span class="number">1</span>, right);</div><div class="line">        sb.deleteCharAt(sb.length()-<span class="number">1</span>);</div><div class="line">    }</div><div class="line">    <span class="keyword">if</span>(right&gt;<span class="number">0</span>){</div><div class="line">        dfs(res,sb.append(<span class="string">')'</span>), left, right-<span class="number">1</span>);</div><div class="line">        sb.deleteCharAt(sb.length()-<span class="number">1</span>);</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<ul>
<li>If we use String here, no need to delete when backtracking</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> ArrayList&lt;String&gt; <span class="title">generateParenthesis</span>(<span class="keyword">int</span> n) {</div><div class="line">    ArrayList&lt;String&gt; res = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">    String tmp = <span class="string">""</span>; </div><div class="line">    <span class="keyword">if</span>(n==<span class="number">0</span>) <span class="keyword">return</span> res;</div><div class="line">    dfs(res, tmp, n, n);</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">    </div><div class="line">}</div><div class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span>(ArrayList&lt;String&gt; res, String tmp, <span class="keyword">int</span> left, <span class="keyword">int</span> right){</div><div class="line">    <span class="keyword">if</span>(left &gt; right) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">if</span>(left == <span class="number">0</span> && right == <span class="number">0</span>){</div><div class="line">        res.add(<span class="keyword">new</span> String(tmp));</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    }</div><div class="line">    <span class="keyword">if</span>(left&gt;<span class="number">0</span>){</div><div class="line">        dfs(res,tmp+<span class="string">"("</span>, left-<span class="number">1</span>, right);</div><div class="line">    }</div><div class="line">    <span class="keyword">if</span>(right&gt;<span class="number">0</span>){</div><div class="line">        dfs(res,tmp+<span class="string">")"</span>, left, right-<span class="number">1</span>);</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Search_Insert_Position">Search Insert Position</h2>
<blockquote>
<p>Given a sorted array and a target value, return the index if the target is found. If not, return the index where it would be if it were inserted in order.<br>You may assume no duplicates in the array.<br>Here are few examples.<br>[1,3,5,6], 5 → 2<br>[1,3,5,6], 2 → 1<br>[1,3,5,6], 7 → 4<br>[1,3,5,6], 0 → 0</p>
</blockquote>
<h3 id="Binary_Search_Solution">Binary Search Solution</h3>
<ul>
<li>Aside form the obvious scan solution..</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">searchInsert</span>(<span class="keyword">int</span>[] A, <span class="keyword">int</span> target) {</div><div class="line">    <span class="keyword">int</span> index = bsearch(A, target, <span class="number">0</span>, A.length-<span class="number">1</span>);</div><div class="line">    <span class="keyword">return</span> index;</div><div class="line">}</div><div class="line"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">bsearch</span>(<span class="keyword">int</span>[] A, <span class="keyword">int</span> target, <span class="keyword">int</span> l, <span class="keyword">int</span> r){</div><div class="line">    <span class="keyword">int</span> mid = (l+r) / <span class="number">2</span>;</div><div class="line">    <span class="keyword">if</span>(l&gt;=r) </div><div class="line">    {<span class="keyword">if</span>(A[l]&lt;target) <span class="keyword">return</span> l+<span class="number">1</span>;</div><div class="line">     <span class="keyword">if</span>(A[l]&gt;target) <span class="keyword">return</span> l;}</div><div class="line">    <span class="keyword">if</span>(target == A[mid]) <span class="keyword">return</span> mid;</div><div class="line">    <span class="keyword">if</span>(target &gt; A[mid]) <span class="keyword">return</span> bsearch(A,target,mid+<span class="number">1</span>,r);</div><div class="line">    <span class="keyword">else</span> <span class="keyword">return</span> bsearch(A,target,l,mid-<span class="number">1</span>);</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Longest_Common_Prefix">Longest Common Prefix</h2>
<blockquote>
<p>Write a function to find the longest common prefix string amongst an array of strings.</p>
</blockquote>
<h3 id="Solution-2">Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> String <span class="title">longestCommonPrefix</span>(String[] strs) {</div><div class="line">    <span class="keyword">int</span> n = strs.length;</div><div class="line">    <span class="keyword">if</span>(n==<span class="number">0</span>) <span class="keyword">return</span> <span class="string">""</span>;</div><div class="line">    StringBuilder sb = <span class="keyword">new</span> StringBuilder(); </div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;strs[<span class="number">0</span>].length();i++){</div><div class="line">        <span class="keyword">char</span> tmp = strs[<span class="number">0</span>].charAt(i);</div><div class="line">        <span class="keyword">for</span>(String s: strs){</div><div class="line">            <span class="keyword">if</span>(i+<span class="number">1</span>&gt;s.length() || s.charAt(i)!=tmp) <span class="keyword">return</span> sb.toString();</div><div class="line">        }</div><div class="line">        sb.append(tmp);</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> sb.toString();</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Linked_List_Cycle">Linked List Cycle</h2>
<blockquote>
<p>Given a linked list, determine if it has a cycle in it.<br>Follow up:<br>Can you solve it without using extra space?</p>
</blockquote>
<h3 id="Fast_Slow_Pointer_Solution">Fast Slow Pointer Solution</h3>
<ul>
<li>Edge case one: input &lt;=1 element</li>
<li>Edge case two: fast==null || fast.next==null</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasCycle</span>(ListNode head) {</div><div class="line">    <span class="keyword">if</span>(head==<span class="keyword">null</span> || head.next==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    ListNode a = head;</div><div class="line">    ListNode b = head;</div><div class="line">    <span class="keyword">while</span>(b!=<span class="keyword">null</span> && b.next!=<span class="keyword">null</span>){</div><div class="line">        a = a.next;</div><div class="line">        b = b.next.next;</div><div class="line">        <span class="keyword">if</span>(a==b) <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Linked_List_Cycle_II">Linked List Cycle II</h2>
<blockquote>
<p>Given a linked list, return the node where the cycle begins. If there is no cycle, return null.<br>Follow up:<br>Can you solve it without using extra space?</p>
</blockquote>
<h3 id="Solution-3">Solution</h3>
<ul>
<li>fast dis = a+b+c+b = 2 X slow dis = 2 * (a+b) -&gt; a=c</li>
</ul>
<p><img src="http://images.cnitblog.com/blog/354747/201311/05171805-64db9f059a1641e7afaf3dd8223c4fe7.jpg" alt=""></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> ListNode <span class="title">detectCycle</span>(ListNode head) {</div><div class="line">    ListNode a = head;</div><div class="line">    ListNode b = head;</div><div class="line">    <span class="keyword">while</span>(b!=<span class="keyword">null</span> && b.next!=<span class="keyword">null</span>){</div><div class="line">        a = a.next;</div><div class="line">        b = b.next.next;</div><div class="line">        <span class="keyword">if</span>(a==b){</div><div class="line">            a=head;</div><div class="line">            <span class="keyword">while</span>(a!=b){</div><div class="line">                a=a.next;</div><div class="line">                b=b.next;</div><div class="line">            }</div><div class="line">            <span class="keyword">return</span> a;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<iframe width="100%" height="160" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A%2F%2Fsoundcloud.com%2Falice-jemima%2Fno-diggity-1%3Fin%3Dcici-42%2Fsets%2Fsuits&auto_play=false&hide_related=true&show_comments=true&show_user=true&show_reposts=false&visual=true"></iframe>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="First_Problem_ఠ_ఠ">First Problem ఠ_ఠ</h2>
<blockquote>
<p>Convert a given Binary Tree to Doubly Linked List</p>
</blockquote>
]]>
    
    </summary>
    
      <category term="Tree" scheme="http://sunbingjie.tk/tags/Tree/"/>
    
      <category term="Recursion" scheme="http://sunbingjie.tk/tags/Recursion/"/>
    
      <category term="LinkedList" scheme="http://sunbingjie.tk/tags/LinkedList/"/>
    
      <category term="刷题" scheme="http://sunbingjie.tk/categories/%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[List of piano sheet to learn]]></title>
    <link href="http://sunbingjie.tk/2015/05/01/pianosheets/"/>
    <id>http://sunbingjie.tk/2015/05/01/pianosheets/</id>
    <published>2015-05-02T02:26:42.000Z</published>
    <updated>2015-05-02T02:26:42.000Z</updated>
    <content type="html"><![CDATA[<a id="more"></a>
<h3 id="Easy">Easy</h3>
<p>Maksim Mrvica - Claudine   </p>
<iframe width="420" height="315" src="https://www.youtube.com/embed/Nkgezt05MOE" frameborder="0" allowfullscreen></iframe>

<h3 id="Inter">Inter</h3>
<p>Tchaikovsky The Seasons: June “Barcarole”</p>
<iframe width="420" height="315" src="https://www.youtube.com/embed/oLxz9rai_bM" frameborder="0" allowfullscreen></iframe>

<h3 id="Hard">Hard</h3>
<p>Chopin - Ballade No. 1 in G minor, Op. 23</p>
<iframe width="420" height="315" src="https://www.youtube.com/embed/Ce8p0VcTbuA" frameborder="0" allowfullscreen></iframe>

<p>Liszt - Liebestraum No. 3 in A-flat Major</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/XsxDH4HcOWA" frameborder="0" allowfullscreen></iframe><br><iframe width="420" height="315" src="https://www.youtube.com/embed/nkXOrkeZyqQ" frameborder="0" allowfullscreen></iframe>]]></content>
    <summary type="html">
    <![CDATA[<a id="more"></a>
<h3 id="Easy">Easy</h3>
<p>Maksim Mrvica - Claudine   </p>
<iframe width="420" height="315" src="https://www.youtube.com/e]]>
    </summary>
    
      <category term="Classical" scheme="http://sunbingjie.tk/tags/Classical/"/>
    
      <category term="Music" scheme="http://sunbingjie.tk/categories/Music/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[MapReduce的模式、算法和用例]]></title>
    <link href="http://sunbingjie.tk/2015/05/01/mapreduceinonepage/"/>
    <id>http://sunbingjie.tk/2015/05/01/mapreduceinonepage/</id>
    <published>2015-05-01T22:51:54.000Z</published>
    <updated>2015-05-01T22:51:54.000Z</updated>
    <content type="html"><![CDATA[<h2 id="前言">前言</h2>
<p>在这篇文章里总结了几种网上或者论文中常见的MapReduce模式和算法，并系统化的解释了这些技术的不同之处。所有描述性的文字和代码都使用了标准hadoop的MapReduce模型，包括Mappers, Reduces, Combiners, Partitioners,和 sorting。如下图所示。<br><img src="http://www.kuqin.com/upimg/allimg/130629/192PQ950-.png" alt=""></p>
<a id="more"></a>
<h2 id="基本MapReduce模式">基本MapReduce模式</h2>
<h3 id="计数与求和">计数与求和</h3>
<p>问题陈述:有许多文档，每个文档都有一些字段组成。需要计算出每个字段在所有文档中的出现次数或者这些字段的其他什么统计值。例如，给定一个log文件，其中的每条记录都包含一个响应时间，需要计算出平均响应时间。</p>
<p>解决方案:</p>
<p>让我们先从简单的例子入手。在下面的代码片段里，Mapper每遇到指定词就把频次记1，Reducer一个个遍历这些词的集合然后把他们的频次加和。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">class <span class="type">Mapper</span></div><div class="line"><span class="keyword">method</span> <span class="type">Map</span>(docid id, doc d)</div><div class="line"><span class="keyword">for</span> all term t <span class="keyword">in</span> doc d <span class="keyword">do</span></div><div class="line"><span class="type">Emit</span>(term t, count <span class="number">1</span>)</div><div class="line"> </div><div class="line">class <span class="type">Reducer</span></div><div class="line"><span class="keyword">method</span> <span class="type">Reduce</span>(term t, counts [c1, c2,...])</div><div class="line">sum = <span class="number">0</span></div><div class="line"><span class="keyword">for</span> all count c <span class="keyword">in</span> [c1, c2,...] <span class="keyword">do</span></div><div class="line">sum = sum + c</div><div class="line"><span class="type">Emit</span>(term t, count sum)</div></pre></td></tr></table></figure>

<p>这种方法的缺点显而易见，Mapper提交了太多无意义的计数。它完全可以通过先对每个文档中的词进行计数从而减少传递给Reducer的数据量:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">class <span class="type">Mapper</span></div><div class="line"><span class="keyword">method</span> <span class="type">Map</span>(docid id, doc d)</div><div class="line">H = new <span class="type">AssociativeArray</span></div><div class="line"><span class="keyword">for</span> all term t <span class="keyword">in</span> doc d <span class="keyword">do</span></div><div class="line">H{t} = H{t} + <span class="number">1</span></div><div class="line"><span class="keyword">for</span> all term t <span class="keyword">in</span> H <span class="keyword">do</span></div><div class="line"><span class="type">Emit</span>(term t, count H{t})</div></pre></td></tr></table></figure>

<p>如果要累计计数的的不只是单个文档中的内容，还包括了一个Mapper节点处理的所有文档，那就要用到Combiner了:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">class Mapper</div><div class="line">method Map(docid id, doc d)</div><div class="line"><span class="keyword">for</span> all term t <span class="keyword">in</span> doc d do</div><div class="line">Emit(term t, count <span class="number">1</span>)</div><div class="line"> </div><div class="line">class Combiner</div><div class="line">method Combine(term t, [c1, c2,<span class="keyword">...</span>])</div><div class="line">sum = <span class="number">0</span></div><div class="line"><span class="keyword">for</span> all count c <span class="keyword">in</span> [c1, c2,<span class="keyword">...</span>] do</div><div class="line">sum = sum + c</div><div class="line">Emit(term t, count sum)</div><div class="line"> </div><div class="line">class Reducer</div><div class="line">method Reduce(term t, counts [c1, c2,<span class="keyword">...</span>])</div><div class="line">sum = <span class="number">0</span></div><div class="line"><span class="keyword">for</span> all count c <span class="keyword">in</span> [c1, c2,<span class="keyword">...</span>] do</div><div class="line">sum = sum + c</div><div class="line">Emit(term t, count sum)</div></pre></td></tr></table></figure>

<p>应用:<br>Log 分析, 数据查询</p>
<h3 id="整理归类">整理归类</h3>
<p>问题陈述:</p>
<p>有一系列条目，每个条目都有几个属性，要把具有同一属性值的条目都保存在一个文件里，或者把条目按照属性值分组。 最典型的应用是倒排索引。</p>
<p>解决方案：</p>
<p>解决方案很简单。 在 Mapper 中以每个条目的所需属性值作为 key，其本身作为值传递给 Reducer。 Reducer 取得按照属性值分组的条目，然后可以处理或者保存。如果是在构建倒排索引，那么 每个条目相当于一个词而属性值就是词所在的文档ID。</p>
<p>应用:<br>倒排索引， ETL</p>
<h3 id="过滤_(文本查找)，解析和校验">过滤 (文本查找)，解析和校验</h3>
<p>问题陈述:</p>
<p>假设有很多条记录，需要从其中找出满足某个条件的所有记录，或者将每条记录传换成另外一种形式（转换操作相对于各条记录独立，即对一条记录的操作与其他记录无关）。像文本解析、特定值抽取、格式转换等都属于后一种用例。</p>
<p>解决方案:</p>
<p>非常简单，在Mapper 里逐条进行操作，输出需要的值或转换后的形式。</p>
<p>应用:<br>日志分析，数据查询，ETL，数据校验</p>
<h3 id="分布式任务执行">分布式任务执行</h3>
<p>问题陈述:</p>
<p>大型计算可以分解为多个部分分别进行然后合并各个计算的结果以获得最终结果。</p>
<p>解决方案: 将数据切分成多份作为每个 Mapper 的输入，每个Mapper处理一份数据，执行同样的运算，产生结果，Reducer把多个Mapper的结果组合成一个。</p>
<p>案例研究： 数字通信系统模拟<br>像 WiMAX 这样的数字通信模拟软件通过系统模型来传输大量的随机数据，然后计算传输中的错误几率。 每个 Mapper 处理样本 1/N 的数据，计算出这部分数据的错误率，然后在 Reducer 里计算平均错误率。</p>
<p>应用:<br>工程模拟，数字分析，性能测试</p>
<h3 id="排序">排序</h3>
<p>问题陈述:</p>
<p>有许多条记录，需要按照某种规则将所有记录排序或是按照顺序来处理记录。</p>
<p>解决方案:简单排序很好办 – Mappers 将待排序的属性值为键，整条记录为值输出。 不过实际应用中的排序要更加巧妙一点， 这就是它之所以被称为MapReduce 核心的原因（“核心”是说排序？因为证明Hadoop计算能力的实验是大数据排序？还是说Hadoop的处理过程中对key排序的环节？）。在实践中，常用组合键来实现二次排序和分组。</p>
<p>MapReduce 最初只能够对键排序， 但是也有技术利用可以利用Hadoop 的特性来实现按值排序。想了解的话可以看这篇博客。</p>
<p>按照BigTable的概念，使用 MapReduce来对最初数据而非中间数据排序，也即保持数据的有序状态更有好处，必须注意这一点。换句话说，在数据插入时排序一次要比在每次查询数据的时候排序更高效。</p>
<h2 id="非基本_MapReduce_模式">非基本 MapReduce 模式</h2>
<h3 id="迭代消息传递_(图处理)">迭代消息传递 (图处理)</h3>
<p>问题陈述：</p>
<p>假设一个实体网络，实体之间存在着关系。 需要按照与它比邻的其他实体的属性计算出一个状态。这个状态可以表现为它和其它节点之间的距离， 存在特定属性的邻接点的迹象， 邻域密度特征等等。</p>
<p>解决方案：</p>
<p>网络存储为系列节点的结合，每个节点包含有其所有邻接点ID的列表。按照这个概念，MapReduce 迭代进行，每次迭代中每个节点都发消息给它的邻接点。邻接点根据接收到的信息更新自己的状态。当满足了某些条件的时候迭代停止，如达到了最大迭代次数（网络半径）或两次连续的迭代几乎没有状态改变。从技术上来看，Mapper 以每个邻接点的ID为键发出信息，所有的信息都会按照接受节点分组，reducer 就能够重算各节点的状态然后更新那些状态改变了的节点。下面展示了这个算法：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">class <span class="type">Mapper</span></div><div class="line"><span class="keyword">method</span> <span class="type">Map</span>(id n, <span class="keyword">object</span> N)</div><div class="line"><span class="type">Emit</span>(id n, <span class="keyword">object</span> N)</div><div class="line"><span class="keyword">for</span> all id m <span class="keyword">in</span> N.<span class="type">OutgoingRelations</span> <span class="keyword">do</span></div><div class="line"><span class="type">Emit</span>(id m, message getMessage(N))</div><div class="line"> </div><div class="line">class <span class="type">Reducer</span></div><div class="line"><span class="keyword">method</span> <span class="type">Reduce</span>(id m, [s1, s2,...])</div><div class="line">M = null</div><div class="line">messages = []</div><div class="line"><span class="keyword">for</span> all s <span class="keyword">in</span> [s1, s2,...] <span class="keyword">do</span></div><div class="line"><span class="keyword">if</span> <span class="type">IsObject</span>(s) then</div><div class="line">M = s</div><div class="line"><span class="keyword">else</span>               // s <span class="keyword">is</span> a message</div><div class="line">messages.add(s)</div><div class="line">M.<span class="type">State</span> = calculateState(messages)</div><div class="line"><span class="type">Emit</span>(id m, item M)</div></pre></td></tr></table></figure>

<p>一个节点的状态可以迅速的沿着网络传全网，那些被感染了的节点又去感染它们的邻居，整个过程就像下面的图示一样：<br><img src="http://www.kuqin.com/upimg/allimg/130629/192PU644-.png" alt=""></p>
<p>案例研究： 沿分类树的有效性传递<br>问题陈述：</p>
<p>这个问题来自于真实的电子商务应用。将各种货物分类，这些类别可以组成一个树形结构，比较大的分类（像男人、女人、儿童）可以再分出小分类（像男裤或女装），直到不能再分为止（像男式蓝色牛仔裤）。这些不能再分的基层类别可以是有效（这个类别包含有货品）或者已无效的（没有属于这个分类的货品）。如果一个分类至少含有一个有效的子分类那么认为这个分类也是有效的。我们需要在已知一些基层分类有效的情况下找出分类树上所有有效的分类。</p>
<p>解决方案：</p>
<p>这个问题可以用上一节提到的框架来解决。我们咋下面定义了名为 getMessage和 calculateState 的方法：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">class N</div><div class="line"><span class="type">State</span> <span class="keyword">in</span> {<span class="type">True</span> = <span class="number">2</span>, <span class="type">False</span> = <span class="number">1</span>, null = <span class="number">0</span>},</div><div class="line">initialized <span class="number">1</span> <span class="keyword">or</span> <span class="number">2</span> <span class="keyword">for</span> <span class="keyword">end</span>-<span class="keyword">of</span>-line categories, <span class="number">0</span> otherwise</div><div class="line"><span class="keyword">method</span> getMessage(<span class="keyword">object</span> N)</div><div class="line"><span class="keyword">return</span> N.<span class="type">State</span></div><div class="line"><span class="keyword">method</span> calculateState(state s, data [d1, d2,...])</div><div class="line"><span class="keyword">return</span> max( [d1, d2,...] )</div></pre></td></tr></table></figure>

<p>案例研究：广度优先搜索<br>问题陈述：需要计算出一个图结构中某一个节点到其它所有节点的距离。</p>
<p>解决方案：Source源节点给所有邻接点发出值为0的信号，邻接点把收到的信号再转发给自己的邻接点，每转发一次就对信号值加1：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">class N</div><div class="line"><span class="type">State</span> <span class="keyword">is</span> distance,</div><div class="line">initialized <span class="number">0</span> <span class="keyword">for</span> source node, <span class="type">INFINITY</span> <span class="keyword">for</span> all other nodes</div><div class="line"><span class="keyword">method</span> getMessage(N)</div><div class="line"><span class="keyword">return</span> N.<span class="type">State</span> + <span class="number">1</span></div><div class="line"><span class="keyword">method</span> calculateState(state s, data [d1, d2,...])</div><div class="line">min( [d1, d2,...] )</div></pre></td></tr></table></figure>

<p>案例研究：网页排名和 Mapper 端数据聚合<br>这个算法由Google提出，使用权威的PageRank算法，通过连接到一个网页的其他网页来计算网页的相关性。真实算法是相当复杂的，但是核心思想是权重可以传播，也即通过一个节点的各联接节点的权重的均值来计算节点自身的权重。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">class N</div><div class="line"><span class="type">State</span> <span class="keyword">is</span> <span class="type">PageRank</span></div><div class="line"><span class="keyword">method</span> getMessage(<span class="keyword">object</span> N)</div><div class="line"><span class="keyword">return</span> N.<span class="type">State</span> / N.<span class="type">OutgoingRelations</span>.size()</div><div class="line"><span class="keyword">method</span> calculateState(state s, data [d1, d2,...])</div><div class="line"><span class="keyword">return</span> ( sum([d1, d2,...]) )</div></pre></td></tr></table></figure>

<p>要指出的是上面用一个数值来作为评分实际上是一种简化，在实际情况下，我们需要在Mapper端来进行聚合计算得出这个值。下面的代码片段展示了这个改变后的逻辑 （针对于 PageRank 算法）：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">class <span class="type">Mapper</span></div><div class="line"><span class="keyword">method</span> <span class="type">Initialize</span></div><div class="line">H = new <span class="type">AssociativeArray</span></div><div class="line"><span class="keyword">method</span> <span class="type">Map</span>(id n, <span class="keyword">object</span> N)</div><div class="line">p = N.<span class="type">PageRank</span>  / N.<span class="type">OutgoingRelations</span>.size()</div><div class="line"><span class="type">Emit</span>(id n, <span class="keyword">object</span> N)</div><div class="line"><span class="keyword">for</span> all id m <span class="keyword">in</span> N.<span class="type">OutgoingRelations</span> <span class="keyword">do</span></div><div class="line">H{m} = H{m} + p</div><div class="line"><span class="keyword">method</span> <span class="type">Close</span></div><div class="line"><span class="keyword">for</span> all id n <span class="keyword">in</span> H <span class="keyword">do</span></div><div class="line"><span class="type">Emit</span>(id n, value H{n})</div><div class="line"> </div><div class="line">class <span class="type">Reducer</span></div><div class="line"><span class="keyword">method</span> <span class="type">Reduce</span>(id m, [s1, s2,...])</div><div class="line">M = null</div><div class="line">p = <span class="number">0</span></div><div class="line"><span class="keyword">for</span> all s <span class="keyword">in</span> [s1, s2,...] <span class="keyword">do</span></div><div class="line"><span class="keyword">if</span> <span class="type">IsObject</span>(s) then</div><div class="line">M = s</div><div class="line"><span class="keyword">else</span></div><div class="line">p = p + s</div><div class="line">M.<span class="type">PageRank</span> = p</div><div class="line"><span class="type">Emit</span>(id m, item M)</div></pre></td></tr></table></figure>

<p>应用：<br>图分析，网页索引</p>
<h3 id="值去重_（对唯一项计数）">值去重 （对唯一项计数）</h3>
<p>问题陈述:记录包含值域F和值域 G，要分别统计相同G值的记录中不同的F值的数目 (相当于按照 G分组).</p>
<p>这个问题可以推而广之应用于分面搜索（某些电子商务网站称之为Narrow Search）</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Record <span class="number">1</span>: <span class="variable">F=</span><span class="number">1</span>, <span class="variable">G=</span>{a, b}</div><div class="line">Record <span class="number">2</span>: <span class="variable">F=</span><span class="number">2</span>, <span class="variable">G=</span>{a, d, e}</div><div class="line">Record <span class="number">3</span>: <span class="variable">F=</span><span class="number">1</span>, <span class="variable">G=</span>{b}</div><div class="line">Record <span class="number">4</span>: <span class="variable">F=</span><span class="number">3</span>, <span class="variable">G=</span>{a, b}</div><div class="line"> </div><div class="line">Result:</div><div class="line">a -&gt; <span class="number">3</span> // <span class="variable">F=</span><span class="number">1</span>, <span class="variable">F=</span><span class="number">2</span>, <span class="variable">F=</span><span class="number">3</span></div><div class="line">b -&gt; <span class="number">2</span> // <span class="variable">F=</span><span class="number">1</span>, <span class="variable">F=</span><span class="number">3</span></div><div class="line">d -&gt; <span class="number">1</span> // <span class="variable">F=</span><span class="number">2</span></div><div class="line">e -&gt; <span class="number">1</span> // <span class="variable">F=</span><span class="number">2</span></div></pre></td></tr></table></figure>

<p>解决方案 I:</p>
<p>第一种方法是分两个阶段来解决这个问题。第一阶段在Mapper中使用F和G组成一个复合值对，然后在Reducer中输出每个值对，目的是为了保证F值的唯一性。在第二阶段，再将值对按照G值来分组计算每组中的条目数。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">第一阶段：</div><div class="line">class Mapper</div><div class="line">method Map(null, record [value f, categories [g1, g2,<span class="keyword">...</span>]])</div><div class="line"><span class="keyword">for</span> all category g <span class="keyword">in</span> [g1, g2,<span class="keyword">...</span>]</div><div class="line">Emit(record [g, f], count <span class="number">1</span>)</div><div class="line"> </div><div class="line">class Reducer</div><div class="line">method Reduce(record [g, f], counts [n1, n2, <span class="keyword">...</span>])</div><div class="line">Emit(record [g, f], null )</div><div class="line">第二阶段：</div><div class="line">class Mapper</div><div class="line">method Map(record [f, g], null)</div><div class="line">Emit(value g, count <span class="number">1</span>)</div><div class="line"> </div><div class="line">class Reducer</div><div class="line">method Reduce(value g, counts [n1, n2,<span class="keyword">...</span>])</div><div class="line">Emit(value g, sum( [n1, n2,<span class="keyword">...</span>] ) )</div><div class="line">解决方案 II:</div></pre></td></tr></table></figure>

<p>第二种方法只需要一次MapReduce 即可实现，但扩展性不强。算法很简单-Mapper 输出值和分类，在Reducer里为每个值对应的分类去重然后给每个所属的分类计数加1，最后再在Reducer结束后将所有计数加和。这种方法适用于只有有限个分类，而且拥有相同F值的记录不是很多的情况。例如网络日志处理和用户分类，用户的总数很多，但是每个用户的事件是有限的，以此分类得到的类别也是有限的。值得一提的是在这种模式下可以在数据传输到Reducer之前使用Combiner来去除分类的重复值。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">class Mapper</div><div class="line">method Map(null, record [value f, categories [g1, g2,<span class="keyword">...</span>] )</div><div class="line"><span class="keyword">for</span> all category g <span class="keyword">in</span> [g1, g2,<span class="keyword">...</span>]</div><div class="line">Emit(value f, category g)</div><div class="line"> </div><div class="line">class Reducer</div><div class="line">method Initialize</div><div class="line">H = new AssociativeArray : category -&gt; count</div><div class="line">method Reduce(value f, categories [g1, g2,<span class="keyword">...</span>])</div><div class="line">[g1<span class="string">', g2'</span>,..] = ExcludeDuplicates( [g1, g2,..] )</div><div class="line"><span class="keyword">for</span> all category g <span class="keyword">in</span> [g1<span class="string">', g2'</span>,<span class="keyword">...</span>]</div><div class="line">H{g} = H{g} + <span class="number">1</span></div><div class="line">method Close</div><div class="line"><span class="keyword">for</span> all category g <span class="keyword">in</span> H do</div><div class="line">Emit(category g, count H{g})</div></pre></td></tr></table></figure>

<p>应用：<br>日志分析，用户计数</p>
<h3 id="互相关">互相关</h3>
<p>问题陈述：有多个各由若干项构成的组，计算项两两共同出现于一个组中的次数。假如项数是N，那么应该计算N*N。</p>
<p>这种情况常见于文本分析（条目是单词而元组是句子），市场分析（购买了此物的客户还可能购买什么）。如果N*N小到可以容纳于一台机器的内存，实现起来就比较简单了。</p>
<p>配对法</p>
<p>第一种方法是在Mapper中给所有条目配对，然后在Reducer中将同一条目对的计数加和。但这种做法也有缺点：</p>
<p>使用 combiners 带来的的好处有限，因为很可能所有项对都是唯一的<br>不能有效利用内存</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">class Mapper</div><div class="line">method Map(null, items [i1, i2,<span class="keyword">...</span>] )</div><div class="line"><span class="keyword">for</span> all item i <span class="keyword">in</span> [i1, i2,<span class="keyword">...</span>]</div><div class="line"><span class="keyword">for</span> all item j <span class="keyword">in</span> [i1, i2,<span class="keyword">...</span>]</div><div class="line">Emit(pair [i j], count <span class="number">1</span>)</div><div class="line"> </div><div class="line">class Reducer</div><div class="line">method Reduce(pair [i j], counts [c1, c2,<span class="keyword">...</span>])</div><div class="line">s = sum([c1, c2,<span class="keyword">...</span>])</div><div class="line">Emit(pair[i j], count s)</div><div class="line">Stripes Approach（条方法？不知道这个名字怎么理解）</div></pre></td></tr></table></figure>

<p>第二种方法是将数据按照pair中的第一项来分组，并维护一个关联数组，数组中存储的是所有关联项的计数。The second approach is to group data by the first item in pair and maintain an associative array (“stripe”) where counters for all adjacent items are accumulated. Reducer receives all stripes for leading item i, merges them, and emits the same result as in the Pairs approach.</p>
<p>中间结果的键数量相对较少，因此减少了排序消耗。<br>可以有效利用 combiners。<br>可在内存中执行，不过如果没有正确执行的话也会带来问题。<br>实现起来比较复杂。<br>一般来说， “stripes” 比 “pairs” 更快</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">class Mapper</div><div class="line">method Map(null, items [i1, i2,<span class="keyword">...</span>] )</div><div class="line"><span class="keyword">for</span> all item i <span class="keyword">in</span> [i1, i2,<span class="keyword">...</span>]</div><div class="line">H = new AssociativeArray : item -&gt; counter</div><div class="line"><span class="keyword">for</span> all item j <span class="keyword">in</span> [i1, i2,<span class="keyword">...</span>]</div><div class="line">H{j} = H{j} + <span class="number">1</span></div><div class="line">Emit(item i, stripe H)</div><div class="line"> </div><div class="line">class Reducer</div><div class="line">method Reduce(item i, stripes [H1, H2,<span class="keyword">...</span>])</div><div class="line">H = new AssociativeArray : item -&gt; counter</div><div class="line">H = merge-sum( [H1, H2,<span class="keyword">...</span>] )</div><div class="line"><span class="keyword">for</span> all item j <span class="keyword">in</span> H.keys()</div><div class="line">Emit(pair [i j], H{j})</div></pre></td></tr></table></figure>

<p>应用：<br>文本分析，市场分析</p>
<h2 id="用MapReduce_表达关系模式">用MapReduce 表达关系模式</h2>
<p>在这部分我们会讨论一下怎么使用MapReduce来进行主要的关系操作。</p>
<h3 id="筛选（Selection）">筛选（Selection）</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> Mapper</div><div class="line"><span class="function"><span class="keyword">method</span> <span class="title">Map</span><span class="params">(rowkey key, <span class="keyword">tuple</span> t)</span></span></div><div class="line"><span class="title">if</span> <span class="title">t</span> <span class="title">satisfies</span> <span class="title">the</span> <span class="title">predicate</span></div><div class="line"><span class="title">Emit</span><span class="params">(<span class="keyword">tuple</span> t, null)</span></div></pre></td></tr></table></figure>

<h3 id="投影（Projection）">投影（Projection）</h3>
<p>投影只比筛选稍微复杂一点，在这种情况下我们可以用Reducer来消除可能的重复值。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">class <span class="type">Mapper</span></div><div class="line"><span class="keyword">method</span> <span class="type">Map</span>(rowkey key, <span class="keyword">tuple</span> t)</div><div class="line"><span class="keyword">tuple</span> g = project(t) // extract required fields to <span class="keyword">tuple</span> g</div><div class="line"><span class="type">Emit</span>(<span class="keyword">tuple</span> g, null)</div><div class="line"> </div><div class="line">class <span class="type">Reducer</span></div><div class="line"><span class="keyword">method</span> <span class="type">Reduce</span>(<span class="keyword">tuple</span> t, <span class="type">array</span> n) // n <span class="keyword">is</span> an <span class="type">array</span> <span class="keyword">of</span> nulls</div><div class="line"><span class="type">Emit</span>(<span class="keyword">tuple</span> t, null)</div></pre></td></tr></table></figure>

<h3 id="合并（Union）">合并（Union）</h3>
<p>两个数据集中的所有记录都送入Mapper，在Reducer里消重。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">class <span class="type">Mapper</span></div><div class="line"><span class="keyword">method</span> <span class="type">Map</span>(rowkey key, <span class="keyword">tuple</span> t)</div><div class="line"><span class="type">Emit</span>(<span class="keyword">tuple</span> t, null)</div><div class="line"> </div><div class="line">class <span class="type">Reducer</span></div><div class="line"><span class="keyword">method</span> <span class="type">Reduce</span>(<span class="keyword">tuple</span> t, <span class="type">array</span> n) // n <span class="keyword">is</span> an <span class="type">array</span> <span class="keyword">of</span> one <span class="keyword">or</span> two nulls</div><div class="line"><span class="type">Emit</span>(<span class="keyword">tuple</span> t, null)</div></pre></td></tr></table></figure>

<h3 id="交集（Intersection）">交集（Intersection）</h3>
<p>将两个数据集中需要做交叉的记录输入Mapper，Reducer 输出出现了两次的记录。因为每条记录都有一个主键，在每个数据集中只会出现一次，所以这样做是可行的。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">class <span class="type">Mapper</span></div><div class="line"><span class="keyword">method</span> <span class="type">Map</span>(rowkey key, <span class="keyword">tuple</span> t)</div><div class="line"><span class="type">Emit</span>(<span class="keyword">tuple</span> t, null)</div><div class="line"> </div><div class="line">class <span class="type">Reducer</span></div><div class="line"><span class="keyword">method</span> <span class="type">Reduce</span>(<span class="keyword">tuple</span> t, <span class="type">array</span> n) // n <span class="keyword">is</span> an <span class="type">array</span> <span class="keyword">of</span> one <span class="keyword">or</span> two nulls</div><div class="line"><span class="keyword">if</span> n.size() = <span class="number">2</span></div><div class="line"><span class="type">Emit</span>(<span class="keyword">tuple</span> t, null)</div></pre></td></tr></table></figure>

<h3 id="差异（Difference）">差异（Difference）</h3>
<p>假设有两个数据集R和S，我们要找出R与S的差异。Mapper将所有的元组做上标记，表明他们来自于R还是S，Reducer只输出那些存在于R中而不在S中的记录。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">class <span class="type">Mapper</span></div><div class="line"><span class="keyword">method</span> <span class="type">Map</span>(rowkey key, <span class="keyword">tuple</span> t)</div><div class="line"><span class="type">Emit</span>(<span class="keyword">tuple</span> t, <span class="type">string</span> t.<span class="type">SetName</span>) // t.<span class="type">SetName</span> <span class="keyword">is</span> either 'R' <span class="keyword">or</span> 'S'</div><div class="line"> </div><div class="line">class <span class="type">Reducer</span></div><div class="line"><span class="keyword">method</span> <span class="type">Reduce</span>(<span class="keyword">tuple</span> t, <span class="type">array</span> n) // <span class="type">array</span> n can be ['R'], ['S'], ['R' 'S'], <span class="keyword">or</span> ['S', 'R']</div><div class="line"><span class="keyword">if</span> n.size() = <span class="number">1</span> <span class="keyword">and</span> n[<span class="number">1</span>] = 'R'</div><div class="line"><span class="type">Emit</span>(<span class="keyword">tuple</span> t, null)</div></pre></td></tr></table></figure>

<h3 id="分组聚合（GroupBy_and_Aggregation）">分组聚合（GroupBy and Aggregation）</h3>
<p>分组聚合可以在如下的一个MapReduce中完成。Mapper抽取数据并将之分组聚合，Reducer 中对收到的数据再次聚合。典型的聚合应用比如求和与最值可以以流的方式进行计算，因而不需要同时保有所有的值。但是另外一些情景就必须要两阶段MapReduce，前面提到过的惟一值模式就是一个这种类型的例子。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">class Mapper</div><div class="line">method Map(null, tuple [value GroupBy, value AggregateBy, value <span class="keyword">...</span>])</div><div class="line">Emit(value GroupBy, value AggregateBy)</div><div class="line">class Reducer</div><div class="line">method Reduce(value GroupBy, [v1, v2,<span class="keyword">...</span>])</div><div class="line">Emit(value GroupBy, aggregate( [v1, v2,<span class="keyword">...</span>] ) ) // aggregate() : sum(), max(),<span class="keyword">...</span></div></pre></td></tr></table></figure>

<h3 id="连接（Joining）">连接（Joining）</h3>
<p>MapperReduce框架可以很好地处理连接，不过在面对不同的数据量和处理效率要求的时候还是有一些技巧。在这部分我们会介绍一些基本方法，在后面的参考文档中还列出了一些关于这方面的专题文章。</p>
<p>分配后连接 （Reduce端连接,排序-合并连接）<br>这个算法按照键K来连接数据集R和L。Mapper 遍历R和L中的所有元组，以K为键输出每一个标记了来自于R还是L的元组，Reducer把同一个K的数据分装入两个容器（R和L），然后嵌套循环遍历两个容器中的数据以得到交集，最后输出的每一条结果都包含了R中的数据、L中的数据和K。这种方法有以下缺点：</p>
<p>Mapper要输出所有的数据，即使一些key只会在一个集合中出现。<br>Reducer 要在内存中保有一个key的所有数据，如果数据量打过了内存，那么就要缓存到硬盘上，这就增加了硬盘IO的消耗。<br>尽管如此，再分配连接方式仍然是最通用的方法，特别是其他优化技术都不适用的时候。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">class Mapper</div><div class="line">method Map(null, tuple [join_key k, value v1, value v2,<span class="keyword">...</span>])</div><div class="line">Emit(join_key k, tagged_tuple [set_name tag, values [v1, v2, <span class="keyword">...</span>] ] )</div><div class="line"> </div><div class="line">class Reducer</div><div class="line">method Reduce(join_key k, tagged_tuples [t1, t2,<span class="keyword">...</span>])</div><div class="line">H = new AssociativeArray : set_name -&gt; values</div><div class="line"><span class="keyword">for</span> all tagged_tuple t <span class="keyword">in</span> [t1, t2,<span class="keyword">...</span>] // separate values into <span class="number">2</span> arrays</div><div class="line">H{t.tag}.add(t.values)</div><div class="line"><span class="keyword">for</span> all values r <span class="keyword">in</span> H{<span class="string">'R'</span>} // produce a cross-join of the two arrays</div><div class="line"><span class="keyword">for</span> all values l <span class="keyword">in</span> H{<span class="string">'L'</span>}</div><div class="line">Emit(null, [k r l] )</div></pre></td></tr></table></figure>

<p>复制链接Replicated Join （Mapper端连接, Hash 连接）<br>在实际应用中，将一个小数据集和一个大数据集连接是很常见的（如用户与日志记录）。假定要连接两个集合R和L，其中R相对较小，这样，可以把R分发给所有的Mapper，每个Mapper都可以载入它并以连接键来索引其中的数据，最常用和有效的索引技术就是哈希表。之后，Mapper遍历L，并将其与存储在哈希表中的R中的相应记录连接，。这种方法非常高效，因为不需要对L中的数据排序，也不需要通过网络传送L中的数据，但是R必须足够小到能够分发给所有的Mapper。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">class</span> Mapper</div><div class="line"><span class="function"><span class="keyword">method</span> <span class="title">Initialize</span></span></div><div class="line"><span class="title">H</span> = <span class="title">new</span> <span class="title">AssociativeArray</span> : join_key -&gt; <span class="keyword">tuple</span> <span class="keyword">from</span> R</div><div class="line">R = loadR()</div><div class="line"><span class="keyword">for</span> all [ join_key k, <span class="keyword">tuple</span> [r1, r2,...] ] <span class="keyword">in</span> R</div><div class="line">H<span class="comment">{k}</span> = H<span class="comment">{k}</span>.append( [r1, r2,...] )</div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">method</span> <span class="title">Map</span><span class="params">(join_key k, <span class="keyword">tuple</span> l)</span></span></div><div class="line"><span class="title">for</span> <span class="title">all</span> <span class="title">tuple</span> <span class="title">r</span> <span class="title">in</span> <span class="title">H</span><span class="comment">{k}</span></div><div class="line"><span class="title">Emit</span><span class="params">(null, <span class="keyword">tuple</span> [k r l] )</span></div></pre></td></tr></table></figure>

]]></content>
    <summary type="html">
    <![CDATA[<h2 id="前言">前言</h2>
<p>在这篇文章里总结了几种网上或者论文中常见的MapReduce模式和算法，并系统化的解释了这些技术的不同之处。所有描述性的文字和代码都使用了标准hadoop的MapReduce模型，包括Mappers, Reduces, Combiners, Partitioners,和 sorting。如下图所示。<br><img src="http://www.kuqin.com/upimg/allimg/130629/192PQ950-.png" alt=""></p>
]]>
    
    </summary>
    
      <category term="Hadoop" scheme="http://sunbingjie.tk/tags/Hadoop/"/>
    
      <category term="学习" scheme="http://sunbingjie.tk/categories/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Web scraping with Scrapy]]></title>
    <link href="http://sunbingjie.tk/2015/05/01/scrapy/"/>
    <id>http://sunbingjie.tk/2015/05/01/scrapy/</id>
    <published>2015-05-01T22:50:53.000Z</published>
    <updated>2015-05-01T22:50:53.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p><a href="http://doc.scrapy.org/en/latest/intro/overview.html" target="_blank" rel="external">Scrapy</a> is an application framework for crawling web sites and extracting structured data which can be used for a wide range of useful applications, like data mining, information processing or historical archival.<br>So you need to extract some information from a website, but the website doesn’t provide any API or mechanism to access that info programmatically. Scrapy can help you extract that information.</p>
</blockquote>
<a id="more"></a>
<ul>
<li>To write a web crawler, we need at least basic knowledge on XPath and Python, that’s enough! </li>
</ul>
<h3 id="Installation">Installation</h3>
<p>Install using pip</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install Scrapy</div></pre></td></tr></table></figure>

<p>Create project</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scrapy startproject name</div></pre></td></tr></table></figure>

<p>This will create a name dir with the following files</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">name/</div><div class="line">    scrapy.cfg</div><div class="line">    tutorial/</div><div class="line">        __init__.py</div><div class="line">        items.py</div><div class="line">        pipelines.py</div><div class="line">        settings.py</div><div class="line">        spiders/</div><div class="line">            __init__.py</div><div class="line">            <span class="keyword">...</span></div></pre></td></tr></table></figure>

<h3 id="Defining_the_Items_you_will_extract">Defining the Items you will extract</h3>
<p>In items.py, item class which loads our data are declared by creating a scrapy.Item class and defining its attributes as scrapy.Field objects, like you will in an ORM.</p>
<p>Here’s my Item definition:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CrawlItem</span><span class="params">(scrapy.Item)</span>:</span></div><div class="line">    des = scrapy.Field()</div><div class="line">    image_urls = scrapy.Field()</div><div class="line">    images = scrapy.Field()</div></pre></td></tr></table></figure>

<h3 id="Writing_a_spider_to_crawl_a_site_and_extract_Items">Writing a spider to crawl a site and extract Items</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> scrapy</div><div class="line"><span class="keyword">from</span> scrapy.contrib.spiders <span class="keyword">import</span> Rule, CrawlSpider</div><div class="line"><span class="keyword">from</span> scrapy.contrib.linkextractors <span class="keyword">import</span> LinkExtractor</div><div class="line"><span class="keyword">from</span> crawl.items <span class="keyword">import</span> CrawlItem</div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CrawlSpider</span><span class="params">(CrawlSpider)</span>:</span></div><div class="line"></div><div class="line">    name = <span class="string">"crawl"</span></div><div class="line">    allowed_domains = [<span class="string">"polyvore.com"</span>]</div><div class="line">    start_urls = [<span class="string">"http://www.polyvore.com/?filter=fashion"</span>]</div><div class="line">    rules = [Rule(LinkExtractor(allow =[<span class="string">'/.*'</span>]), <span class="string">'parse_crawl'</span>)]</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse_crawl</span><span class="params">(self, response)</span>:</span></div><div class="line"> </div><div class="line">        item =CrawlItem()</div><div class="line"></div><div class="line">        link_rel = response.xpath(<span class="string">"//img[@class='img_size_l']/@title"</span>).extract()</div><div class="line">        </div><div class="line">        item[<span class="string">'des'</span>] = [x <span class="keyword">for</span> x <span class="keyword">in</span> link_rel]</div><div class="line"> </div><div class="line">        link = response.xpath(<span class="string">"//img[@class='img_size_l']/@src"</span>).extract()</div><div class="line"> </div><div class="line">        item[<span class="string">'image_urls'</span>] = [ x <span class="keyword">for</span> x <span class="keyword">in</span> link]</div><div class="line"> </div><div class="line">        <span class="keyword">return</span> item</div></pre></td></tr></table></figure>

<p>Start crawling…</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scrapy crawl crawl</div></pre></td></tr></table></figure>

<h3 id="Writing_an_Item_Pipeline_to_store_the_extracted_Items">Writing an Item Pipeline to store the extracted Items</h3>
<p>If we are just downloading the images to local<br>Add these two lines in setting.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ITEM_PIPELINES = {<span class="string">'scrapy.contrib.pipeline.images.ImagesPipeline'</span>: <span class="number">1</span>}</div><div class="line"> </div><div class="line">IMAGES_STORE = <span class="string">"img"</span></div></pre></td></tr></table></figure>

<p>Results: all images are stored under name/img/full directory;)</p>
<p>If we need to Write items to a JSON file,  by using the Feed exports.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scrapy crawl dmoz -o items.json</div></pre></td></tr></table></figure>

<p>If backendDB is required:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> MySQLdb</div><div class="line"><span class="keyword">import</span> hashlib</div><div class="line"><span class="keyword">from</span> scrapy.exceptions <span class="keyword">import</span> DropItem</div><div class="line"><span class="keyword">from</span> scrapy.http <span class="keyword">import</span> Request</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySQLStorePipeline</span><span class="params">(object)</span>:</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">    self.conn = MySQLdb.connect(user=<span class="string">'user'</span>, <span class="string">'passwd'</span>, <span class="string">'dbname'</span>, <span class="string">'host'</span>, charset=<span class="string">"utf8"</span>, use_unicode=<span class="keyword">True</span>)</div><div class="line">    self.cursor = self.conn.cursor()</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span>    </div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        self.cursor.execute(<span class="string">"""INSERT INTO test (des, image_urls)  </span></div><div class="line">                        VALUES (%s, %s)""", </div><div class="line">                       (item[<span class="string">'des'</span>].encode(<span class="string">'utf-8'</span>), </div><div class="line">                        item[<span class="string">'image_urls'</span>].encode(<span class="string">'utf-8'</span>)))</div><div class="line"></div><div class="line">        self.conn.commit()</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">except</span> MySQLdb.Error, e:</div><div class="line">        <span class="keyword">print</span> <span class="string">"Error %d: %s"</span> % (e.args[<span class="number">0</span>], e.args[<span class="number">1</span>])</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">return</span> item</div></pre></td></tr></table></figure>

<hr>
<p>recently falling for a bit METAL…ヾ(○´▽｀○)ノ </p>
<iframe width="100%" height="160" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A%2F%2Fsoundcloud.com%2Fnuclearblastrecords%2Fnightwish-amaranth&auto_play=false&hide_related=true&show_comments=true&show_user=true&show_reposts=false&visual=true"></iframe>

]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p><a href="http://doc.scrapy.org/en/latest/intro/overview.html" target="_blank" rel="external">Scrapy</a> is an application framework for crawling web sites and extracting structured data which can be used for a wide range of useful applications, like data mining, information processing or historical archival.<br>So you need to extract some information from a website, but the website doesn’t provide any API or mechanism to access that info programmatically. Scrapy can help you extract that information.</p>
</blockquote>
]]>
    
    </summary>
    
      <category term="Crawler" scheme="http://sunbingjie.tk/tags/Crawler/"/>
    
      <category term="学习" scheme="http://sunbingjie.tk/categories/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Niccolo Paganini Selected Works]]></title>
    <link href="http://sunbingjie.tk/2015/05/01/Paganini/"/>
    <id>http://sunbingjie.tk/2015/05/01/Paganini/</id>
    <published>2015-05-01T21:01:59.000Z</published>
    <updated>2015-05-01T21:01:59.000Z</updated>
    <content type="html"><![CDATA[<p>Leonid Kogan - Cantabile, Paganini</p>
<iframe width="420" height="315" src="https://www.youtube.com/embed/xsFJS4I_05E" frameborder="0" allowfullscreen></iframe>

<p>Kogan - La Campanella</p>
<iframe width="420" height="315" src="https://www.youtube.com/embed/lWaOnqmtr9U" frameborder="0" allowfullscreen></iframe>


<p>Jascha Heifetz - Caprice No. 24</p>
<iframe width="420" height="315" src="https://www.youtube.com/embed/vPcnGrie__M" frameborder="0" allowfullscreen></iframe>]]></content>
    <summary type="html">
    <![CDATA[<p>Leonid Kogan - Cantabile, Paganini</p>
<iframe width="420" height="315" src="https://www.youtube.com/embed/xsFJS4I_05E" frameborder="0" a]]>
    </summary>
    
      <category term="Classical" scheme="http://sunbingjie.tk/tags/Classical/"/>
    
      <category term="Music" scheme="http://sunbingjie.tk/categories/Music/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Path Sum, Path Sum II, Binary Tree Maximum Path Sum, Minimum Path Sum]]></title>
    <link href="http://sunbingjie.tk/2015/04/18/4.11/"/>
    <id>http://sunbingjie.tk/2015/04/18/4.11/</id>
    <published>2015-04-18T21:57:43.000Z</published>
    <updated>2015-04-18T21:57:43.000Z</updated>
    <content type="html"><![CDATA[<h2 id="Path_Sum">Path Sum</h2>
<blockquote>
<p>Given a binary tree and a sum, determine if the tree has a root-to-leaf path such that adding up all the values along the path equals the given sum.<br>For example:</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Given the below binary tree and sum = 22,</div><div class="line">              5</div><div class="line">             / <span class="command">\</span></div><div class="line">            4   8</div><div class="line">           /   / <span class="command">\</span></div><div class="line">          11  13  4</div><div class="line">         /  <span class="command">\ </span>     <span class="command">\</span></div><div class="line">        7    2      1</div></pre></td></tr></table></figure>

<p>return true, as there exist a root-to-leaf path 5-&gt;4-&gt;11-&gt;2 which sum is 22.</p>
<a id="more"></a>
<h3 id="Recursive_Solution">Recursive Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasPathSum</span>(TreeNode root, <span class="keyword">int</span> sum) {</div><div class="line">    <span class="keyword">return</span> dfs(root, sum);</div><div class="line">}</div><div class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">dfs</span>(TreeNode root, <span class="keyword">int</span> sum){</div><div class="line">    <span class="keyword">if</span>(root==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    sum = sum-root.val;</div><div class="line">    <span class="keyword">if</span>(root.left==<span class="keyword">null</span> && root.right==<span class="keyword">null</span>) <span class="keyword">return</span> sum==<span class="number">0</span>;</div><div class="line">    <span class="keyword">return</span> dfs(root.left, sum) || dfs(root.right, sum);</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="Iterative_Solution">Iterative Solution</h3>
<ul>
<li>Use two queues to store all possible sum and curnode pairs</li>
<li>when reached a leave, check if the corresponding sum is true</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasPathSum</span>(TreeNode root, <span class="keyword">int</span> sum) {</div><div class="line">    <span class="keyword">if</span>(root==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    LinkedList&lt;TreeNode&gt; node = <span class="keyword">new</span> LinkedList&lt;TreeNode&gt;();</div><div class="line">    LinkedList&lt;Integer&gt; value = <span class="keyword">new</span> LinkedList&lt;Integer&gt;();</div><div class="line">    node.offer(root);</div><div class="line">    value.offer(root.val);</div><div class="line">    <span class="keyword">while</span>(!node.isEmpty()){</div><div class="line">        TreeNode cur = node.poll();</div><div class="line">        <span class="keyword">int</span> cursum = value.poll();</div><div class="line">        <span class="keyword">if</span>(cur.left==<span class="keyword">null</span> && cur.right==<span class="keyword">null</span> && cursum==sum){</div><div class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        }</div><div class="line">        <span class="keyword">if</span>(cur.left!=<span class="keyword">null</span>) {</div><div class="line">            node.offer(cur.left);</div><div class="line">            value.offer(cursum+cur.left.val);</div><div class="line">        }</div><div class="line">        <span class="keyword">if</span>(cur.right!=<span class="keyword">null</span>){</div><div class="line">            node.offer(cur.right);</div><div class="line">            value.offer(cursum+cur.right.val);</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;   </div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Path_Sum_II">Path Sum II</h2>
<blockquote>
<p>Given a binary tree and a sum, find all root-to-leaf paths where each path’s sum equals the given sum.<br>For example:<br>Given the below binary tree and sum = 22,</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">              5</div><div class="line">             / <span class="command">\</span></div><div class="line">            4   8</div><div class="line">           /   / <span class="command">\</span></div><div class="line">          11  13  4</div><div class="line">         /  <span class="command">\ </span>   / <span class="command">\</span></div><div class="line">        7    2  5   1</div><div class="line">return</div><div class="line"><span class="special">[</span></div><div class="line">   <span class="special">[</span>5,4,11,2<span class="special">]</span>,</div><div class="line">   <span class="special">[</span>5,8,4,5<span class="special">]</span></div><div class="line"><span class="special">]</span></div></pre></td></tr></table></figure>

<h3 id="DFS_Solution">DFS Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> ArrayList&lt;LinkedList&lt;Integer&gt;&gt; <span class="title">pathSum</span>(TreeNode root, <span class="keyword">int</span> sum) {</div><div class="line">    ArrayList&lt;LinkedList&lt;Integer&gt;&gt; res = <span class="keyword">new</span> ArrayList&lt;LinkedList&lt;Integer&gt;&gt;();</div><div class="line">    <span class="keyword">if</span>(root==<span class="keyword">null</span>) <span class="keyword">return</span> res;</div><div class="line">    LinkedList&lt;Integer&gt; pathlist = <span class="keyword">new</span> LinkedList&lt;Integer&gt;();</div><div class="line">    dfs(root, sum, pathlist, res);</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span>(TreeNode r, <span class="keyword">int</span> sum, LinkedList&lt;Integer&gt; pathlist, ArrayList&lt;LinkedList&lt;Integer&gt;&gt; res){</div><div class="line">    pathlist.add(r.val);</div><div class="line">    <span class="keyword">int</span> curvalue = sum-r.val;</div><div class="line">    <span class="keyword">if</span>(r.left==<span class="keyword">null</span> && r.right==<span class="keyword">null</span> && curvalue==<span class="number">0</span>) {res.add(<span class="keyword">new</span> LinkedList&lt;Integer&gt;(pathlist));}</div><div class="line">    <span class="keyword">if</span>(r.left!=<span class="keyword">null</span>) dfs(r.left, curvalue, pathlist, res);</div><div class="line">    <span class="keyword">if</span>(r.right!=<span class="keyword">null</span>) dfs(r.right, curvalue, pathlist, res);</div><div class="line">    pathlist.remove(pathlist.size()-<span class="number">1</span>); <span class="comment">//**</span></div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Binary_Tree_Maximum_Path_Sum">Binary Tree Maximum Path Sum</h2>
<blockquote>
<p>Given a binary tree, find the maximum path sum.<br>The path may start and end at any node in the tree.<br>For example:<br>Given the below binary tree,</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">       <span class="number">1</span></div><div class="line">      / \</div><div class="line">     <span class="number">2</span>   <span class="number">3</span></div><div class="line"><span class="keyword">Return</span> <span class="number">6</span>.</div></pre></td></tr></table></figure>

<h3 id="DFS_+_DP_Solution">DFS + DP Solution</h3>
<ul>
<li>Return each time the max single path starting from current r</li>
<li>update maxsofar among single/arc of current r </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxPathSum</span>(TreeNode root) {</div><div class="line">    <span class="keyword">int</span>[] maxsofar = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">1</span>];</div><div class="line">    maxsofar[<span class="number">0</span>]= Integer.MIN_VALUE;</div><div class="line">    dfs(root,maxsofar);</div><div class="line">    <span class="keyword">return</span> maxsofar[<span class="number">0</span>];</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">dfs</span>(TreeNode r, <span class="keyword">int</span>[] maxsofar){</div><div class="line">    <span class="keyword">if</span>(r==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> left = dfs(r.left, maxsofar);</div><div class="line">    <span class="keyword">int</span> right = dfs(r.right, maxsofar);</div><div class="line">    <span class="keyword">int</span> arc = left + right + r.val;</div><div class="line">    <span class="keyword">int</span> single = Math.max(r.val, Math.max(left, right)+r.val);</div><div class="line">    maxsofar[<span class="number">0</span>] = Math.max(maxsofar[<span class="number">0</span>], Math.max(single,arc));</div><div class="line">    <span class="keyword">return</span> single;</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Minimum_Path_Sum">Minimum Path Sum</h2>
<blockquote>
<p>Given a m x n grid filled with non-negative numbers, find a path from top left to bottom right which minimizes the sum of all numbers along its path.<br>Note: You can only move either down or right at any point in time.</p>
</blockquote>
<h3 id="DP_Solution">DP Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minPathSum</span>(<span class="keyword">int</span>[][] grid) {</div><div class="line">    <span class="keyword">int</span> rows = grid.length;</div><div class="line">    <span class="keyword">int</span> cols = grid[<span class="number">0</span>].length;</div><div class="line">    <span class="keyword">int</span> sum[][] = <span class="keyword">new</span> <span class="keyword">int</span>[rows][cols];</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;rows;i++){</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;cols;j++){</div><div class="line">            <span class="keyword">if</span>(i==<span class="number">0</span>&&j==<span class="number">0</span>){</div><div class="line">                sum[i][j] = grid[i][j];</div><div class="line">            }</div><div class="line">            <span class="keyword">if</span>(i==<span class="number">0</span>&&j!=<span class="number">0</span>){</div><div class="line">                sum[i][j] = sum[i][j-<span class="number">1</span>]+grid[i][j];</div><div class="line">            }</div><div class="line">            <span class="keyword">if</span>(i!=<span class="number">0</span>&&j==<span class="number">0</span>){</div><div class="line">                sum[i][j] = sum[i-<span class="number">1</span>][j]+grid[i][j];</div><div class="line">            }</div><div class="line">            <span class="keyword">if</span>(i!=<span class="number">0</span>&&j!=<span class="number">0</span>){</div><div class="line">                <span class="keyword">int</span> a = sum[i-<span class="number">1</span>][j]+grid[i][j];</div><div class="line">                <span class="keyword">int</span> b = sum[i][j-<span class="number">1</span>]+grid[i][j];</div><div class="line">                sum[i][j] = Math.min(a,b);</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> sum[rows-<span class="number">1</span>][cols-<span class="number">1</span>];</div><div class="line">}</div></pre></td></tr></table></figure>

<iframe width="100%" height="160" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A%2F%2Fsoundcloud.com%2Flanarey%2Flana-del-rey-lucky-ones-demo&auto_play=false&hide_related=true&show_comments=true&show_user=true&show_reposts=false&visual=true"></iframe>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="Path_Sum">Path Sum</h2>
<blockquote>
<p>Given a binary tree and a sum, determine if the tree has a root-to-leaf path such that adding up all the values along the path equals the given sum.<br>For example:</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Given the below binary tree and sum = 22,</div><div class="line">              5</div><div class="line">             / <span class="command">\</span></div><div class="line">            4   8</div><div class="line">           /   / <span class="command">\</span></div><div class="line">          11  13  4</div><div class="line">         /  <span class="command">\ </span>     <span class="command">\</span></div><div class="line">        7    2      1</div></pre></td></tr></table></figure>

<p>return true, as there exist a root-to-leaf path 5-&gt;4-&gt;11-&gt;2 which sum is 22.</p>
]]>
    
    </summary>
    
      <category term="Tree" scheme="http://sunbingjie.tk/tags/Tree/"/>
    
      <category term="Recursion" scheme="http://sunbingjie.tk/tags/Recursion/"/>
    
      <category term="DP" scheme="http://sunbingjie.tk/tags/DP/"/>
    
      <category term="刷题" scheme="http://sunbingjie.tk/categories/%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Letter Combinations of a Phone Number, Single Number, Single Number II, Decode Ways, Triangle]]></title>
    <link href="http://sunbingjie.tk/2015/04/18/4.12/"/>
    <id>http://sunbingjie.tk/2015/04/18/4.12/</id>
    <published>2015-04-18T21:55:48.000Z</published>
    <updated>2015-04-18T21:55:48.000Z</updated>
    <content type="html"><![CDATA[<h2 id="Letter_Combinations_of_a_Phone_Number">Letter Combinations of a Phone Number</h2>
<blockquote>
<p>Given a digit string, return all possible letter combinations that the number could represent.<br>A mapping of digit to letters (just like on the telephone buttons) is given below.<br><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/7/73/Telephone-keypad2.svg/200px-Telephone-keypad2.svg.png" alt=""><br>Input:Digit string “23”<br>Output: [“ad”, “ae”, “af”, “bd”, “be”, “bf”, “cd”, “ce”, “cf”].</p>
</blockquote>
<a id="more"></a>
<h3 id="Iterative_Solution">Iterative Solution</h3>
<ul>
<li>Simple BFS, use a Queue and store all combinations in a list</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> LinkedList&lt;String&gt; <span class="title">letterCombinations</span>(String digits) {</div><div class="line">    String map[] = {<span class="string">""</span>,<span class="string">""</span>,<span class="string">"abc"</span>,<span class="string">"def"</span>,<span class="string">"ghi"</span>,<span class="string">"jkl"</span>,<span class="string">"mno"</span>,<span class="string">"pqrs"</span>,<span class="string">"tuv"</span>,<span class="string">"wxyz"</span>};</div><div class="line">    LinkedList&lt;String&gt; list = <span class="keyword">new</span> LinkedList&lt;String&gt;();</div><div class="line">    <span class="keyword">if</span>(digits==<span class="keyword">null</span> || digits.length()==<span class="number">0</span>) <span class="keyword">return</span> list;</div><div class="line">    list.add(<span class="string">""</span>);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;digits.length();i++){</div><div class="line">        <span class="keyword">int</span> num = digits.charAt(i) - <span class="string">'0'</span>;</div><div class="line">        <span class="keyword">int</span> size = list.size();</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;size;j++){</div><div class="line">            String tmp = list.poll();</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;map[num].length();k++){</div><div class="line">                list.add(tmp + map[num].charAt(k));</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> list;</div><div class="line">}</div></pre></td></tr></table></figure>



<h3 id="DFS_Solution">DFS Solution</h3>
<ul>
<li>Template DFS</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> ArrayList&lt;String&gt; <span class="title">letterCombinations</span>(String digits) {</div><div class="line">    String map[] = {<span class="string">""</span>,<span class="string">""</span>,<span class="string">"abc"</span>,<span class="string">"def"</span>,<span class="string">"ghi"</span>,<span class="string">"jkl"</span>,<span class="string">"mno"</span>,<span class="string">"pqrs"</span>,<span class="string">"tuv"</span>,<span class="string">"wxyz"</span>};</div><div class="line">    StringBuilder tmp = <span class="keyword">new</span> StringBuilder();</div><div class="line">    ArrayList&lt;String&gt; res = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">    <span class="keyword">if</span>(digits==<span class="keyword">null</span> || digits.length()==<span class="number">0</span>) <span class="keyword">return</span> res; <span class="comment">//[""] is not []...</span></div><div class="line">    dfs(digits, map, tmp, res, <span class="number">0</span>);</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">}</div><div class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span>(String digits, String[] map, StringBuilder tmp, ArrayList&lt;String&gt; res, <span class="keyword">int</span> height){</div><div class="line">    <span class="keyword">if</span>(height == digits.length()){</div><div class="line">        res.add(tmp.toString());</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    }</div><div class="line"> </div><div class="line">    <span class="keyword">int</span> num = digits.charAt(height)-<span class="string">'0'</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;map[num].length();i++){</div><div class="line">         tmp.append(map[num].charAt(i));</div><div class="line">         dfs(digits, map, tmp, res, height+<span class="number">1</span>);</div><div class="line">         tmp.deleteCharAt(tmp.length()-<span class="number">1</span>); <span class="comment">//delete when backtracking..</span></div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Single_Number">Single Number</h2>
<blockquote>
<p>Given an array of integers, every element appears twice except for one. Find that single one.<br>Note:<br>Your algorithm should have a linear runtime complexity. Could you implement it without using extra memory?</p>
</blockquote>
<h3 id="O(n)_Memory_O(n)_Time_Solution">O(n) Memory O(n) Time Solution</h3>
<p>LTE? With an instantiated Iterator I can pass the OJ…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">singleNumber</span>(<span class="keyword">int</span>[] A) {</div><div class="line">    HashSet&lt;Integer&gt; set = <span class="keyword">new</span> HashSet&lt;Integer&gt;();</div><div class="line">    <span class="keyword">for</span>(Integer i:A){</div><div class="line">        <span class="keyword">if</span>(set.contains(i)) set.remove(i);</div><div class="line">        <span class="keyword">else</span> set.add(i);</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> set.iterator().next();</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="XOR_Solution">XOR Solution</h3>
<p><a href="http://wezly.iteye.com/blog/1120823" target="_blank" rel="external">Similar Problem</a></p>
<ul>
<li><p>n+1 elements in range n, find the duplicate. take XOR between 1 to n, and the given array.</p>
</li>
<li><p>Here we use the property x^x=0，x^0=x</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">singleNumber</span>(<span class="keyword">int</span>[] A) {</div><div class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(Integer i:A){</div><div class="line">        res ^= i;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Single_Number_II">Single Number II</h2>
<blockquote>
<p>Given an array of integers, every element appears three times except for one. Find that single one.<br>Note:<br>Your algorithm should have a linear runtime complexity. Could you implement it without using extra memory?</p>
</blockquote>
<h3 id="Solution">Solution</h3>
<ul>
<li>count 1 in each bit position among all A numbers.</li>
<li>if a count can be divided by 3, then it does not contain single number</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">singleNumber</span>(<span class="keyword">int</span>[] A) {</div><div class="line">    <span class="keyword">int</span>[] count = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">32</span>];</div><div class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">32</span>;i++){</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;A.length;j++){</div><div class="line">            <span class="keyword">if</span>((A[j]&gt;&gt;i & <span class="number">1</span>)==<span class="number">1</span>){</div><div class="line">                count[i]+=<span class="number">1</span>; <span class="comment">//increment bit bin</span></div><div class="line">            }</div><div class="line">        }</div><div class="line">        res |= count[i]%<span class="number">3</span> &lt;&lt; i; <span class="comment">//recover single number</span></div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Decode_Ways">Decode Ways</h2>
<blockquote>
<p>A message containing letters from A-Z is being encoded to numbers using the following mapping:</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="string">'A'</span> -&gt; <span class="number">1</span></div><div class="line"><span class="string">'B'</span> -&gt; <span class="number">2</span></div><div class="line"><span class="keyword">...</span></div><div class="line"><span class="string">'Z'</span> -&gt; <span class="number">26</span></div></pre></td></tr></table></figure>

<p>Given an encoded message containing digits, determine the total number of ways to decode it.<br>For example,<br>Given encoded message “12”, it could be decoded as “AB” (1 2) or “L” (12).<br>The number of ways decoding “12” is 2.</p>
<h3 id="Recursive_Solution">Recursive Solution</h3>
<ul>
<li>quite straight forward…? LTE..</li>
<li>when at i, we can decode i separately , or decode i,i+1 as a whole</li>
<li>checking conditions: 1X or &lt;26, then we can return substr(1) + substr(2). </li>
<li>only when len==2 under this case, s.len would be 0, and return 1</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numDecodings</span>(String s) {</div><div class="line">    <span class="keyword">if</span>(s.length() == <span class="number">0</span> || s.length() == <span class="number">1</span> && s.charAt(<span class="number">0</span>) != <span class="string">'0'</span>)</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span>(s.charAt(<span class="number">0</span>) == <span class="string">'0'</span>)</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    <span class="keyword">if</span>(s.charAt(<span class="number">0</span>) == <span class="string">'1'</span> || (s.charAt(<span class="number">0</span>) == <span class="string">'2'</span> && s.charAt(<span class="number">1</span>) &lt;= <span class="string">'6'</span>))</div><div class="line">        <span class="keyword">return</span> numDecodings(s.substring(<span class="number">1</span>)) + numDecodings(s.substring(<span class="number">2</span>));</div><div class="line">    <span class="keyword">return</span> numDecodings(s.substring(<span class="number">1</span>));</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="DP_Solution">DP Solution</h3>
<p>＋ ways[i] represents the # of decoding from i to end</p>
<ul>
<li>given s[i] is not ‘0’, we can always decode s in ways[i+1] ways, viewing s[i] as a separate code, ways[i] = ways[i+1]</li>
<li>check if i,i+1 forms a valid code, ways[i] = ways[i+1] + ways[i+2] </li>
<li>if s[i] is ‘0’, ways[i] is set to 0</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numDecodings</span>(String s) {</div><div class="line">    <span class="keyword">if</span>(s.length() == <span class="number">0</span> || s==<span class="keyword">null</span> || s.charAt(<span class="number">0</span>) == <span class="string">'0'</span>)</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span>[] ways = <span class="keyword">new</span> <span class="keyword">int</span>[s.length()+<span class="number">1</span>];</div><div class="line">    ways[s.length()] = <span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=s.length()-<span class="number">1</span>; i&gt;=<span class="number">0</span>;i--){</div><div class="line">        <span class="keyword">if</span>(s.charAt(i) == <span class="string">'0'</span>) ways[i]=<span class="number">0</span>;</div><div class="line">        <span class="keyword">else</span> ways[i] = ways[i+<span class="number">1</span>];</div><div class="line">        <span class="keyword">if</span>(i+<span class="number">1</span>&lt;s.length() && (s.charAt(i) == <span class="string">'1'</span> || s.charAt(i) == <span class="string">'2'</span> && s.charAt(i+<span class="number">1</span>) &lt;= <span class="string">'6'</span>))</div><div class="line">            ways[i] = ways[i] + ways[i+<span class="number">2</span>];</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> ways[<span class="number">0</span>];</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="DP_forward">DP forward</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numDecodings</span>(String s) {</div><div class="line">    <span class="keyword">int</span>[] ways = <span class="keyword">new</span> <span class="keyword">int</span>[s.length()+<span class="number">1</span>];</div><div class="line">    <span class="keyword">if</span>(s==<span class="keyword">null</span> || s.length()==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    <span class="keyword">if</span>(s.charAt(<span class="number">0</span>)==<span class="string">'0'</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    ways[<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">    ways[<span class="number">1</span>] = <span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=s.length();i++){</div><div class="line">        <span class="keyword">if</span>(s.charAt(i-<span class="number">1</span>)==<span class="string">'0'</span>){</div><div class="line">            <span class="keyword">if</span>(s.charAt(i-<span class="number">2</span>)==<span class="string">'1'</span> ||s.charAt(i-<span class="number">2</span>)==<span class="string">'2'</span>){ways[i]=ways[i-<span class="number">2</span>]; }</div><div class="line">            <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        }</div><div class="line">        <span class="keyword">else</span>{</div><div class="line">            <span class="keyword">if</span>(s.charAt(i-<span class="number">1</span>)&lt;=<span class="string">'6'</span> && s.charAt(i-<span class="number">2</span>)==<span class="string">'2'</span> || s.charAt(i-<span class="number">2</span>)==<span class="string">'1'</span>){</div><div class="line">                ways[i]=ways[i-<span class="number">1</span>]+ways[i-<span class="number">2</span>];</div><div class="line">            }   </div><div class="line">            <span class="keyword">else</span> ways[i]=ways[i-<span class="number">1</span>];</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> ways[s.length()];</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="O(1)_Space_DP">O(1) Space DP</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numDecodings</span>(String s) {</div><div class="line">    <span class="keyword">if</span>(s==<span class="keyword">null</span> || s.length()==<span class="number">0</span> || s.charAt(<span class="number">0</span>)==<span class="string">'0'</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> twopre = <span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> onepre = <span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> cur = <span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;s.length();i++){</div><div class="line">        <span class="keyword">if</span>(s.charAt(i)==<span class="string">'0'</span>){</div><div class="line">            <span class="keyword">if</span>(s.charAt(i-<span class="number">1</span>)==<span class="string">'1'</span> ||s.charAt(i-<span class="number">1</span>)==<span class="string">'2'</span>){cur = twopre; }</div><div class="line">            <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        }</div><div class="line">        <span class="keyword">else</span>{</div><div class="line">            <span class="keyword">if</span>(s.charAt(i)&lt;=<span class="string">'6'</span> && s.charAt(i-<span class="number">1</span>)==<span class="string">'2'</span> || s.charAt(i-<span class="number">1</span>)==<span class="string">'1'</span>){</div><div class="line">                cur = twopre + onepre;</div><div class="line">            }   </div><div class="line">            <span class="keyword">else</span> cur=onepre;</div><div class="line">        }</div><div class="line">        twopre=onepre;</div><div class="line">        onepre=cur;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> cur;</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Triangle">Triangle</h2>
<blockquote>
<p>Given a triangle, find the minimum path sum from top to bottom. Each step you may move to adjacent numbers on the row below<br>For example, given the following triangle</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[</div><div class="line">     [<span class="number">2</span>],</div><div class="line">    [<span class="number">3</span>,<span class="number">4</span>],</div><div class="line">   [<span class="number">6</span>,<span class="number">5</span>,<span class="number">7</span>],</div><div class="line">  [<span class="number">4</span>,<span class="number">1</span>,<span class="number">8</span>,<span class="number">3</span>]</div><div class="line">]</div></pre></td></tr></table></figure>

<p>The minimum path sum from top to bottom is 11 (i.e., 2 + 3 + 5 + 1 = 11).<br>Note:<br>Bonus point if you are able to do this using only O(n) extra space, where n is the total number of rows in the triangle.</p>
<h3 id="Inplace_DP_Solution">Inplace DP Solution</h3>
<ul>
<li>start from second to end level, change each element to the smaller sum with lower level’s two adjacent elements</li>
<li>the top one will be the shortest path</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minimumTotal</span>(List&lt;List&lt;Integer&gt;&gt; triangle) {</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=triangle.size()-<span class="number">2</span>; i&gt;=<span class="number">0</span>; i--){</div><div class="line">        List&lt;Integer&gt; tmp = triangle.get(i);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;tmp.size();j++){</div><div class="line">            tmp.set(j, tmp.get(j) + Math.min(triangle.get(i+<span class="number">1</span>).get(j),triangle.get(i+<span class="number">1</span>).get(j+<span class="number">1</span>)));</div><div class="line">        }    </div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> triangle.get(<span class="number">0</span>).get(<span class="number">0</span>);</div><div class="line">}</div></pre></td></tr></table></figure>

<iframe width="100%" height="160" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A%2F%2Fsoundcloud.com%2Finterscope%2Flana-del-rey-video-games&auto_play=false&hide_related=true&show_comments=true&show_user=true&show_reposts=false&visual=true"></iframe>]]></content>
    <summary type="html">
    <![CDATA[<h2 id="Letter_Combinations_of_a_Phone_Number">Letter Combinations of a Phone Number</h2>
<blockquote>
<p>Given a digit string, return all possible letter combinations that the number could represent.<br>A mapping of digit to letters (just like on the telephone buttons) is given below.<br><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/7/73/Telephone-keypad2.svg/200px-Telephone-keypad2.svg.png" alt=""><br>Input:Digit string “23”<br>Output: [“ad”, “ae”, “af”, “bd”, “be”, “bf”, “cd”, “ce”, “cf”].</p>
</blockquote>
]]>
    
    </summary>
    
      <category term="DFS" scheme="http://sunbingjie.tk/tags/DFS/"/>
    
      <category term="Recursion" scheme="http://sunbingjie.tk/tags/Recursion/"/>
    
      <category term="Bit Manipulation" scheme="http://sunbingjie.tk/tags/Bit-Manipulation/"/>
    
      <category term="刷题" scheme="http://sunbingjie.tk/categories/%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Validate Binary Search Tree， Unique Binary Search Trees, Unique Binary Search Trees II, Binary Tree Preorder Traversal,Binary Tree Inorder Traversal ,Binary Tree Postorder Traversal, Binary Tree Zigzag Level Order Traversal, Binary Search Tree Iterator]]></title>
    <link href="http://sunbingjie.tk/2015/04/16/4.10/"/>
    <id>http://sunbingjie.tk/2015/04/16/4.10/</id>
    <published>2015-04-16T05:07:47.000Z</published>
    <updated>2015-04-16T05:07:47.000Z</updated>
    <content type="html"><![CDATA[<h2 id="Validate_Binary_Search_Tree">Validate Binary Search Tree</h2>
<blockquote>
<p>Given a binary tree, determine if it is a valid binary search tree (BST).<br>Assume a BST is defined as follows:<br>The left subtree of a node contains only nodes with keys less than the node’s key.<br>The right subtree of a node contains only nodes with keys greater than the node’s key.<br>Both the left and right subtrees must also be binary search trees.</p>
</blockquote>
<h3 id="Brute_force_Solution">Brute force Solution</h3>
<p>Inorder traversal, then compare each value…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValidBST</span>(TreeNode root) {</div><div class="line">    <span class="keyword">if</span>(root==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    LinkedList&lt;Integer&gt; p = <span class="keyword">new</span> LinkedList&lt;Integer&gt;();</div><div class="line">    inorder(root, p);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j =<span class="number">0</span>;j&lt; p.size() - <span class="number">1</span>;j++) {</div><div class="line">        <span class="keyword">if</span>(p.get(j)&gt;=p.get(j+<span class="number">1</span>))</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">inorder</span>(TreeNode r, LinkedList&lt;Integer&gt; p){</div><div class="line">    <span class="keyword">if</span>(r==<span class="keyword">null</span>) <span class="keyword">return</span>;</div><div class="line">    inorder(r.left,p);</div><div class="line">    p.add(r.val);</div><div class="line">    inorder(r.right,p);</div><div class="line">}</div></pre></td></tr></table></figure>

<p>Or use static variable to store the previous val:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> pre = Integer.MIN_VALUE; </div><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValidBST</span>(TreeNode root) {</div><div class="line">    <span class="keyword">if</span>(root==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    <span class="keyword">if</span>(!isValidBST(root.left)) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    <span class="keyword">if</span>(root.val&lt;=pre) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    System.out.println(pre);</div><div class="line">    pre=root.val;</div><div class="line">    <span class="keyword">if</span>(!isValidBST(root.right)) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="Recursive/MinMax_Solution">Recursive/MinMax Solution</h3>
<p>At each node we must satisty</p>
<ul>
<li>left subtree max value must not exceed cur.val</li>
<li>right subtree min value must not be lower than cur.val</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValidBST</span>(TreeNode root) {</div><div class="line">    <span class="keyword">return</span> dfs(root, (<span class="keyword">long</span>)Integer.MIN_VALUE-<span class="number">1</span>,(<span class="keyword">long</span>)Integer.MAX_VALUE+<span class="number">1</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">dfs</span>(TreeNode r,<span class="keyword">long</span> minv, <span class="keyword">long</span> maxv){</div><div class="line">    <span class="keyword">if</span>(r==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    <span class="keyword">if</span>(r.val&gt;=maxv ||r.val&lt;=minv) <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    <span class="keyword">return</span>  dfs(r.left, minv, r.val) && dfs(r.right, r.val, maxv);</div><div class="line">}</div></pre></td></tr></table></figure>

<h2 id="Unique_Binary_Search_Trees">Unique Binary Search Trees</h2>
<blockquote>
<p>Given n, how many structurally unique BST’s (binary search trees) that store values 1…n?<br>For example,<br>Given n = 3, there are a total of 5 unique BST’s.</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">1         3     3      2      1</div><div class="line"> <span class="command">\ </span>      /     /      / <span class="command">\ </span>     <span class="command">\</span></div><div class="line">  3     2     1      1   3      2</div><div class="line"> /     /       <span class="command">\ </span>                <span class="command">\</span></div><div class="line">2     1         2                 3</div></pre></td></tr></table></figure>

<h3 id="DP_Solution">DP Solution</h3>
<ul>
<li>Define c[i] as the number of unique binary tree possibly generated with [0….i]</li>
<li>A tree with i as its root, left subtree is consist of [1…i-1], right subtree is consist of [i+1…n]</li>
<li>c[0] = 0 ; c[1]=1 ; c[2] = c[0]<em>c[1] //1 as root + c[1]</em>c[0] //0 as root; c[3] = c[0] <em> c[2] //1 as root + c[1] </em> c[1] //2 as root + c[2] * c[0] //3 as root</li>
<li>Ct+1 += Ci*Ct-i(0&lt;= i &lt;= t)</li>
<li>Ct += Ci*t-1-i(0&lt;=i&lt;=t-1, 1&lt;=t&lt;=n)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numTrees</span>(<span class="keyword">int</span> n) {</div><div class="line">        <span class="keyword">if</span>(n == <span class="number">0</span>||n == <span class="number">1</span>)</div><div class="line">            <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">        <span class="keyword">int</span>[] C = <span class="keyword">new</span> <span class="keyword">int</span>[n+<span class="number">1</span>];</div><div class="line">        C[<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=n;t++){  </div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=t-<span class="number">1</span>;i++){  </div><div class="line">            C[t] += C[i]*C[t-<span class="number">1</span>-i];  </div><div class="line">        }  </div><div class="line">    }</div><div class="line">        <span class="keyword">return</span> C[n];</div><div class="line">    }</div></pre></td></tr></table></figure>

<h2 id="Unique_Binary_Search_Trees_II">Unique Binary Search Trees II</h2>
<blockquote>
<p>Given n, generate all structurally unique BST’s (binary search trees) that store values 1…n.<br>For example,<br>Given n = 3, your program should return all 5 unique BST’s shown below.</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">1         3     3      2      1</div><div class="line"> <span class="command">\ </span>      /     /      / <span class="command">\ </span>     <span class="command">\</span></div><div class="line">  3     2     1      1   3      2</div><div class="line"> /     /       <span class="command">\ </span>                <span class="command">\</span></div><div class="line">2     1         2                 3</div></pre></td></tr></table></figure>

<h3 id="DFS_Solution"><a href="http://www.cnblogs.com/springfor/p/3884029.html" target="_blank" rel="external">DFS Solution</a></h3>
<p>Similar to I, we pick (1…n) as root, recursivly get all left and right subtrees.<br>We pick one from left subtree and one from right subtree, attach them to current root and return all the possibilities.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> ArrayList&lt;TreeNode&gt; <span class="title">generateTrees</span>(<span class="keyword">int</span> n) {</div><div class="line">    <span class="keyword">return</span> buildTrees(<span class="number">1</span>,n);</div><div class="line">    </div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">public</span> ArrayList&lt;TreeNode&gt; <span class="title">buildTrees</span>(<span class="keyword">int</span> min, <span class="keyword">int</span> max){</div><div class="line">    ArrayList&lt;TreeNode&gt; res = <span class="keyword">new</span> ArrayList&lt;TreeNode&gt;();</div><div class="line">    <span class="keyword">if</span>(min&gt;max){res.add(<span class="keyword">null</span>); <span class="keyword">return</span> res;}</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=min;i&lt;=max;i++){</div><div class="line">        ArrayList&lt;TreeNode&gt; l = buildTrees(min,i-<span class="number">1</span>);</div><div class="line">        ArrayList&lt;TreeNode&gt; r = buildTrees(i+<span class="number">1</span>,max);</div><div class="line">        <span class="keyword">for</span>(TreeNode j: l){</div><div class="line">            <span class="keyword">for</span>(TreeNode k:r){</div><div class="line">                TreeNode root =  <span class="keyword">new</span> TreeNode(i);</div><div class="line">                root.left = j;</div><div class="line">                root.right = k;</div><div class="line">                res.add(root);</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Binary_Tree_Preorder_Traversal">Binary Tree Preorder Traversal</h2>
<blockquote>
<p>Given a binary tree, return the preorder traversal of its nodes’ values.<br>For example:<br>Given binary tree {1,#,2,3},</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">   <span class="number">1</span></div><div class="line">    \</div><div class="line">     <span class="number">2</span></div><div class="line">    /</div><div class="line">   <span class="number">3</span></div><div class="line"><span class="keyword">return</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].</div></pre></td></tr></table></figure>

<h3 id="Recursive_Solution">Recursive Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">preorderTraversal</span>(TreeNode root) {</div><div class="line">    ArrayList&lt;Integer&gt; res = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line">    preorder(root, res);</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">preorder</span>(TreeNode n, ArrayList&lt;Integer&gt; res){</div><div class="line">    <span class="keyword">if</span>(n==<span class="keyword">null</span>) <span class="keyword">return</span>;</div><div class="line">    res.add(n.val);</div><div class="line">    preorder(n.left,res);</div><div class="line">    preorder(n.right,res);</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="Iterative_Solution">Iterative Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">preorderTraversal</span>(TreeNode root) {</div><div class="line">    ArrayList&lt;Integer&gt; res = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line">    Stack&lt;TreeNode&gt; stk =<span class="keyword">new</span> Stack&lt;TreeNode&gt;();</div><div class="line">    <span class="keyword">if</span>(root==<span class="keyword">null</span>) <span class="keyword">return</span> res; <span class="comment">//别忘了这句...</span></div><div class="line">    stk.push(root);</div><div class="line">    <span class="keyword">while</span>(!stk.isEmpty()){</div><div class="line">        TreeNode tmp = stk.pop();</div><div class="line">        res.add(tmp.val);</div><div class="line">        <span class="keyword">if</span>(tmp.right!=<span class="keyword">null</span>) stk.push(tmp.right);</div><div class="line">        <span class="keyword">if</span>(tmp.left!=<span class="keyword">null</span>) stk.push(tmp.left);</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Binary_Tree_Inorder_Traversal">Binary Tree Inorder Traversal</h2>
<blockquote>
<p>Given a binary tree, return the inorder traversal of its nodes’ values.<br>For example:<br>Given binary tree {1,#,2,3},</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">   <span class="number">1</span></div><div class="line">    \</div><div class="line">     <span class="number">2</span></div><div class="line">    /</div><div class="line">   <span class="number">3</span></div><div class="line"><span class="keyword">return</span> [<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>].</div></pre></td></tr></table></figure>

<h3 id="Iterative_Solution-1">Iterative Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title">inorderTraversal</span>(TreeNode root) {</div><div class="line">        ArrayList&lt;Integer&gt; res= <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line">        Stack&lt;TreeNode&gt; stk=<span class="keyword">new</span> Stack&lt;TreeNode&gt;();</div><div class="line">        <span class="keyword">if</span>(root==<span class="keyword">null</span>) <span class="keyword">return</span> res;</div><div class="line">        stk.push(root);</div><div class="line">        <span class="keyword">while</span>(!stk.isEmpty()){</div><div class="line">            TreeNode tmp = stk.pop();</div><div class="line">            <span class="keyword">if</span>(tmp == <span class="keyword">null</span>){</div><div class="line">                res.add(stk.pop().val);</div><div class="line">            }</div><div class="line">            <span class="keyword">else</span>{</div><div class="line">                <span class="keyword">if</span>(tmp.right!=<span class="keyword">null</span>){stk.push(tmp.right);}</div><div class="line">                stk.push(tmp);</div><div class="line">                stk.push(<span class="keyword">null</span>);</div><div class="line">                <span class="keyword">if</span>(tmp.left!=<span class="keyword">null</span>){stk.push(tmp.left);}</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> res;</div></pre></td></tr></table></figure>

<hr>
<h2 id="Binary_Tree_Postorder_Traversal">Binary Tree Postorder Traversal</h2>
<blockquote>
<p>Given a binary tree, return the postorder traversal of its nodes’ values.<br>For example:<br>Given binary tree {1,#,2,3},</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">   <span class="number">1</span></div><div class="line">    \</div><div class="line">     <span class="number">2</span></div><div class="line">    /</div><div class="line">   <span class="number">3</span></div><div class="line"><span class="keyword">return</span> [<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>].</div></pre></td></tr></table></figure>

<h3 id="Recursive_Solution-1">Recursive Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">postorderTraversal</span>(TreeNode root) {</div><div class="line">    ArrayList&lt;Integer&gt; res = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line">    postorder(root, res);</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">postorder</span>(TreeNode n, ArrayList&lt;Integer&gt; res){</div><div class="line">    <span class="keyword">if</span>(n==<span class="keyword">null</span>) <span class="keyword">return</span>;</div><div class="line">    postorder(n.left,res);</div><div class="line">    postorder(n.right,res);</div><div class="line">    res.add(n.val);</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="Iterative_Solution-1">Iterative Solution</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">postorderTraversal</span>(TreeNode root) {</div><div class="line">    ArrayList&lt;Integer&gt; res = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line">    Stack&lt;TreeNode&gt; stk =<span class="keyword">new</span> Stack&lt;TreeNode&gt;();</div><div class="line">    <span class="keyword">if</span>(root==<span class="keyword">null</span>) <span class="keyword">return</span> res; </div><div class="line">    stk.push(root);</div><div class="line">    <span class="keyword">while</span>(!stk.isEmpty()){</div><div class="line">        TreeNode tmp = stk.pop();</div><div class="line">        <span class="keyword">if</span>(tmp==<span class="keyword">null</span>) res.add(stk.pop().val);</div><div class="line">        <span class="keyword">else</span>{</div><div class="line">            stk.push(tmp);</div><div class="line">            stk.push(<span class="keyword">null</span>);</div><div class="line">            <span class="keyword">if</span>(tmp.right!=<span class="keyword">null</span>) stk.push(tmp.right);</div><div class="line">            <span class="keyword">if</span>(tmp.left!=<span class="keyword">null</span>) stk.push(tmp.left);</div><div class="line">        }</div><div class="line">    }        </div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">}</div></pre></td></tr></table></figure>

<hr>
<h2 id="Binary_Tree_Zigzag_Level_Order_Traversal">Binary Tree Zigzag Level Order Traversal</h2>
<blockquote>
<p>Given a binary tree, return the zigzag level order traversal of its nodes’ values. (ie, from left to right, then right to left for the next level and alternate between).<br>For example:</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">Given binary tree {<span class="number">3</span>,<span class="number">9</span>,<span class="number">20</span>,<span class="comment">#,#,15,7},</span></div><div class="line">    <span class="number">3</span></div><div class="line">   / \</div><div class="line">  <span class="number">9</span>  <span class="number">20</span></div><div class="line">    /  \</div><div class="line">   <span class="number">15</span>   <span class="number">7</span></div><div class="line"><span class="command">return</span> <span class="keyword">its</span> zigzag level order traversal <span class="keyword">as</span>:</div><div class="line">[</div><div class="line">  [<span class="number">3</span>],</div><div class="line">  [<span class="number">20</span>,<span class="number">9</span>],</div><div class="line">  [<span class="number">15</span>,<span class="number">7</span>]</div><div class="line">]</div></pre></td></tr></table></figure>

<h3 id="Recursive_Solution-1">Recursive Solution</h3>
<ul>
<li>Simple DFS, check height%2 each level</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> ArrayList&lt;List&lt;Integer&gt;&gt; <span class="title">zigzagLevelOrder</span>(TreeNode root) {</div><div class="line"> ArrayList&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> ArrayList();</div><div class="line"> <span class="keyword">if</span>(root==<span class="keyword">null</span>) <span class="keyword">return</span> res;</div><div class="line"> dfs(root, res, <span class="number">0</span>);</div><div class="line"> <span class="keyword">return</span> res;</div><div class="line"> }</div><div class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span>(TreeNode r, ArrayList&lt;List&lt;Integer&gt;&gt; res, <span class="keyword">int</span> h){</div><div class="line">    <span class="keyword">if</span>(r==<span class="keyword">null</span>) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">if</span>(h&gt;res.size()-<span class="number">1</span>){</div><div class="line">        res.add(<span class="keyword">new</span> ArrayList&lt;Integer&gt;());</div><div class="line">    }</div><div class="line">    <span class="keyword">if</span>(h%<span class="number">2</span>==<span class="number">1</span>){</div><div class="line">        res.get(h).add(<span class="number">0</span>,r.val);</div><div class="line">    }  </div><div class="line">    <span class="keyword">else</span>{</div><div class="line">        res.get(h).add(r.val);</div><div class="line">    }</div><div class="line">    dfs(r.left, res, h+<span class="number">1</span>);</div><div class="line">    dfs(r.right,res,h+<span class="number">1</span>);</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="Iterative_Solution-1">Iterative Solution</h3>
<ul>
<li>a queue to store nodes in BFS order</li>
<li>a boolean value to decide insert order in each level list</li>
<li>each new level, set poopsite direction, clear list and add to result</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> ArrayList&lt;List&lt;Integer&gt;&gt; <span class="title">zigzagLevelOrder</span>(TreeNode root) {</div><div class="line">  ArrayList&lt;List&lt;Integer&gt;&gt; res = <span class="keyword">new</span> ArrayList();</div><div class="line">  <span class="keyword">if</span>(root==<span class="keyword">null</span>) <span class="keyword">return</span> res;</div><div class="line">  Queue&lt;TreeNode&gt; q = <span class="keyword">new</span> LinkedList&lt;TreeNode&gt;();</div><div class="line">  List&lt;Integer&gt; tmp = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line">  q.offer(root);</div><div class="line">  <span class="keyword">int</span> size = q.size();</div><div class="line">  <span class="keyword">boolean</span> l2r = <span class="keyword">true</span>;</div><div class="line">  <span class="keyword">while</span>(!q.isEmpty()){</div><div class="line">      TreeNode cur = q.poll();</div><div class="line">      size--;</div><div class="line">      <span class="keyword">if</span>(l2r){</div><div class="line">         tmp.add(cur.val);</div><div class="line">         }</div><div class="line">      <span class="keyword">else</span>{</div><div class="line">         tmp.add(<span class="number">0</span>,cur.val);</div><div class="line">      }</div><div class="line">      <span class="keyword">if</span>(cur.left!=<span class="keyword">null</span>) q.offer(cur.left);</div><div class="line">      <span class="keyword">if</span>(cur.right!=<span class="keyword">null</span>) q.offer(cur.right);</div><div class="line">      <span class="keyword">if</span>(size==<span class="number">0</span>){</div><div class="line">          res.add(<span class="keyword">new</span> ArrayList(tmp));</div><div class="line">          l2r=!l2r;</div><div class="line">          tmp.clear();</div><div class="line">          size = q.size();</div><div class="line">      }</div><div class="line">  }</div><div class="line">  <span class="keyword">return</span> res;</div><div class="line">  }</div></pre></td></tr></table></figure>

<hr>
<h2 id="Binary_Search_Tree_Iterator">Binary Search Tree Iterator</h2>
<blockquote>
<p>Implement an iterator over a binary search tree (BST). Your iterator will be initialized with the root node of a BST.<br>Calling next() will return the next smallest number in the BST.<br>Note: next() and hasNext() should run in average O(1) time and uses O(h) memory, where h is the height of the tree.</p>
</blockquote>
<h3 id="Solution">Solution</h3>
<ul>
<li>Use one Array to store the inorder traversal of nodes </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">ArrayDeque&lt;TreeNode&gt; arr;</div><div class="line"><span class="keyword">public</span> <span class="title">BSTIterator</span>(TreeNode root) {</div><div class="line">    arr = <span class="keyword">new</span> ArrayDeque&lt;TreeNode&gt;();</div><div class="line">    inorder(root, arr);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">inorder</span>(TreeNode root, ArrayDeque&lt;TreeNode&gt; arr){</div><div class="line">    <span class="keyword">if</span>(root==<span class="keyword">null</span>) <span class="keyword">return</span>;</div><div class="line">    inorder(root.left, arr);</div><div class="line">    arr.add(root);</div><div class="line">    inorder(root.right,arr);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="javadoc">/**<span class="javadoctag"> @return</span> whether we have a next smallest number */</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span>() {</div><div class="line">    <span class="keyword">return</span> !arr.isEmpty();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="javadoc">/**<span class="javadoctag"> @return</span> the next smallest number */</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">next</span>() {</div><div class="line">    <span class="keyword">if</span>(hasNext()) <span class="keyword">return</span> arr.poll().val;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="O(1)_Time_O(h)_Memory_Solution">O(1) Time O(h) Memory Solution</h3>
<ul>
<li>Dissect inorder into two parts</li>
<li>push root’s all left children into stack</li>
<li>upon calling next(), pop one node and push all right child’s left child into stack </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">Stack&lt;TreeNode&gt; stk;</div><div class="line"><span class="keyword">public</span> <span class="title">BSTIterator</span>(TreeNode root) {</div><div class="line">    stk = <span class="keyword">new</span> Stack&lt;TreeNode&gt;();</div><div class="line">    <span class="keyword">while</span>(root!=<span class="keyword">null</span>){</div><div class="line">        stk.push(root);</div><div class="line">        root=root.left;</div><div class="line">    }</div><div class="line">   </div><div class="line">}</div><div class="line"><span class="javadoc">/**<span class="javadoctag"> @return</span> whether we have a next smallest number */</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span>() {</div><div class="line">    <span class="keyword">return</span> !stk.isEmpty();</div><div class="line">}</div><div class="line"><span class="javadoc">/**<span class="javadoctag"> @return</span> the next smallest number */</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">next</span>() {</div><div class="line">    <span class="keyword">if</span>(!stk.isEmpty())</div><div class="line">        {TreeNode tmp = stk.pop();</div><div class="line">         <span class="keyword">int</span> res=tmp.val;</div><div class="line">         <span class="keyword">if</span>(tmp.right!=<span class="keyword">null</span>){</div><div class="line">             TreeNode node = tmp.right;</div><div class="line">             <span class="keyword">while</span>(node!=<span class="keyword">null</span>){</div><div class="line">                 stk.push(node);</div><div class="line">                 node=node.left;</div><div class="line">             }</div><div class="line">         }</div><div class="line">         <span class="keyword">return</span> res;</div><div class="line">        }</div><div class="line">        <span class="keyword">else</span> <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<iframe width="560" height="315" src="https://www.youtube.com/embed/MYSVMgRr6pw" frameborder="0" allowfullscreen></iframe>]]></content>
    <summary type="html">
    <![CDATA[<h2 id="Validate_Binary_Search_Tree">Validate Binary Search Tree</h2>
<blockquote>
<p>Given a binary tree, determine if it is a valid binary]]>
    </summary>
    
      <category term="Tree" scheme="http://sunbingjie.tk/tags/Tree/"/>
    
      <category term="Recursion" scheme="http://sunbingjie.tk/tags/Recursion/"/>
    
      <category term="Stack" scheme="http://sunbingjie.tk/tags/Stack/"/>
    
      <category term="刷题" scheme="http://sunbingjie.tk/categories/%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Number of Islands]]></title>
    <link href="http://sunbingjie.tk/2015/04/12/4.6/"/>
    <id>http://sunbingjie.tk/2015/04/12/4.6/</id>
    <published>2015-04-12T06:23:51.000Z</published>
    <updated>2015-04-12T06:23:51.000Z</updated>
    <content type="html"><![CDATA[<p>Update—Leetcode now includes this problem:</p>
<h2 id="Number_of_Islands">Number of Islands</h2>
<blockquote>
<p>Given a 2d grid map of ‘1’s (land) and ‘0’s (water), count the number of islands. An island is surrounded by water and is formed by connecting adjacent lands horizontally or vertically. You may assume all four edges of the grid are all surrounded by water.<br>Example 1:</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">11110</span></div><div class="line"><span class="number">11010</span></div><div class="line"><span class="number">11000</span></div><div class="line"><span class="number">00000</span></div><div class="line"><span class="label">Answer:</span> <span class="number">1</span></div></pre></td></tr></table></figure>

<p>Example 2:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">11000</span></div><div class="line"><span class="number">11000</span></div><div class="line"><span class="number">00100</span></div><div class="line"><span class="number">00011</span></div><div class="line"><span class="label">Answer:</span> <span class="number">3</span></div></pre></td></tr></table></figure>

<h2 id="Solution">Solution</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numIslands</span>(<span class="keyword">char</span>[][] grid) {</div><div class="line">    <span class="keyword">if</span>(grid.length==<span class="number">0</span> || grid==<span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> count=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;grid.length; i++){</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;grid[<span class="number">0</span>].length;j++){</div><div class="line">            <span class="keyword">if</span>(grid[i][j]==<span class="string">'1'</span>){</div><div class="line">                count++;</div><div class="line">                dfs(grid, i, j);</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> count;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span>(<span class="keyword">char</span>[][] grid, <span class="keyword">int</span> i, <span class="keyword">int</span> j){</div><div class="line">    <span class="keyword">if</span>(i&lt;grid.length && i&gt;=<span class="number">0</span> & j&lt;grid[<span class="number">0</span>].length && j&gt;=<span class="number">0</span> && grid[i][j]==<span class="string">'1'</span>){</div><div class="line">        grid[i][j]=<span class="string">'0'</span>;</div><div class="line">        dfs(grid, i-<span class="number">1</span>,j);</div><div class="line">        dfs(grid, i+<span class="number">1</span>,j);</div><div class="line">        dfs(grid, i,j-<span class="number">1</span>);</div><div class="line">        dfs(grid, i,j+<span class="number">1</span>);</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<h2 id="CountIslands/Floodfill">CountIslands/Floodfill</h2>
<blockquote>
<p>给定matrix，只有0和1，求1的连通size，连通只算上下左右，不算对角线</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">0 1 0 0 1 </div><div class="line">1 1 1 0 0</div><div class="line">1 0 0 0 1</div><div class="line">0 0 0 0 1</div></pre></td></tr></table></figure>

<p>Return 5， 1， 2</p>
<h3 id="Solution-1">Solution</h3>
<p>For each 1 in the matrix, recursivly search for the four neighbors, terminate if 0/boundary found.</p>
<ul>
<li>Mark each node visited to avoid duplicated counting.</li>
</ul>
<pre><code><span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title">countIslands</span>(<span class="keyword">int</span>[][] mat){
    <span class="keyword">int</span> one,count;
    ArrayList&lt;Integer&gt; res = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();
    <span class="keyword">int</span>[][] mark = <span class="keyword">new</span> <span class="keyword">int</span>[mat.length][mat[<span class="number">0</span>].length];

    <span class="keyword">if</span>(mat == <span class="keyword">null</span> || mat.length == <span class="number">0</span>) <span class="keyword">return</span> res;

    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;mat.length; i++){
        <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;mat[<span class="number">0</span>].length; j++){

            <span class="keyword">if</span>(mark[i][j]!=<span class="number">1</span> &amp;&amp; mat[i][j]==<span class="number">1</span>){
                res.add(dfs(i,j, mat, mark));
            }
        }
    }
    <span class="keyword">return</span> res;
}

<span class="keyword">public</span> <span class="keyword">int</span> <span class="title">dfs</span>(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span>[][] mat, <span class="keyword">int</span>[][] mark){
    <span class="keyword">if</span>(i&lt;<span class="number">0</span> || j&lt;<span class="number">0</span> || i&gt;mat.length-<span class="number">1</span> || j&gt;mat[<span class="number">0</span>].length-<span class="number">1</span> || mat[i][j]==<span class="number">0</span> || mark[i][j]==<span class="number">1</span>)
        <span class="keyword">return</span> <span class="number">0</span>;
    mark[i][j] = <span class="number">1</span>;
    <span class="keyword">return</span> <span class="number">1</span>+dfs(i-<span class="number">1</span>,j,mat,mark)+dfs(i+<span class="number">1</span>,j,mat,mark)+dfs(i,j-<span class="number">1</span>,mat,mark)+dfs(i,j+<span class="number">1</span>,mat,mark);
}

<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] args) {
    <span class="keyword">int</span>[][] test = {{<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>} ,{<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>}, {<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>}, {<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>}};
    countIslands c = <span class="keyword">new</span> countIslands();
    System.<span class="keyword">out</span>.println(c.countIslands(test));
}
</code></pre><iframe width="100%" height="160" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A%2F%2Fsoundcloud.com%2Fdanielasings%2Fgnarls-barkley-crazy-cover-by%3Fin%3Dcici-42%2Fsets%2Fsuits&auto_play=false&hide_related=true&show_comments=true&show_user=true&show_reposts=false&visual=true"></iframe>]]></content>
    <summary type="html">
    <![CDATA[<p>Update—Leetcode now includes this problem:</p>
<h2 id="Number_of_Islands">Number of Islands</h2>
<blockquote>
<p>Given a 2d grid map of ‘]]>
    </summary>
    
      <category term="DFS" scheme="http://sunbingjie.tk/tags/DFS/"/>
    
      <category term="Recursion" scheme="http://sunbingjie.tk/tags/Recursion/"/>
    
      <category term="刷题" scheme="http://sunbingjie.tk/categories/%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Maximum Subarray, Maximum Product Subarray]]></title>
    <link href="http://sunbingjie.tk/2015/04/11/4.9/"/>
    <id>http://sunbingjie.tk/2015/04/11/4.9/</id>
    <published>2015-04-11T04:37:25.000Z</published>
    <updated>2015-04-11T04:37:25.000Z</updated>
    <content type="html"><![CDATA[<h2 id="Maximum_Subarray">Maximum Subarray</h2>
<blockquote>
<p>Find the contiguous subarray within an array (containing at least one number) which has the largest sum.<br>For example, given the array [−2,1,−3,4,−1,2,1,−5,4],<br>the contiguous subarray [4,−1,2,1] has the largest sum = 6.</p>
</blockquote>
<h3 id="O(n)_Solution">O(n) Solution</h3>
<ul>
<li>It’s called the Kadane’s Algorithm…</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSubArray</span>(<span class="keyword">int</span>[] A) {</div><div class="line">    <span class="keyword">int</span> max_so_far = A[<span class="number">0</span>];</div><div class="line">    <span class="keyword">int</span> max_ending_here = A[<span class="number">0</span>];</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;A.length;i++){</div><div class="line">        max_ending_here+=A[i];</div><div class="line">        max_ending_here = Math.max(max_ending_here, A[i]);</div><div class="line">        max_so_far = Math.max(max_ending_here, max_so_far);</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> max_so_far;</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="Divide_and_Conquer_Solution_O(nlogn)">Divide and Conquer Solution O(nlogn)</h3>
<ul>
<li>more subtle does not mean cleaner…</li>
<li>divide the given array in two halves and return the maximum of following three</li>
<li>Maximum subarray sum in left half </li>
</ul>
<ul>
<li>Maximum subarray sum in right half </li>
<li>Maximum subarray sum such that the subarray crosses the midpoint</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSubArray</span>(<span class="keyword">int</span>[] A) {</div><div class="line">         <span class="keyword">int</span> l=<span class="number">0</span>, r=A.length-<span class="number">1</span>;</div><div class="line">         <span class="keyword">return</span> rec(A, l, r);</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> <span class="title">rec</span>(<span class="keyword">int</span>[] A, <span class="keyword">int</span> l, <span class="keyword">int</span> r){</div><div class="line">        <span class="keyword">if</span>(l==r) <span class="keyword">return</span> A[l];</div><div class="line">        <span class="keyword">int</span> m= (l+r)/<span class="number">2</span>; </div><div class="line">        <span class="keyword">return</span> Math.max(Math.max(rec(A,l,m),rec(A,m+<span class="number">1</span>,r)),cross(A,m,l,r));</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> <span class="title">cross</span>(<span class="keyword">int</span>[] A, <span class="keyword">int</span> m, <span class="keyword">int</span> l, <span class="keyword">int</span> r){</div><div class="line">        <span class="keyword">int</span> suml=A[m];</div><div class="line">        <span class="keyword">int</span> maxvaluel=A[m];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=m-<span class="number">1</span>;i&gt;=l;i--){</div><div class="line">            suml+=A[i];</div><div class="line">            <span class="keyword">if</span>(suml&gt;maxvaluel){</div><div class="line">                maxvaluel=suml;</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keyword">int</span> sumr=A[m];</div><div class="line">        <span class="keyword">int</span> maxvaluer=A[m];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=m+<span class="number">1</span>;i&lt;=r;i++){</div><div class="line">            sumr+=A[i];</div><div class="line">            <span class="keyword">if</span>(sumr&gt;maxvaluer){</div><div class="line">                maxvaluer=sumr;</div><div class="line">            }            </div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> maxvaluel+maxvaluer-A[m];</div><div class="line">    }</div></pre></td></tr></table></figure>

<hr>
<h2 id="Maximum_Product_Subarray">Maximum Product Subarray</h2>
<blockquote>
<p>Find the contiguous subarray within an array (containing at least one number) which has the largest product.<br>For example, given the array [2,3,-2,4],<br>the contiguous subarray [2,3] has the largest product = 6.</p>
</blockquote>
<h2 id="Near_Brute_force">Near Brute force</h2>
<ul>
<li>If we store result from i to j in t[i][j], the runtime is O(n^2)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProduct</span>(<span class="keyword">int</span>[] A){</div><div class="line">	<span class="keyword">int</span> maxvalue=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;A.length;i++){</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;A.length;j++){</div><div class="line">			<span class="keyword">int</span> tmp=<span class="number">1</span>;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> k=i;k&lt;=j;k++){</div><div class="line">			tmp*=A[k];</div><div class="line">					}</div><div class="line">			<span class="keyword">if</span>(tmp&gt;maxvalue){</div><div class="line">				maxvalue=tmp;</div><div class="line">			}</div><div class="line">		}</div><div class="line">	}</div><div class="line">	<span class="keyword">return</span> maxvalue;</div><div class="line">}</div></pre></td></tr></table></figure>

<h2 id="DP?_Solution">DP? Solution</h2>
<ul>
<li>There are only two cases when we get a larger result</li>
<li>mininum(negative) value multiply cur value(which happens to be negative)</li>
<li>maximum value multiply cur value</li>
<li>Be careful with the special case when multiplying both would decrease the result, then change start point to self</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProduct</span>(<span class="keyword">int</span>[] A){</div><div class="line">	<span class="keyword">int</span> maxvalue=A[<span class="number">0</span>];</div><div class="line">	<span class="keyword">int</span> minval=A[<span class="number">0</span>], maxval=A[<span class="number">0</span>];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;A.length;i++){</div><div class="line">	    <span class="keyword">int</span> a=A[i] * minval;</div><div class="line">	    <span class="keyword">int</span> b=A[i] * maxval;</div><div class="line">	    maxval=Math.max(Math.max(a,b),A[i]);</div><div class="line">	    minval=Math.min(Math.min(a,b),A[i]);</div><div class="line">	    maxvalue=Math.max(maxvalue,maxval);</div><div class="line">	}</div><div class="line">	<span class="keyword">return</span> maxvalue;</div><div class="line">}</div></pre></td></tr></table></figure>

<iframe width="100%" height="160" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A%2F%2Fsoundcloud.com%2Fpatrick-champarnaud%2Fticking-bomb%3Fin%3Dcici-42%2Fsets%2Fsuits&auto_play=false&hide_related=true&show_comments=true&show_user=true&show_reposts=false&visual=true"></iframe>]]></content>
    <summary type="html">
    <![CDATA[<h2 id="Maximum_Subarray">Maximum Subarray</h2>
<blockquote>
<p>Find the contiguous subarray within an array (containing at least one number]]>
    </summary>
    
      <category term="Array" scheme="http://sunbingjie.tk/tags/Array/"/>
    
      <category term="DP" scheme="http://sunbingjie.tk/tags/DP/"/>
    
      <category term="刷题" scheme="http://sunbingjie.tk/categories/%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[StringtoLong, Implement Trinary Tree]]></title>
    <link href="http://sunbingjie.tk/2015/04/02/4.1/"/>
    <id>http://sunbingjie.tk/2015/04/02/4.1/</id>
    <published>2015-04-02T05:24:47.000Z</published>
    <updated>2015-04-02T05:24:47.000Z</updated>
    <content type="html"><![CDATA[<h2 id="StringtoLong">StringtoLong</h2>
<blockquote>
<p>Converts input String to Long</p>
</blockquote>
<h3 id="Solution">Solution</h3>
<ul>
<li>input validation</li>
<li>Over/Underflow</li>
<li>positive/negative </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">long</span> stringToLong(String s)</div><div class="line">	{</div><div class="line">		<span class="comment">// Use Regex to filter out illegal inputs</span></div><div class="line">		<span class="keyword">if</span>(!s.matches(<span class="string">"-?\\d+"</span>)){ </div><div class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> NumberFormatException(<span class="string">"input String "</span> + s + <span class="string">" is illegal number format"</span>);</div><div class="line">		}</div><div class="line">		<span class="comment">// Convert a string to a long </span></div><div class="line">		<span class="keyword">long</span> result = <span class="number">0</span>;</div><div class="line">		<span class="keyword">boolean</span> IsNegative = s.charAt(<span class="number">0</span>)== <span class="string">'-'</span>;</div><div class="line">		<span class="keyword">int</span> start=IsNegative ? <span class="number">1</span>:<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=start;i&lt;s.length();i++){</div><div class="line">			<span class="comment">/* Deal with overflow and underflow */</span></div><div class="line">			</div><div class="line">			<span class="keyword">if</span>(((!IsNegative) && result &gt; (Long.MAX_VALUE)/<span class="number">10</span> )|| ((!IsNegative) && result == (Long.MAX_VALUE)/<span class="number">10</span> && (s.charAt(i) - <span class="number">48</span>)&gt;<span class="number">7</span>)){</div><div class="line">				</div><div class="line">				<span class="keyword">throw</span> <span class="keyword">new</span> NumberFormatException(<span class="string">"input String "</span> + s + <span class="string">" out of bound (overflow)"</span>);</div><div class="line">			}</div><div class="line">			<span class="keyword">else</span> <span class="keyword">if</span>((IsNegative && (-<span class="number">1</span> * result) &lt; (Long.MIN_VALUE)/<span class="number">10</span> ) || (IsNegative &&  (-<span class="number">1</span> * result) == (Long.MIN_VALUE)/<span class="number">10</span> ) && (s.charAt(i) - <span class="number">48</span>)&gt;<span class="number">8</span> ){</div><div class="line">				</div><div class="line">				<span class="keyword">throw</span> <span class="keyword">new</span> NumberFormatException(<span class="string">"input String "</span> + s + <span class="string">" out of bound (underflow)"</span>);</div><div class="line">			}</div><div class="line">			<span class="keyword">else</span>{</div><div class="line">				result=result * <span class="number">10</span> + (s.charAt(i) - <span class="number">48</span>);</div><div class="line">			}</div><div class="line">		}</div><div class="line">		<span class="keyword">return</span> IsNegative ? -result : result;</div><div class="line">	}</div></pre></td></tr></table></figure>

<h2 id="Implement_Trinary_Tree">Implement Trinary Tree</h2>
<blockquote>
<p>Insersion and Deletion</p>
</blockquote>
<h3 id="Solution-1">Solution</h3>
<ul>
<li>Define Node class</li>
<li>Recursivly add/delete node</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TrinaryNode</span></span>{</div><div class="line">	<span class="keyword">int</span> val;</div><div class="line">	TrinaryNode left;</div><div class="line">	TrinaryNode right;</div><div class="line">	TrinaryNode middle;</div><div class="line">	TrinaryNode(<span class="keyword">int</span> x){</div><div class="line">		<span class="keyword">this</span>.val = x;</div><div class="line">	}</div><div class="line"></div><div class="line">}</div><div class="line"><span class="comment">////////////</span></div><div class="line">TrinaryNode root;</div><div class="line">	TrinaryTree(){</div><div class="line">		root = <span class="keyword">null</span>;</div><div class="line">	}</div><div class="line">	TrinaryTree(<span class="keyword">int</span> x){</div><div class="line">		root = <span class="keyword">new</span> TrinaryNode(x);</div><div class="line">	}</div><div class="line"></div><div class="line">	<span class="comment">//Insertion</span></div><div class="line">	TrinaryNode insert(TrinaryNode root, <span class="keyword">int</span> x){</div><div class="line"></div><div class="line">		TrinaryNode tmp = <span class="keyword">new</span> TrinaryNode(x);</div><div class="line">		<span class="comment">//Insert root if root is not set</span></div><div class="line">		<span class="keyword">if</span>(root==<span class="keyword">null</span>){</div><div class="line">			root = tmp;</div><div class="line">			<span class="keyword">return</span> root;</div><div class="line">		}</div><div class="line">		<span class="comment">//Find target position in left subtree if x is smaller than current node</span></div><div class="line">		<span class="keyword">if</span>(root.val &gt; x){</div><div class="line">			<span class="keyword">if</span>(root.left==<span class="keyword">null</span>){</div><div class="line">				root.left = tmp;</div><div class="line">			}</div><div class="line">			<span class="keyword">else</span>{</div><div class="line">				insert(root.left, x);</div><div class="line">			}</div><div class="line">		}</div><div class="line">		<span class="comment">//Find target position in right subtree if x is larger than current node</span></div><div class="line">		<span class="keyword">if</span>(root.val &lt; x){</div><div class="line">			<span class="keyword">if</span>(root.right==<span class="keyword">null</span>){</div><div class="line">				root.right = tmp;</div><div class="line">			}</div><div class="line">			<span class="keyword">else</span>{</div><div class="line">				insert(root.right, x);</div><div class="line">			}</div><div class="line">		}</div><div class="line">		<span class="comment">//Find target position in middle subtree if x is equal to current node</span></div><div class="line">		<span class="keyword">if</span>(root.val == x){</div><div class="line">			<span class="keyword">if</span>(root.middle==<span class="keyword">null</span>){</div><div class="line">				root.middle = tmp;</div><div class="line">			}</div><div class="line">			<span class="keyword">else</span>{</div><div class="line">				insert(root.middle, x);</div><div class="line">			}</div><div class="line">		}</div><div class="line">		<span class="keyword">return</span> root;</div><div class="line">	}</div><div class="line"></div><div class="line">	<span class="comment">//Deletion</span></div><div class="line">	TrinaryNode delete(TrinaryNode root, <span class="keyword">int</span> x){</div><div class="line">		<span class="comment">//Target node is in left subtree</span></div><div class="line">		<span class="keyword">if</span>(root.val &gt; x){</div><div class="line">			root.left = delete(root.left, x);</div><div class="line">		}</div><div class="line">		<span class="comment">//Target node is in right subtree</span></div><div class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(root.val &lt; x){</div><div class="line">			root.right = delete(root.right, x);</div><div class="line">		}</div><div class="line">		<span class="comment">//Target node equals current node</span></div><div class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(root.middle != <span class="keyword">null</span>){</div><div class="line">			<span class="comment">//Delete middle node that is equal to current node</span></div><div class="line">			root.middle = delete(root.middle ,x);</div><div class="line">		}</div><div class="line">		<span class="comment">//Replace current node with its successor in right subtree</span></div><div class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(root.right !=<span class="keyword">null</span>){ </div><div class="line">			root.val = Sucessor(root.right).val;</div><div class="line">			delete(root, Sucessor(root.right).val);</div><div class="line">		}</div><div class="line">		<span class="comment">//Transplant left subtree directly</span></div><div class="line">		<span class="keyword">else</span> {</div><div class="line">			root = root.left;</div><div class="line">		}</div><div class="line">		<span class="keyword">return</span> root;</div><div class="line">	}</div><div class="line"></div><div class="line">	<span class="comment">//Function to find successor in right subtree</span></div><div class="line">	TrinaryNode Sucessor(TrinaryNode root){</div><div class="line">		TrinaryNode tmp = root;</div><div class="line">		<span class="keyword">while</span>(tmp.left!=<span class="keyword">null</span>){</div><div class="line">			tmp=tmp.left;</div><div class="line">		} </div><div class="line">		<span class="keyword">return</span> tmp;</div><div class="line">	}</div><div class="line"></div><div class="line">	<span class="comment">//Function to in-order traverse the tree for testing purpose</span></div><div class="line">	<span class="keyword">void</span> test_print(TrinaryNode root){</div><div class="line">		<span class="keyword">if</span> (root!=<span class="keyword">null</span>){</div><div class="line">			System.out.println(<span class="string">"Node Value: "</span> + root.val);</div><div class="line">		}</div><div class="line">		<span class="keyword">else</span> <span class="keyword">return</span>;</div><div class="line">		test_print(root.left);</div><div class="line">		test_print(root.middle);</div><div class="line">		test_print(root.right);</div><div class="line">	}</div></pre></td></tr></table></figure>





<iframe width="100%" height="160" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A%2F%2Fsoundcloud.com%2Fsamsmithworld%2Fsamsmithasaprocky&auto_play=false&hide_related=true&show_comments=true&show_user=true&show_reposts=false&visual=true"></iframe>]]></content>
    <summary type="html">
    <![CDATA[<h2 id="StringtoLong">StringtoLong</h2>
<blockquote>
<p>Converts input String to Long</p>
</blockquote>
<h3 id="Solution">Solution</h3>
<ul>]]>
    </summary>
    
      <category term="Math" scheme="http://sunbingjie.tk/tags/Math/"/>
    
      <category term="Recursion" scheme="http://sunbingjie.tk/tags/Recursion/"/>
    
      <category term="String" scheme="http://sunbingjie.tk/tags/String/"/>
    
      <category term="Tree" scheme="http://sunbingjie.tk/tags/Tree/"/>
    
      <category term="刷题" scheme="http://sunbingjie.tk/categories/%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Unique Combination of Factors, Factorial Trailing Zeroes]]></title>
    <link href="http://sunbingjie.tk/2015/03/24/3.19/"/>
    <id>http://sunbingjie.tk/2015/03/24/3.19/</id>
    <published>2015-03-24T06:58:20.000Z</published>
    <updated>2015-03-24T06:58:20.000Z</updated>
    <content type="html"><![CDATA[<h2 id="Unique_Combination_of_Factors">Unique Combination of Factors</h2>
<blockquote>
<p>Print all unique combinations of factors of a positive integer. For example given 24:</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">24<span class="keyword">*</span>1</div><div class="line">12<span class="keyword">*</span>2</div><div class="line">8<span class="keyword">*</span>3</div><div class="line">6<span class="keyword">*</span>4</div><div class="line">6<span class="keyword">*</span>2<span class="keyword">*</span>2</div><div class="line">4<span class="keyword">*</span>3<span class="keyword">*</span>2</div><div class="line">3<span class="keyword">*</span>2<span class="keyword">*</span>2<span class="keyword">*</span>2</div></pre></td></tr></table></figure>

<h3 id="Solution">Solution</h3>
<p>Reverse DFS all possible division combinations. Keep track of current dividend, try all divisors. Use backtracking to gather all all possible division combinations.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">     24</div><div class="line">  /   |  <span class="command">\</span></div><div class="line"> 1    6    24</div><div class="line">/ <span class="command">\ </span>/ | <span class="command">\ </span> / <span class="command">\</span></div><div class="line">....  2  4 ....</div><div class="line">	   |</div><div class="line">	  / <span class="command">\</span></div><div class="line">    1   2</div></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> ArrayList&lt;ArrayList&lt;Integer&gt;&gt; <span class="title">factorCombinations</span>(<span class="keyword">int</span> n){</div><div class="line">		ArrayList&lt;ArrayList&lt;Integer&gt;&gt; res = <span class="keyword">new</span> ArrayList&lt;ArrayList&lt;Integer&gt;&gt;();</div><div class="line">		ArrayList&lt;Integer&gt; tmp = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line">		ArrayList&lt;Integer&gt; first=<span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line">		first.add(n);first.add(<span class="number">1</span>);</div><div class="line">		res.add(first);</div><div class="line">		res=dfs(res, n, n/<span class="number">2</span>, tmp);</div><div class="line">		<span class="keyword">return</span> res;</div><div class="line">	}</div><div class="line"></div><div class="line">	<span class="keyword">private</span> ArrayList&lt;ArrayList&lt;Integer&gt;&gt; <span class="title">dfs</span>(ArrayList&lt;ArrayList&lt;Integer&gt;&gt; res, <span class="keyword">int</span> Curdividend, <span class="keyword">int</span> Largestdivisor, ArrayList&lt;Integer&gt; tmp){</div><div class="line">		<span class="keyword">if</span>(Curdividend==<span class="number">1</span>){</div><div class="line">			res.add(<span class="keyword">new</span> ArrayList&lt;Integer&gt;(tmp));</div><div class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">		}</div><div class="line"></div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=Largestdivisor; i&gt;<span class="number">1</span>;i--){</div><div class="line">			<span class="keyword">if</span>(Curdividend%i==<span class="number">0</span>){</div><div class="line">				tmp.add(i);</div><div class="line">				dfs(res,Curdividend/i, i,tmp);</div><div class="line">				tmp.remove(tmp.size()-<span class="number">1</span>);</div><div class="line">			}</div><div class="line">		}</div><div class="line">		<span class="keyword">return</span> res;</div><div class="line">	}</div></pre></td></tr></table></figure>

<h2 id="Factorial_Trailing_Zeroes">Factorial Trailing Zeroes</h2>
<blockquote>
<p>Given an integer n, return the number of trailing zeroes in n!.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">trailingZeroes</span>(<span class="keyword">int</span> n) {</div><div class="line">       <span class="keyword">if</span>(n&lt;<span class="number">5</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">       <span class="keyword">int</span> count_of_five=<span class="number">0</span>;</div><div class="line">       <span class="keyword">while</span>(n&gt;<span class="number">1</span>){</div><div class="line">           n=n/<span class="number">5</span>;</div><div class="line">           count_of_five+=n;</div><div class="line">       }</div><div class="line">       <span class="keyword">return</span> count_of_five;</div><div class="line">   }</div></pre></td></tr></table></figure>





<iframe width="100%" height="160" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A%2F%2Fsoundcloud.com%2Flevvis%2Flewis-watson-into-the-wild-the%3Fin%3Dcici-42%2Fsets%2Fwinter-house&auto_play=false&hide_related=true&show_comments=true&show_user=true&show_reposts=false&visual=true"></iframe>]]></content>
    <summary type="html">
    <![CDATA[<h2 id="Unique_Combination_of_Factors">Unique Combination of Factors</h2>
<blockquote>
<p>Print all unique combinations of factors of a posi]]>
    </summary>
    
      <category term="Math" scheme="http://sunbingjie.tk/tags/Math/"/>
    
      <category term="Recursion" scheme="http://sunbingjie.tk/tags/Recursion/"/>
    
      <category term="刷题" scheme="http://sunbingjie.tk/categories/%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Stack and Heap]]></title>
    <link href="http://sunbingjie.tk/2015/03/20/3.19.3/"/>
    <id>http://sunbingjie.tk/2015/03/20/3.19.3/</id>
    <published>2015-03-20T07:17:01.000Z</published>
    <updated>2015-03-20T07:17:01.000Z</updated>
    <content type="html"><![CDATA[<h2 id="Overview">Overview</h2>
<p>Value types are created on the stack, and reference types are created on the heap.</p>
<p>Both are stored in computer RAM.</p>
<p>Each thread gets a stack, while there’s typically only one heap for the application.</p>
<h2 id="Stack">Stack</h2>
<p>When a function is called, a block is reserved on the top of the stack for local variables and some bookkeeping data in a LIFO order. Freeing a block from the stack is nothing more than adjusting one pointer.</p>
<h2 id="Heap">Heap</h2>
<p>Unlike the stack, there’s no enforced pattern to the allocation and deallocation of blocks from the heap; you can allocate a block at any time and free it at any time. This makes it much more complex to keep track of which parts of the heap are allocated or free at any given time; there are many custom heap allocators available to tune heap performance for different usage patterns.</p>
<h2 id="Q_&amp;_A">Q &amp; A</h2>
<h4 id="What_is_their_scope?">What is their scope?</h4>
<p>The stack is attached to a thread, so when the thread exits the stack is reclaimed.</p>
<p>The heap is typically allocated at application startup by the runtime, and is reclaimed when the application (technically process) exits.</p>
<h4 id="What_determines_the_size_of_each_of_them?">What determines the size of each of them?</h4>
<p>The size of the stack is set when a thread is created.</p>
<p>The size of the heap is set on application startup, but can grow as space is needed (the allocator requests more memory from the operating system).</p>
<h4 id="What_makes_one_faster?">What makes one faster?</h4>
<p>The stack is faster because the access pattern makes it trivial to allocate and deallocate memory from it, while the heap has much more complex bookkeeping involved in an allocation or free.</p>
<p>Each byte in the stack tends to be reused very frequently which means it tends to be mapped to the processor’s cache, making it very fast.</p>
<p>Another performance hit for the heap is that the heap, being mostly a global resource, typically has to be multi-threading safe, i.e. each allocation and deallocation needs to be (typically) synchronized.</p>
<p><img src="http://okckd.github.io/assets/images/stack-and-heap.png" alt=""></p>
<iframe width="100%" height="160" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A%2F%2Fsoundcloud.com%2Frapid-snap%2Ftwenty-one-pilots-cant-help%3Fin%3Dcici-42%2Fsets%2Fwinter-house&auto_play=false&hide_related=true&show_comments=true&show_user=true&show_reposts=false&visual=true"></iframe>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="Overview">Overview</h2>
<p>Value types are created on the stack, and reference types are created on the heap.</p>
<p>Both are stored]]>
    </summary>
    
      <category term="Design" scheme="http://sunbingjie.tk/tags/Design/"/>
    
      <category term="刷题" scheme="http://sunbingjie.tk/categories/%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Basic Data Structure]]></title>
    <link href="http://sunbingjie.tk/2015/03/13/2.12-2/"/>
    <id>http://sunbingjie.tk/2015/03/13/2.12-2/</id>
    <published>2015-03-13T08:50:14.000Z</published>
    <updated>2015-03-13T08:50:14.000Z</updated>
    <content type="html"><![CDATA[<h1 id="List">List</h1>
<h2 id="Iterator">Iterator</h2>
<ul>
<li>if structural change is made(add, remove, clear), iterator is no longer valid</li>
<li>if iterator invokes its remove method, then iterator is still valid</li>
<li>main advantage of remove method from iterator is that Collection’s remove method must first find the item to remove</li>
</ul>
<h2 id="ArrayList">ArrayList</h2>
<ul>
<li>advantage<ul>
<li>calls to get and set take constant time</li>
</ul>
</li>
<li>disadvantage<ul>
<li>insertion and removal might be expensive unless changes are made at the end of arraylist</li>
<li>inefficient for search</li>
<li>notation of capacity(size of underlying array)</li>
</ul>
</li>
<li>operation<ul>
<li>get, set: O(1)</li>
<li>insertion(add to front) and removal: O(n)</li>
</ul>
</li>
</ul>
<h2 id="LinkedList">LinkedList</h2>
<ul>
<li>advantage<ul>
<li>insertion and removal is cheap(constant time), provided the position of the changes is known</li>
</ul>
</li>
<li>disadvantage<ul>
<li>not easily indexable</li>
<li>calls to get and set might be expensive</li>
<li>inefficient for search</li>
</ul>
</li>
<li>operation<ul>
<li>get, set: O(n)</li>
<li>insertion, removal: O(1)</li>
</ul>
</li>
</ul>
<h2 id="Stack">Stack</h2>
<ul>
<li>operation<ul>
<li>push: O(1)</li>
<li>pop: O(1)</li>
</ul>
</li>
<li>implementation<ul>
<li>list: push is to add node to the front of list and pop is to remove from front of list</li>
<li>array: topOfStack is initialized to -1, when push, arr[topOfStack++]=element; when pop, return arr[—topOfStack]; use topOfStack==-1 to check if emtpy</li>
</ul>
</li>
<li>applications<ul>
<li>balance symbols</li>
<li>postfix expression</li>
<li>infix to postfix conversion</li>
<li>method calls</li>
</ul>
</li>
</ul>
<h2 id="Queue">Queue</h2>
<ul>
<li>idea<ul>
<li>insertion is done at one end</li>
<li>deletion is doen at the other end</li>
</ul>
</li>
<li>operation<ul>
<li>enqueue: O(1)</li>
<li>dequeue: O(1)</li>
</ul>
</li>
</ul>
<h2 id="Nested_Class_vs-_Inner_Class">Nested Class vs. Inner Class</h2>
<ul>
<li>nested class<ul>
<li>when make something a nested class, it is placed inside of another class which is the outer class</li>
<li>must use <code>static</code> to signify it is nested; without <code>static</code>, it would be inner class</li>
<li>nested class can be made private so that it is inaccessible from classes outside outer class</li>
</ul>
</li>
<li>inner class<ul>
<li>when declare inner class, compiler adds implicit reference to outer class that caused the inner class’s construction</li>
<li>The inner class is useful in a situation in which each inner class object is associated with exactly one instance of an outer class object. In such a case, the inner class object can never exist without having an outer class object with which to be associated</li>
</ul>
</li>
</ul>
<h1 id="Tree">Tree</h1>
<h2 id="General_trees">General trees</h2>
<ul>
<li>representation<ul>
<li>first child + next sibling for tree node</li>
</ul>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="title">class</span> TreeNode{</div><div class="line">   <span class="title">Object</span> element;</div><div class="line">   <span class="title">TreeNode</span> firstChild;</div><div class="line">   <span class="title">TreeNode</span> nextSibling;</div></pre></td></tr></table></figure>

<ul>
<li>traversal<ul>
<li>preorder traversal<ul>
<li>root-&gt;left-&gt;right</li>
<li>application in file system(list all files in directory)</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">listAll</span>(){</div><div class="line">   listAll(<span class="number">0</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">listAll</span>(<span class="keyword">int</span> depth){</div><div class="line">   printFileName(depth);</div><div class="line">   <span class="keyword">if</span>(isDirectory()){</div><div class="line">      <span class="keyword">for</span> each file <span class="keyword">in</span> the directory</div><div class="line">          listAll(depth+<span class="number">1</span>)</div><div class="line">   }</div><div class="line">}</div></pre></td></tr></table></figure>

<ul>
<li>postorder traversal<ul>
<li>left-&gt;right-&gt;root</li>
<li>compute size of directory</li>
</ul>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">dirSize</span>(){</div><div class="line">    <span class="keyword">int</span> totalSize = sizeOfFile();</div><div class="line">    <span class="keyword">if</span>(isDirectory()){</div><div class="line">      <span class="keyword">for</span> each file f <span class="keyword">in</span> directory</div><div class="line">          totalSize += c.dirSize()</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> totalSize;</div><div class="line">}</div></pre></td></tr></table></figure>

<ul>
<li>levelorder traversal</li>
<li>inorder traversal<ul>
<li>left-&gt;root-&gt;right</li>
</ul>
</li>
</ul>
<ul>
<li>application<ul>
<li>file system</li>
</ul>
</li>
</ul>
<h2 id="Binary_Tree">Binary Tree</h2>
<ul>
<li>overview<ul>
<li>average depth is O(sqrt(N)), worst case depth is N-1</li>
<li>for binary search tree, average depth is O(logN)</li>
</ul>
</li>
<li>representation</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinaryNode</span></span>{</div><div class="line">   <span class="type">Object</span> element;</div><div class="line">   <span class="type">BinaryNode</span> <span class="keyword">left</span>;</div><div class="line">   <span class="type">BinaryNode</span> <span class="keyword">right</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<ul>
<li>application<ul>
<li>expression tree<ul>
<li>push operands to stack while reading</li>
<li>if see an operator, pop two trees(operands) from stack, build a new tree and push onto the stack</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Binary_Search_Tree">Binary Search Tree</h2>
<ul>
<li><p>overview</p>
<ul>
<li>values in left subtree less than root value</li>
<li>values in right subtree larger than root value</li>
</ul>
</li>
<li><p>operations</p>
<ul>
<li>time O(depth), for average depth, time O(logn)</li>
</ul>
</li>
<li><p>balance and self-adjusting</p>
</li>
</ul>
<h2 id="AVL_Tree">AVL Tree</h2>
<ul>
<li><p>overview</p>
<ul>
<li>almost identical to binary search tree</li>
<li>for every node, height of left and right subtree differ at most 1</li>
</ul>
</li>
<li><p>rotation</p>
</li>
</ul>
<h2 id="Splay_Tree">Splay Tree</h2>
<h2 id="B-Tree">B-Tree</h2>
<h1 id="Set_and_Map_in_Standard_Libary">Set and Map in Standard Libary</h1>
<h2 id="Set">Set</h2>
<ul>
<li><p>overview</p>
<ul>
<li>do not allow duplicate</li>
</ul>
</li>
<li><p>types</p>
<ul>
<li>TreeSet(Sorted Set): worst time O(logn)</li>
</ul>
</li>
</ul>
<h2 id="Map">Map</h2>
<ul>
<li><p>overview</p>
<ul>
<li>a collection of entries of keys and values</li>
<li>keys must be unique</li>
<li>several keys can be mapped to the same value</li>
<li>map does not provide iterator</li>
</ul>
</li>
<li><p>types</p>
<ul>
<li>TreeMap(Sorted Map): keep keys in sorted order</li>
</ul>
</li>
</ul>
<h1 id="Hashing">Hashing</h1>
<ul>
<li>overview<ul>
<li>perform insertion, deletion, searching in average O(1) time</li>
<li>print in sorted order in O(n) not supported</li>
<li>load factor: ratio of number of elements in the hash table to the table size</li>
</ul>
</li>
</ul>
<h2 id="hash_function">hash function</h2>
<ul>
<li>determinism: given an input, always generate the same value</li>
<li>uniformity: map inputs as evenly as possible over its output range</li>
<li>defined range: desirable that outputs of hash function have fixed size</li>
<li>continuity: a hash function that is used to search for similar data must be as continuous as possible, two inputs differing a little should be mapped to nearly equal hash values</li>
<li>non-invertible: impossible to reconstruct input from hash value</li>
</ul>
<h2 id="collisions">collisions</h2>
<ul>
<li>given inputs map to the same hash value</li>
<li>separate chaining<ul>
<li>idea: keep a list elements that hash to the same value</li>
<li>operations<ul>
<li>search: first determine which list to traverse and then search appropriate list</li>
<li>insertion: first check appropriate list to see whether element is already in place(if duplicates allowed, keep an extra field); if element is new, insert into the front of list because recently inserted elements are more likely to be used in the near future</li>
</ul>
</li>
<li>disadvantage<ul>
<li>using linkedlist</li>
<li>slow down time to allocate new cells</li>
<li>require implementation of another data structure</li>
</ul>
</li>
</ul>
</li>
<li>probing<ul>
<li>hash function: h_i(x) = (hash(x) + f(i)) % TABLE_SIZE</li>
<li>types<ul>
<li>linear probing<ul>
<li>f(i) = i</li>
<li>primary clustering: as long as table is large enough, a free cell can always be found but might take a long time; when table is relatively empty, blocks of occupied cells start forming</li>
<li>insertions and unsuccessful search require the same number of probes</li>
<li>on average, successful search takes less time than unsuccessful search</li>
</ul>
</li>
<li>quadratic probing<ul>
<li>f(i) = i^2</li>
<li>eliminate the primary clustering</li>
<li>no guarantee finding free cell when table gets more than half full or even before if table size is not prime because at most half of the table can be used as alternative locations to resolve collisions</li>
<li>table size must be prime, otherwise insertion might fail</li>
<li>secondary hashing<ul>
<li>solution by double hashing: f(i)=i*hash2(x)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="rehashing">rehashing</h2>
<ul>
<li>when table gets too full, operations start taking too long</li>
<li>solution: build another table with twice size, compute new hash value for new table</li>
<li>running time: O(n)</li>
<li>options<ul>
<li>rehash as soon as table is half full</li>
<li>rehash only when an insertion fails</li>
<li>rehash when table reaches a certain load factor</li>
</ul>
</li>
</ul>
<h2 id="hash_tables_with_worst_O(1)_time">hash tables with worst O(1) time</h2>
<h1 id="Priority_Queue(Heap)">Priority Queue(Heap)</h1>
<ul>
<li>structure property<ul>
<li>a heap is a binary tree that is completely filled(exception at the bottom level), the average height of complete binary tree is O(logN)</li>
<li>for any element in array position i<ul>
<li>left child: 2i</li>
<li>right child: 2i+1</li>
<li>parent: floor(i/2)</li>
</ul>
</li>
<li>heap consists of Comparable objects</li>
</ul>
</li>
<li>heap order property<ul>
<li>smallest(largest) element at the root</li>
<li>min-heap: for every node X, key in the parent of X is &lt;= key in X</li>
<li>order property ensures findMin() in O(1) time</li>
</ul>
</li>
<li>operations<ul>
<li>insert()<ul>
<li>create a hole in next available position, if order property not violated, done; otherwise, heapify up</li>
<li>time O(logN) if inserted element is new minimum(maximum)</li>
</ul>
</li>
<li>deleteMin()<ul>
<li>find minimum is easy</li>
<li>removing minimum will create a hole in the root, we must move last element X in the heap to correct position</li>
<li>put X in correct spot along a path from the root containing minimum children(heapify down)</li>
<li>time: worst O(logN), average O(logN)</li>
</ul>
</li>
<li>decreaseKey()<ul>
<li>lowers the value of item at position p by positive amount</li>
<li>if violate order property, heapify up</li>
<li>application: make something with higher priority</li>
</ul>
</li>
<li>increaseKey()<ul>
<li>increase the value of item at position p by positive amount</li>
<li>if violate order property, heapify down</li>
<li>application: scheduler drops the priority of a process that is consuming excessive CPU time</li>
</ul>
</li>
<li>delete()<ul>
<li>remove node at position p</li>
<li>first perform decreaseKey(p,infinity) then perform deleteMin()</li>
<li>application: process terminated by user</li>
</ul>
</li>
<li>buildHeap()<ul>
<li>done with N successive inserts</li>
<li>insert takes O(1) average, O(logN) worst</li>
<li>build takes O(N) average, O(NlogN) worst</li>
</ul>
</li>
</ul>
</li>
<li>applications<ul>
<li>selection problem<ul>
<li>approach one(k smallest elements)<ul>
<li>read N elements into array and buildHeap</li>
<li>perform k deleteMin()</li>
<li>time: buildHeap O(N), deleteMin O(logN), total is O(N+klogN)</li>
</ul>
</li>
<li>approach two(k largest elements)<ul>
<li>idea: at any time, maintain a set of k largest elements</li>
<li>read first k elements</li>
<li>when a new element is read, compare it with kth largest element Sk(Sk is the smallest element in set S)<ul>
<li>if new element is larger, it replaces Sk</li>
<li>otherwise, do nothing</li>
</ul>
</li>
<li>finally, return the smallest element in S</li>
<li>time: build with first k elements O(k), time to process remaining (N-k)O(logk), total is O(k+(N-k)logk) = O(Nlogk)</li>
</ul>
</li>
</ul>
</li>
<li>event simulation</li>
</ul>
</li>
</ul>
<iframe width="100%" height="160" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A%2F%2Fsoundcloud.com%2Finterscope%2Fthe-pretty-reckless-just-1%3Fin%3Dcici-42%2Fsets%2Fwinter-house&auto_play=false&hide_related=true&show_comments=true&show_user=true&show_reposts=false&visual=true"></iframe>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="List">List</h1>
<h2 id="Iterator">Iterator</h2>
<ul>
<li>if structural change is made(add, remove, clear), iterator is no longer val]]>
    </summary>
    
      <category term="Concepts" scheme="http://sunbingjie.tk/tags/Concepts/"/>
    
      <category term="CC" scheme="http://sunbingjie.tk/categories/CC/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Basic Comparisons]]></title>
    <link href="http://sunbingjie.tk/2015/03/13/2.12/"/>
    <id>http://sunbingjie.tk/2015/03/13/2.12/</id>
    <published>2015-03-13T08:49:48.000Z</published>
    <updated>2015-03-13T08:49:48.000Z</updated>
    <content type="html"><![CDATA[<ul>
<li><a href="#list">LinkedList vs ArrayList</a></li>
<li><a href="#map">HashMap vs. TreeMap vs. HashTable vs. LinkedHashMap</a></li>
<li><a href="#setlistmap">Set vs. List vs. Map</a></li>
<li><a href="#search">BST vs. HashTable</a></li>
<li><a href="#graph">BFS vs. DFS</a></li>
<li><a href="#treegraph">Graph vs. Tree</a></li>
</ul>
<p><a name="list"></a></p>
<h2 id="Linkedlist_vs-_Arraylist_vs-_Vector">Linkedlist vs. Arraylist vs. Vector</h2>
<ul>
<li><p>Operations</p>
<ul>
<li>LinkedList<ul>
<li>get(index): O(n)</li>
<li>add(element): O(1)</li>
<li>add(index, element): O(n)</li>
<li>remove(index): O(n)</li>
<li>Iterator.remove(): O(1), main benefit</li>
<li>Iterator.add(element): O(1), main benefit</li>
</ul>
</li>
<li>ArrayList<ul>
<li>get(index): O(1), main benefit</li>
<li>add(element): O(1) amortized, worst case O(n) because need to resize array and copy</li>
<li>add(index, element): O(n-index) amortized, worst case O(n)</li>
<li>remove(index): O(n-index), remove last is O(1)</li>
<li>Iterator.remove(): O(n-index)</li>
<li>Iterator.add(element): O(n-index)</li>
</ul>
</li>
</ul>
</li>
<li><p>Compare</p>
<ul>
<li>Linkedlist<ul>
<li>O(1) time insertions or removals using iterator, but only sequential access</li>
<li>finding a position in the linkedlist takes time O(n)</li>
<li>each element of linkedlist have more memory overhead because pointers need to be stored</li>
<li>linkedlist also implements queue interface which adds more methods such as offer(), peek(), poll()</li>
</ul>
</li>
<li>Arraylist<ul>
<li>fast random read access in O(1)</li>
<li>adding or removing element except at the end require shifting latter elements, if add more elements, need to allocate new array and copy old values</li>
<li>iterating over arraylist is technically faster</li>
<li>to avoid overhead of resizing, construct arraylist with initial capacity</li>
</ul>
</li>
</ul>
</li>
<li><p>Similarities</p>
<ul>
<li>both are implementation of list interface</li>
<li>maintain elements in insertion order</li>
<li>non-synchronized, but can be made synchronized explicitly</li>
<li>if list is structurally modified after iterator is created, except through iterator’s own remove or add method, iterator will throw exception</li>
</ul>
</li>
<li><p>When to use which</p>
<ul>
<li>frequent addition and deletion: linkedlist</li>
<li>frequent search: arraylist</li>
<li>less memory to store many elements: arraylist</li>
</ul>
</li>
<li><p>Vector</p>
<ul>
<li>almost identical to arraylist, but is synchronized</li>
<li>more overhead because of synchronization</li>
<li>still use arraylist because they can make it synchronized explicitly by encapsulating: </li>
</ul>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">coll </span>=<span class="string"> Collections.synchronizedCollection(coll);</span></div></pre></td></tr></table></figure>

<p><a name="map"></a></p>
<h2 id="HashMap_vs-_TreeMap_vs-_HashTable_vs-_LinkedHashMap">HashMap vs. TreeMap vs. HashTable vs. LinkedHashMap</h2>
<ul>
<li><p>Overview</p>
<ul>
<li>HashMap: implemented as a hash table, no ordering on keys or values</li>
<li>TreeMap: implemented based on red-black tree, ordered by key</li>
<li>LinkedHashMap: preserves insertion order</li>
<li>HashTable: synchronized in constrast to HashMap</li>
</ul>
</li>
<li><p>HashMap</p>
<ul>
<li>operation<ul>
<li>put(): average O(1), worst O(n) when collision</li>
<li>get(), remove(): O(1)</li>
</ul>
</li>
<li>if key is self-defined objects, need to implement equals() and hashCode()</li>
<li>iteration order not predictable</li>
<li>does not allow two identical elements<ul>
<li>equals(): return true if two references refer to the same object</li>
<li>hashCode(): return distinct integers for distinct objects</li>
</ul>
</li>
<li>allow null keys and values</li>
</ul>
</li>
<li><p>TreeMap</p>
<ul>
<li>operation<ul>
<li>put(), get(), remove(): worst O(logn)</li>
</ul>
</li>
<li>sorted by keys</li>
<li>object for key has to implement Comparable interface</li>
<li>only allow values to be null</li>
</ul>
</li>
<li><p>HashTable</p>
<ul>
<li>HashMap is roughly equivalent to HashTable, except hashmap is not synchronized and permits null</li>
<li>Hashtable does not allow null keys or values. HashMap allows one null key and any number of null values.</li>
</ul>
</li>
<li><p>LinkedHashMap</p>
<ul>
<li>operation: see arraylist</li>
<li>subclass of HashMap</li>
<li>linkedlist preserves the insertion order</li>
<li>allow null keys and values</li>
</ul>
</li>
</ul>
<p><a name="setlistmap"></a></p>
<h2 id="Set_vs-_List_vs-_Map">Set vs. List vs. Map</h2>
<ul>
<li><p>Set</p>
<ul>
<li>unordered collection</li>
<li>unique objects (!e1.equals(e2))</li>
<li>contains at most one null</li>
</ul>
</li>
<li><p>List</p>
<ul>
<li>ordered collection(sequence)</li>
<li>access by index and search</li>
<li>may contain duplicates</li>
<li>user has control over where element inserted</li>
</ul>
</li>
<li><p>Map</p>
<ul>
<li>object that maps keys to values</li>
<li>no duplicated allowed</li>
<li>a key can map to at most one value</li>
</ul>
</li>
</ul>
<p><a name="search"></a></p>
<h2 id="BST_vs-_HashTable">BST vs. HashTable</h2>
<ul>
<li><p>BST</p>
<ul>
<li>insert and retrieve: O(logn)</li>
<li>store data sorted</li>
<li>no need to know size of input in advance</li>
<li>memory efficient: do not reserve more memory than they need to</li>
</ul>
</li>
<li><p>HashTable</p>
<ul>
<li>insert and retrieve: O(1)</li>
<li>elements stored unsorted</li>
<li>with more inputs, collisions may show up</li>
<li>need more space than input data if to avoid collision</li>
<li>need to know data size, otherwise might need to resize the table</li>
</ul>
</li>
</ul>
<p><a name="graph"></a></p>
<h2 id="BFS_vs-_DFS">BFS vs. DFS</h2>
<ul>
<li><p>Overview</p>
<ul>
<li>search algorithms for graphs and trees</li>
<li>used for unordered graph and tree</li>
<li>graph representation<ul>
<li>adjacent list: space O(V+E)</li>
<li>adjacent matrix: space O(V^2)</li>
</ul>
</li>
</ul>
</li>
<li><p>BFS</p>
<ul>
<li>start with root node</li>
<li>scan each node in the each level</li>
<li>while traversing each level, decide if target is found</li>
</ul>
</li>
<li><p>DFS</p>
<ul>
<li>start with root node</li>
<li>follow on branch as far as possible until target is found or hit a leaf node</li>
<li>if hit a leaf node, continue search at the nearest ancestor</li>
</ul>
</li>
</ul>
<ul>
<li>Comparison<ul>
<li>memory<ul>
<li>BFS uses a large amount of memory because need to store pointers to a level(serious problem if the tree is very wide)</li>
<li>DFS uses less memory because no need to store all child pointers at a level</li>
</ul>
</li>
<li>depend on the data you search for<ul>
<li>look for people alive in family tree: DFS because targets are likely to be on the bottom of the tree</li>
<li>look for people who died: BFS</li>
</ul>
</li>
<li>implementation<ul>
<li>BFS: queue</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">BFS</span><span class="params">(G,v)</span></span></div><div class="line">   <span class="title">initialize</span> <span class="title">a</span> <span class="title">queue</span> <span class="title">Q</span></div><div class="line">   <span class="title">Q</span>.<span class="title">push</span><span class="params">(v)</span></div><div class="line">   <span class="title">label</span> <span class="title">v</span> <span class="title">as</span> <span class="title">visited</span></div><div class="line">   <span class="title">while</span> <span class="title">Q</span> <span class="title">is</span> <span class="title">not</span> <span class="title">empty</span></div><div class="line">      <span class="title">v</span> &lt;- <span class="title">Q</span>.<span class="title">pop</span><span class="params">()</span></div><div class="line">      <span class="title">for</span> <span class="title">all</span> <span class="title">edges</span> <span class="title">from</span> <span class="title">v</span> <span class="title">to</span> <span class="title">w</span> <span class="title">in</span> <span class="title">adjacent</span><span class="params">(v)</span></div><div class="line">          <span class="title">if</span> <span class="title">w</span> <span class="title">is</span> <span class="title">not</span> <span class="title">visited</span></div><div class="line">             <span class="title">Q</span>.<span class="title">push</span><span class="params">(w)</span></div><div class="line">             <span class="title">label</span> <span class="title">w</span> <span class="title">as</span> <span class="title">visited</span></div></pre></td></tr></table></figure>

<pre><code>-<span class="ruby"> <span class="constant">DFS</span><span class="symbol">:</span> stack
</span>  + recursive
</code></pre><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">DFS</span><span class="params">(G,v)</span></span></div><div class="line">   <span class="title">label</span> <span class="title">v</span> <span class="title">as</span> <span class="title">visited</span></div><div class="line">   <span class="title">for</span> <span class="title">all</span> <span class="title">edges</span> <span class="title">from</span> <span class="title">v</span> <span class="title">to</span> <span class="title">w</span> <span class="title">in</span> <span class="title">adjacent</span><span class="params">(v)</span></div><div class="line">       <span class="title">if</span> <span class="title">w</span> <span class="title">is</span> <span class="title">not</span> <span class="title">visited</span></div><div class="line">           <span class="title">DFS</span><span class="params">(G,w)</span></div></pre></td></tr></table></figure>

<pre><code>  + iterative
</code></pre><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">DFS</span><span class="params">(G,v)</span></span></div><div class="line">   <span class="title">initialize</span> <span class="title">stack</span> <span class="title">S</span></div><div class="line">   <span class="title">S</span>.<span class="title">push</span><span class="params">(v)</span></div><div class="line">   <span class="title">while</span> <span class="title">S</span> <span class="title">is</span> <span class="title">not</span> <span class="title">empty</span></div><div class="line">      <span class="title">v</span> &lt;- <span class="title">S</span>.<span class="title">pop</span><span class="params">()</span></div><div class="line">      <span class="title">if</span> <span class="title">v</span> <span class="title">is</span> <span class="title">not</span> <span class="title">visited</span></div><div class="line">         <span class="title">label</span> <span class="title">v</span> <span class="title">as</span> <span class="title">visited</span></div><div class="line">            <span class="title">for</span> <span class="title">all</span> <span class="title">edges</span> <span class="title">from</span> <span class="title">v</span> <span class="title">to</span> <span class="title">w</span> <span class="title">in</span> <span class="title">adjacent</span><span class="params">(v)</span></div><div class="line">                <span class="title">S</span>.<span class="title">push</span><span class="params">(w)</span></div></pre></td></tr></table></figure>

<ul>
<li>solution<ul>
<li>BFS: complete algorithm, give optimal solution</li>
<li>DFS: suboptimal solution</li>
</ul>
</li>
<li>complexity<ul>
<li>BFS: worst time O(V+E), worst space O(V)</li>
<li>DFS: worst time O(v+E), worst space O(V)</li>
</ul>
</li>
</ul>
<p><a name="treegraph"></a></p>
<h2 id="Tree_vs-_Graph">Tree vs. Graph</h2>
<ul>
<li>tree is restricted form of a graph(directed acyclic graph)</li>
<li>trees have direction(parent/child relationship)</li>
<li>tree does not contain cycles</li>
<li>in trees, a child can only have one parent</li>
</ul>
<iframe width="100%" height="160" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A%2F%2Fsoundcloud.com%2Finterscope%2Fthe-pretty-reckless-make-me-2%3Fin%3Dcici-42%2Fsets%2Fwinter-house&auto_play=false&hide_related=true&show_comments=true&show_user=true&show_reposts=false&visual=true"></iframe>
]]></content>
    <summary type="html">
    <![CDATA[<ul>
<li><a href="#list">LinkedList vs ArrayList</a></li>
<li><a href="#map">HashMap vs. TreeMap vs. HashTable vs. LinkedHashMap</a></li>
<l]]>
    </summary>
    
      <category term="Concepts" scheme="http://sunbingjie.tk/tags/Concepts/"/>
    
      <category term="CC" scheme="http://sunbingjie.tk/categories/CC/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Java Related Questions]]></title>
    <link href="http://sunbingjie.tk/2015/03/13/2.12-3/"/>
    <id>http://sunbingjie.tk/2015/03/13/2.12-3/</id>
    <published>2015-03-13T08:49:13.000Z</published>
    <updated>2015-03-13T08:49:13.000Z</updated>
    <content type="html"><![CDATA[<h1 id="Java_Questions">Java Questions</h1>
<p>Contents:</p>
<ul>
<li><a href="#Keywords">Keywords</a></li>
<li><a href="#Concepts">Concepts</a></li>
<li><a href="#OOP">OOP</a></li>
<li><a href="#Collections">Collections</a></li>
<li><a href="#Thread">Threading</a></li>
</ul>
<h2 id="Object_Oriented">Object Oriented</h2>
<ul>
<li>model organized around objects rather than actions and data rather than logic</li>
<li>based on the concept of “objects”</li>
<li>contain data in the form of fields(attributes)</li>
<li>code in the form of procedures(methods)</li>
<li>object’s procedures can access and modify the data fields of the associated object</li>
</ul>
<p><a name="Keywords"></a></p>
<h2 id="Java_Keywords">Java Keywords</h2>
<ul>
<li><p>Access modifiers</p>
<p>| modifier | access in same package | access in different package |<br>| ———— | ——————————— | —————————————- |<br>| private  |         no             |          no                 |<br>| public   |         yes            |         yes                 |<br>| default  |         yes            |          no                 |<br>| protected|         yes            |     only if extend class    |  </p>
</li>
<li><p><code>final</code> keyword</p>
<ul>
<li>can be assigned to variable, method, class, object</li>
<li>if assigned<ul>
<li>variable: behave like a constant and cannot change value</li>
<li>method: cannot be overridden in its child class</li>
<li>class: no other class can extend it</li>
<li>object: only instantiated once</li>
</ul>
</li>
</ul>
</li>
<li><p><code>synchronized</code> keyword</p>
<ul>
<li>provide lock on the object and prevent race condition</li>
<li>can be applied to static/non-static methods or block of code</li>
<li>only one thread at a time can access synchronized methods</li>
<li>if multiple threads, need to wait for execution complete</li>
</ul>
</li>
<li><p><code>volatile</code> keyword</p>
<ul>
<li>volatile variable stored in main memory</li>
<li>every thread can access </li>
<li>local copy updated from main memory</li>
<li>has performance issues</li>
</ul>
</li>
<li><p><code>static</code> variable</p>
<ul>
<li><code>static</code> cannot be used for class</li>
<li>everything declared as <code>static</code> is related to class not object</li>
<li>multiple objects of a class share the same instance of static variable</li>
</ul>
</li>
<li><p><code>static</code> method</p>
<ul>
<li>can be accessed without creating the objects</li>
<li>use class name to access static method</li>
<li>static method can only access static variables and not local or global non-static variable: because if the class is not instantiated and therefore the variables are not initialized and cannot be accessed from a static method</li>
<li>static method can only call static methods and not non-static methods</li>
<li>non-static methods can call static methods</li>
</ul>
</li>
<li><p>static class</p>
<ul>
<li>class cannot be declared as static</li>
<li>class is static if all variables and methods are static and constructor is private, so the only way to access is to use class name </li>
</ul>
</li>
<li><p><code>throw</code> keyword</p>
<ul>
<li>throw exception manually</li>
<li>used when program fails the condition and wants to give warning</li>
<li>throw the exception from a method to the calling method</li>
<li>calling method can decide to handle exception or throw to its calling method</li>
</ul>
</li>
</ul>
<p><a name="Concepts"></a></p>
<h2 id="Concepts">Concepts</h2>
<ul>
<li><p>object vs. class</p>
<ul>
<li>an object is an instance of a class<ul>
<li>object refers to an actual instance of a class</li>
<li>every object must belong to a class</li>
<li>objects are created and then destroyed, only live in the program for limited time</li>
</ul>
</li>
<li>objects have a lifespan but classes do not<ul>
<li>properties of objects can change while they live</li>
</ul>
</li>
</ul>
</li>
<li><p><code>static</code> and <code>instance</code> method</p>
<ul>
<li>instance method<ul>
<li>belong to the instance of a class and require the instance before it can be called</li>
<li>dynamic binding</li>
<li>JVM selects the method to invoke based on the type of object reference, known at run time </li>
</ul>
</li>
<li>static method<ul>
<li>belong to the class itself</li>
<li>static binding </li>
<li>JVM selects the method to invoke based on the actual class of the object, known at compile time</li>
</ul>
</li>
</ul>
</li>
<li><p><code>abstract</code> class and <code>interface</code></p>
<ul>
<li>abstract class<ul>
<li>contain at least one abstract method</li>
<li>can contain numbers of concrete methods</li>
<li>variable can be <code>public</code>, <code>private</code>,<code>protected</code>, <code>default</code>, or constants</li>
<li>a class can only extend one abstract class</li>
<li>not compulsory to implement all methods</li>
<li>if want to add a new feature, simply implement in the abstract class and call it from subclass</li>
</ul>
</li>
<li>interface<ul>
<li>only contain abstract methods</li>
<li>variable is by default <code>public final</code>, only has constants</li>
<li>a class can implement multiple interfaces</li>
<li>compulsory to implement all methods</li>
<li>if want to add a new feature, need to implement the method in all classes implementing the interface</li>
</ul>
</li>
</ul>
</li>
<li><p><code>instanceof</code> and <code>isInstance(Object obj)</code></p>
<ul>
<li><code>instacneof</code> is a keyword but <code>isInstance()</code> is a method</li>
<li><code>instanceof</code> check whether the object is type of particular class or subclass</li>
<li><code>isInstance()</code> only used to identify if object is of a particular class</li>
</ul>
</li>
<li><p>pass by value and pass by reference</p>
<ul>
<li>Java only supports pass by value, actual value is passed</li>
<li>Java passes the references by value, the pointer to the object is passed as value</li>
<li>references passed to the method are actually copies of the original references</li>
</ul>
</li>
<li><p><code>==</code> and <code>equals()</code></p>
<ul>
<li><code>==</code> is used to compare the references of the objects</li>
<li><code>equals()</code> can compare the values of two objects</li>
</ul>
</li>
<li><p><code>StringBuffer</code> and <code>StringBuild</code></p>
<ul>
<li><code>StringBuffer</code> is synchronized but <code>StringBuild</code> is not</li>
</ul>
</li>
<li><p><code>final</code>, <code>finally</code>,<code>finalize()</code></p>
<ul>
<li><code>final</code>: a final variable acts like constant, a final method cannot be overridden, a final class is immutable</li>
<li><code>finally</code>: handles exception, clean up after try block</li>
<li><code>finalize()</code>: method helps in garbage collection, invoked before an object is discarded by the garbage collector, allowing it to clean up its state</li>
</ul>
</li>
<li><p>static block and init block</p>
<ul>
<li>static block is loaded when class is loaded by JVM for the first time</li>
<li>init block is loaded every time the class is loaded</li>
</ul>
</li>
<li><p>object reflections</p>
<ul>
<li>provide a way to get reflective information of class and object</li>
<li>perform operations such as<ul>
<li>get information about methods and fields present inside the class at runtime</li>
<li>get a new instance of a class</li>
<li>get and set object fields directly by getting field reference, regardless what the access modifier is</li>
</ul>
</li>
<li>advantage<ul>
<li>help in observing or manipulating runtime behavior</li>
<li>help in debugging or testing programs</li>
<li>can call method by name when we do not know the method in advance  </li>
</ul>
</li>
</ul>
</li>
<li><p>Overload, Override<br>-Overloading and overriding are complementary things, overloading means the same method name but different parameters, and overriding means the same method name in a subclass with the same parameters. So its not possible for overloading and overriding to happen at the same time because overloading implies different parameters.</p>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> doSth() { <span class="comment">/// }</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="inheritance"><span class="keyword">extends</span></span> <span class="title">A</span> </span>{</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> doSth() { <span class="comment">/* method overriden */</span> }</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> doSth(String b) { <span class="comment">/* method overloaded */</span> }</div><div class="line"></div><div class="line">}</div></pre></td></tr></table></figure>


<p><a name="OOP"></a></p>
<h2 id="OOP">OOP</h2>
<ul>
<li><p>polymorphism</p>
<ul>
<li>define more than one function with the same name</li>
<li>compile time polymorphism(overloading) and runtime polymorphism(overriding)</li>
<li>method override: a class method has same name and signature as a method in parent class, JVM determines the proper method to call at runtime</li>
<li>method overloading: method with same name but different signature, determined at compile time</li>
</ul>
</li>
<li><p>inheritance</p>
<ul>
<li>allow a child class to inherit some properties from its parent class</li>
<li>use <code>extends</code> keyword</li>
<li>only public and protected access modifiers can be accessed in child class</li>
</ul>
</li>
<li><p>multiple inheritance</p>
<ul>
<li>Java does not support multiple inheritance</li>
<li>diamond problem</li>
<li>use of multiple interfaces (or extend a class and implement some interfaces)</li>
</ul>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">A</span></span>{</div><div class="line">   add();</div><div class="line">}</div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">B</span></span>{</div><div class="line">   add();</div><div class="line">}</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">implements</span> <span class="title">A</span>,<span class="title">B</span></span>{</div><div class="line">   add();</div><div class="line">}</div></pre></td></tr></table></figure>

<ul>
<li><p>abstraction</p>
<ul>
<li>convert real world objects in terms of class</li>
</ul>
</li>
<li><p>encapsulation</p>
<ul>
<li>achieved by combining the methods and attribute into a class</li>
<li>class acting like a container encapsulation the properties</li>
<li>hide how things work and expose the user requests</li>
</ul>
</li>
</ul>
<p><a name="Collections"></a></p>
<h2 id="Collections">Collections</h2>
<ul>
<li><p>ArrayList and vector</p>
<ul>
<li>synchronization<ul>
<li>ArrayList is not thread-safe but vector is </li>
<li>each method in vector class is surrounded by a synchronized block</li>
</ul>
</li>
<li>data growth<ul>
<li>both use arrays to store contents</li>
<li>enlarge array if not enough space</li>
</ul>
</li>
<li>performance<ul>
<li>vector is slower than arraylist because of thread-safe</li>
</ul>
</li>
</ul>
</li>
<li><p>Sort objects in lists</p>
<ul>
<li>implement Comparable interface for the object class and override compareTo() method</li>
<li>if object class is a jar file, create Comparator and override compare() method</li>
<li>call Collection.sort()</li>
</ul>
</li>
<li><p>HashMap and HashTable</p>
<ul>
<li>HashMap is not synchronized but HashTable is</li>
<li>use Iterator for HashMap(fail-safe) and enumerator for Hashtable(not fail-safe)</li>
<li>HashMap allows null values and only one null key; Hashtable does not allow null key or null value</li>
</ul>
</li>
<li><p>List interface</p>
<ul>
<li>ArrayList<ul>
<li>resizable array implementation</li>
<li>dynamic size</li>
<li>not thread-safe</li>
</ul>
</li>
<li>Vector<ul>
<li>ArrayList implementation</li>
<li>thread-safe</li>
</ul>
</li>
<li>LinkedList<ul>
<li>also implements Queue interface</li>
<li>FIFO</li>
<li>faster for insertion and deletion</li>
</ul>
</li>
</ul>
</li>
<li><p>Set interface</p>
<ul>
<li>SortedSet<ul>
<li>interface extends Set</li>
<li>allow data to be sorted</li>
<li>all elements inserted must implement Comparator or Comparable interface</li>
</ul>
</li>
<li>TreeSet<ul>
<li>implementation of SortedSet interface</li>
<li>O(logn) time for add, remove, contains operations</li>
<li>not synchronized</li>
</ul>
</li>
<li>HashSet<ul>
<li>implements Set interface</li>
<li>back up by hash table</li>
<li>no guarantee on constant order</li>
<li>allow null element</li>
<li>O(1) time for add,remove,contains</li>
</ul>
</li>
</ul>
</li>
<li><p>Arrays and ArrayList</p>
<ul>
<li>arrays are fixed size but ArrayLists are dynamic</li>
<li>elements in the array list can be added or removed at runtime</li>
<li>array contains elements of same type but arraylist can contain elements of different type</li>
</ul>
</li>
<li><p>ArrayList and LinkedList</p>
<ul>
<li>both fast in insertion, inserting into arraylist and into first position of linkedlist takes O(1) time</li>
<li>random lookup in ArrayList is fast, but slow for LinkedList</li>
<li>remove is slow for ArrayList(elements need to be shifted) but fast for LinkedList</li>
</ul>
</li>
<li><p>Advantage of iterator</p>
<ul>
<li>used when no clue about object type</li>
<li>iterator allows updates</li>
</ul>
</li>
<li><p>Preferred declaration</p>
<ul>
<li><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;()</code> not <code>ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;()</code></li>
<li>because function may take List as parameter</li>
<li>more flexible</li>
</ul>
</li>
<li><p>Iterator access and index access</p>
<ul>
<li>insert,update,or delete is faster for iterator access for elements in between the structure</li>
<li>insert,update,or delete is faster for index access for elements at the end</li>
<li>search is fast for index access</li>
</ul>
</li>
</ul>
<p><a name="Thread"></a></p>
<h2 id="Threading">Threading</h2>
<ul>
<li>Thread vs. Process<ul>
<li>definition<ul>
<li>process: executing instance of an application</li>
<li>thread: a path of execution within a process</li>
</ul>
</li>
<li>relationship<ul>
<li>a process can contain multiple threads</li>
<li>thread considered as lightweight process</li>
</ul>
</li>
<li>comparison<ul>
<li>thread for small tasks, process for heavy tasks</li>
<li>thread within the same process share the same address space(allow threads to read and write data to the same structures and variables, allow communication between threads), but different processes do not</li>
<li>threads are easier to create than processes because they do not require a separate address space</li>
<li>multi-threading: be careful that threads share structures that should be modified by one thread at a time</li>
<li>processes are independent of each other</li>
</ul>
</li>
</ul>
</li>
</ul>
<iframe width="100%" height="160" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A%2F%2Fsoundcloud.com%2Fxenyriki%2Fthe-pretty-reckless-under-the&auto_play=false&hide_related=true&show_comments=true&show_user=true&show_reposts=false&visual=true"></iframe>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="Java_Questions">Java Questions</h1>
<p>Contents:</p>
<ul>
<li><a href="#Keywords">Keywords</a></li>
<li><a href="#Concepts">Concepts]]>
    </summary>
    
      <category term="Concepts" scheme="http://sunbingjie.tk/tags/Concepts/"/>
    
      <category term="CC" scheme="http://sunbingjie.tk/categories/CC/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Shortest word in Dictionary]]></title>
    <link href="http://sunbingjie.tk/2015/02/27/1.3/"/>
    <id>http://sunbingjie.tk/2015/02/27/1.3/</id>
    <published>2015-02-27T09:56:12.000Z</published>
    <updated>2015-02-27T09:56:12.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>有一个输入字符，然后我有一个英文字典，说白了就是字符串数组，然后写一个function返回字典里拥有输入字符串里所有字母(非数字或者空格等符号，就是纯字母)的最短的那个字符串。举个例子：<br>输入字符串”SR 456 T”，字符串数组里有”SORT”，而且是最短的，那么就返回它</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShortestDict</span> </span>{</div><div class="line"></div><div class="line">	<span class="keyword">private</span> List&lt;String&gt; wordList;</div><div class="line">	<span class="keyword">private</span> List&lt;Integer&gt; maskList;</div><div class="line"></div><div class="line">	<span class="keyword">public</span> <span class="title">ShortestDict</span>(String[] words) {</div><div class="line">		wordList = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">		maskList = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line">		<span class="comment">//rewrite comparator to compare string length</span></div><div class="line">		Arrays.sort(words, <span class="keyword">new</span> Comparator&lt;String&gt;(){</div><div class="line">			<span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span>(String s1, String s2) {</div><div class="line">				<span class="keyword">return</span> s1.length() - s2.length();</div><div class="line">			}</div><div class="line">		});</div><div class="line"></div><div class="line">		<span class="keyword">for</span> (String word : words) {</div><div class="line">			wordList.add(word);</div><div class="line">			maskList.add(getMask(word));</div><div class="line">		}</div><div class="line">	}</div><div class="line"></div><div class="line">	<span class="keyword">public</span> String <span class="title">getShortest</span>(String inputWord) {</div><div class="line">		<span class="keyword">int</span> inputMask = getMask(inputWord);</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maskList.size(); i++) {</div><div class="line">			<span class="keyword">if</span> (inputMask == (inputMask & maskList.get(i))) {</div><div class="line">				<span class="keyword">return</span> wordList.get(i);</div><div class="line">			}</div><div class="line">		}</div><div class="line">		<span class="keyword">return</span> <span class="string">""</span>;</div><div class="line">	}</div><div class="line"></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getMask</span>(String word) { </div><div class="line">		<span class="keyword">int</span> mask = <span class="number">0</span>;</div><div class="line">		word = word.toLowerCase();</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">char</span> c : word.toCharArray()) {</div><div class="line">			<span class="keyword">if</span> (<span class="string">'a'</span> &lt;= c && c &lt;= <span class="string">'z'</span>) {</div><div class="line">				mask |= (<span class="number">1</span> &lt;&lt; (c - <span class="string">'a'</span>));</div><div class="line">			} </div><div class="line">		}</div><div class="line">		<span class="keyword">return</span> mask;</div><div class="line">	}</div><div class="line"></div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] args) {</div><div class="line">		String[] words = <span class="keyword">new</span> String[]{<span class="string">"so99ort"</span>, <span class="string">"so1rt"</span>, <span class="string">"skype"</span>, <span class="string">"so11rt"</span>, <span class="string">"apppples"</span>};</div><div class="line">		ShortestDict d = <span class="keyword">new</span> ShortestDict(words);</div><div class="line">		System.out.println(d.getShortest(<span class="string">"SR 456 T"</span>));</div><div class="line"></div><div class="line">	} </div><div class="line">}</div></pre></td></tr></table></figure>

<iframe width="100%" height="160" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A%2F%2Fsoundcloud.com%2Fitsdimmi%2Fet-voila-dimmi&auto_play=false&hide_related=true&show_comments=true&show_user=true&show_reposts=false&visual=true"></iframe>

]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>有一个输入字符，然后我有一个英文字典，说白了就是字符串数组，然后写一个function返回字典里拥有输入字符串里所有字母(非数字或者空格等符号，就是纯字母)的最短的那个字符串。举个例子：<br>输入字符串”SR 456 T”，字符串数组里有”SOR]]>
    </summary>
    
      <category term="String" scheme="http://sunbingjie.tk/tags/String/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[把《编程珠玑》读薄]]></title>
    <link href="http://sunbingjie.tk/2015/02/25/1.28/"/>
    <id>http://sunbingjie.tk/2015/02/25/1.28/</id>
    <published>2015-02-26T03:54:11.000Z</published>
    <updated>2015-02-26T03:54:11.000Z</updated>
    <content type="html"><![CDATA[<p>出处：<a href="http://hawstein.com/posts/make-thiner-programming-pearls.html" target="_blank" rel="external">http://hawstein.com/posts/make-thiner-programming-pearls.html</a></p>
<h2>目录</h2><br><ol><br><li><a href="#Begin">开篇</a></li><br><li><a href="#AhaAlgo">啊哈！算法</a></li><br><li><a href="#DataSP">数据决定程序结构</a></li><br><li><a href="#WriteCP">编写正确的程序</a></li><br><li><a href="#SmallM">编程中的次要问题</a></li><br><li><a href="#Performance">程序性能分析</a></li><br><li><a href="#Estimate">粗略估算</a></li><br><li><a href="#AlgoDesign">算法设计技术</a></li><br><li><a href="#CodeTuning">代码调优</a></li><br><li><a href="#SqueezingSpace">节省空间</a></li><br><li><a href="#Sorting">排序</a></li><br><li><a href="#Sampling">取样问题</a></li><br><li><a href="#Searching">搜索</a></li><br><li><a href="#Heap">堆</a></li><br><li><a href="#String">字符串</a></li><br></ol><br><h2><a id="Begin">开篇</a></h2>

<p>具体化你的解决的问题。下面是A和B的对话。</p>

<pre><code>A：我该如何对磁盘文件进行排序？
B：需要排序的内容是什么？文件中有多少条记录？每个记录的格式是什么？
A：该文件包含至多10,000,000个记录，每条记录都是一个7位整数。
B：如果文件那么小，为什么要使用磁盘排序呢？为什么不在主存中对它排序？
A：该功能是某大型系统中的一部分，大概只能提供1MB主存给它。
B：你能将记录方面的内容说得更详细一些吗？
A：每个记录是一个7位正整数，没有其它的关联数据，每个整数至多只能出现一次。
... ...
</code></pre>

<p>经过一系统的问题，我们可以将一个定义模糊不清的问题变得具体而清晰：</p>

<pre><code>输入：
所输入的是一个文件，至多包含n个正整数，每个正整数都要小于n，这里n=10^7。
如果输入时某一个整数出现了两次，就会产生一个致命的错误。
这些整数与其它任何数据都不关联。
输出：
以增序形式输出经过排序的整数列表。
约束：
大概有1MB的可用主存，但可用磁盘空间充足。运行时间至多允许几分钟，
10秒钟是最适宜的运行时间。
</code></pre>

<p>如果主存容量不是严苛地限制在1MB，比如说可以是1MB多，或是1~2MB之间，<br>那么我们就可以一次性将所有数据都加载到主存中，用Bitmap来做。<br>10,000,000个数就需要10,000,000位，也就是10,000,000b = 1.25MB。</p>

<p>程序可分为三个部分：第一，初始化所有的位为0；第二，读取文件中每个整数，<br>如果该整数对应的位已经为1，说明前面已经出现过这个整数，抛出异常，退出程序<br>(输入要求每个整数都只能出现一次)。否则，将相应的位置1；第三，<br>检查每个位，如果某个位是1，就写出相应的整数，从而创建已排序的输出文件。</p>

<p>如果主存容量严苛地限制在1MB，而使用Bitmap需要1.25MB，<br>因此无法一次载入完成排序。那么，我们可以将该文件分割成两个文件，<br>再分别用Bitmap处理。分割策略可以简单地把前一半的数据放到一个文件，<br>后一半的数据放到另一个文件，分别排序后再做归并。<br>也可以把文件中小于某个数(比如5,000,000)的整数放到一个文件，叫less.txt，<br>把其余的整数放到另一个文件，叫greater.txt。分别排序后，<br>把greater.txt的排序结果追加到less.txt的排序结果即可。</p>

<h2><a id="AhaAlgo">啊哈！算法</a></h2>

<p>第2章围绕3个问题展开。</p>

<ul><br><li>给定一个包含32位整数的顺序文件，它至多只能包含40亿个这样的整数，<br>并且整数的次序是随机的。请查找一个此文件中不存在的32位整数。<br>在有足够主存的情况下，你会如何解决这个问题？<br>如果你可以使用若干外部临时文件，但可用主存却只有上百字节，<br>你会如何解决这个问题？</li><br></ul>


<p>这是CTCI中的一道题目，详细解答请戳以下链接：</p>

<p><a href="http://www.hawstein.com/posts/12.3.html" target="_blank" rel="external">请猛戳我</a></p>

<ul><br><li>请将一个具有n个元素的一维向量向左旋转i个位置。例如，假设n=8,i=3，<br>那么向量abcdefgh旋转之后得到向量defghabc。</li><br></ul>


<p>这个问题很常见了，做3次翻转即可，无需额外空间：</p>

<pre><code>reverse(0, i-1); // cbadefgh
reverse(i, n-1); // cbahgfed
reverse(0, n-1); // defghabc
</code></pre>

<ul><br><li>给定一本英语单词词典，请找出所有的变位词集。例如，因为“pots”，<br>“stop”，“tops”相互之间都是由另一个词的各个字母改变序列而构成的，<br>因此这些词相互之间就是变位词。</li><br></ul>


<p>这个问题可以分3步来解决。第一步将每个单词按字典序排序，<br>做为原单词的签名，这样一来，变位词就会具有相同的签名。<br>第二步对所有的单词按照其签名进行排序，这样一来，变位词就会聚集到一起。<br>第三步将变位词分组，形成变位词集。示意图如下：</p>

<p><img src="http://www.hawstein.com/assets/img/2013/8/11/anagrams.png"></p>

<h2><a id="DataSP">数据决定程序结构</a></h2>

<p>恰当的数据视图实际上决定了程序的结构。<br>我们常常可以通过重新组织内部数据来使程序变得小而美。</p>

<p>发明家悖论：更一般性的问题也许更容易解决。(有时候吧)</p>

<p>程序员在节省空间方面无计可施时，将自己从代码中解脱出来，<br>退回起点并集中心力研究数据，常常能有奇效。数据的表示形式是程序设计的根本。</p>

<p>下面是退回起点进行思考时的几条原则：</p>

<ul><br><li><p>使用数组重新编写重复代码。冗长的相似代码常常可以使用最简单的数据结构——<br>数组来更好地表述。</p></li><br><li><p>封装复杂结构。当需要非常复杂的数据结构时，使用抽象术语进行定义，<br>并将操作表示为类。</p></li><br><li><p>尽可能使用高级工具。超文本，名字-值对，电子表格，数据库，<br>编程语言等都是特定问题领域中的强大的工具。</p></li><br><li><p>从数据得出程序的结构。在动手编写代码之前，优秀的程序员会彻底理解输入，<br>输出和中间数据结构，并围绕这些结构创建程序。</p></li><br></ul>


<p>提到的书籍：Polya的《How to Solve it》，中文书《怎样解题》；<br>Kernighan和Plauger的《Elements of Programming Style》；Fred Brooks的《人月神话》<br>Steve McConnell的《代码大全》；《Rapid Development》；<br>《Software Project Survival Guide》</p>

<h2><a id="WriteCP">编写正确的程序</a></h2>

<p>本章以二分搜索为例子，讲述了如何对程序进行验证及正确性分析。</p>

<p>深入阅读：David Gries的《Science of Programming》<br>是程序验证领域里极佳的一本入门书籍。</p>

<h2><a id="SmallM">编程中的次要问题</a></h2>

<p>到目前为止，你已经做了一切该做的事：通过深入挖掘定义了正确的问题，<br>通过仔细选择算法和数据结构平衡了真正的需求，通过程序验证技术写出了优雅的代码，<br>并且对其正确性相当有把握。万事俱备，只欠编程。</p>

<ul><br><li><p>使用断言assert</p></li><br><li><p>自动化测试程序</p></li><br></ul>


<p>进阶阅读：《Practice of Programming》第5章(调试)，第6章(测试)<br>《Code Complete》第25章(单元测试)，第26章(调试)</p>

<h2><a id="Performance">程序性能分析</a></h2>

<p>下图展示了一个程序的性能提升过程，<br>该程序的作用是对三维空间中n个物体的运动进行仿真。从图中可以看出，<br>一个程序可以从多方面进行性能提升，而其中算法和数据结构的选择又显得尤为重要。</p>

<p><img src="http://www.hawstein.com/assets/img/2013/8/11/improve.png"></p>

<p>从设计层面提升程序性能：</p>

<ol><br><li>问题定义。良好的问题定义可以有效减少程序运行时间和程序长度。</li><br><li>系统结构。将大型系统分解成模块，也许是决定其性能的最重要的单个因素。</li><br><li>算法和数据结构。这个不用说了。</li><br><li>代码调优。针对代码本身的改进。</li><br><li>系统软件。有时候改变系统所基于的软件比改变系统本身更容易。</li><br><li>硬件。更快的硬件可以提高系统的性能。</li><br></ol>


<p>深入阅读：Butler Lampson的“Hints for Computer System Design”，<br>该论文特别适合于集成硬件和软件的计算机系统设计。</p>

<h2><a id="Estimate">粗略估算</a></h2>

<p>这一章讲述了估算技术，我认为是相当有用的一章。</p>

<p>文中先抛出一个问题：密西西比河一天流出多少水？如果让你来回答，<br>你会怎么答，注意不能去Google哦。</p>

<p>作者是这么回答这个问题：假设河的出口大约有1英里宽和20英尺深(1/250英里)，<br>而河水的流速是每小时5英里，也就是每天120英里。则可以计算出一天的流量：</p>

<pre><code>1英里 * 1/250英里 * 120英里/天  约等于  1/2 英里^3/天
</code></pre>

<p>上述算式非常简单，可是在看到这些文字之前，如果有人真的问你，<br>密西西比河一天流出多少水？你真的能答上来吗？还是愣了一下后，摆摆手，说：<br>这我哪知道！</p>

<p>对于上面的问题，我们至少可以注意到以下两点：</p>

<ol><br><li><p>你需要把问题转换成一个可计算的具体模型。这一点往往不需要太担心，<br>因为我们做的是估算，所以可以忽视很多无关紧要的因素，可以去简化你的模型，<br>记住我们要的只是一个粗略计算的结果。比如对于上面的问题，<br>计算密西西比河一天流出多少水其实就是计算其一天的流量，利用中学所学知识，<br>流量 = 截面积 x 流速，那我们就只需计算密西西比河的出水口的截面积和流速即可。<br>我们可以将出水口简化成一个矩形，因此就只需要知道出水口的宽和深即可。</p></li><br><li><p>你需要知道常识性的东西。上面我们已经把问题转换成了一个可计算的具体模型：<br>流量 = 出水口宽 x 出水口深 x 流速。接下来呢？你需要代入具体的数值去求得答案。<br>而这就需要你具备一些常识性的知识了。比如作者就估计了密西西比河的出口有1英里宽，<br>20英尺深(如果你估计只有几十米宽，那就相差得太离谱了)。<br>这些常识性的知识比第1点更值得关注，因为你无法给出一个靠谱的估算值往往是因为这点。</p></li><br></ol>


<p>当我们懂得如何把一个问题具体化定义出来并为其选用适当的模型，<br>并且我们也积累了必要的常识性的知识后，回答那些初看起来无从下手的问题也就不难了。<br>这就是估算的力量。</p>

<p>以下是估算时的一些有用提示：</p>

<ul><br><li><p>两个答案比一个答案好。即鼓励你从多个角度去对一个问题进行估算，<br>如果从不同角度得到的答案差别都不大，说明这个估算值是比较靠谱的。</p></li><br><li><p>快速检验。即量纲检验。即等式两边最终的量纲要一致。<br>这一点在等式简单的时候相当显而易见。比如位移的单位是米，时间单位是秒，<br>速度单位是米/秒，那显然我们应该要用位移去除以时间来得到速度，<br>这样才能保证它们单位的一致。你可能会说，我了个去，这种小学生都懂的事，<br>你好意思拿出来讲。其实不然，当你面对的是一个具有多个变量的复杂物理公式，<br>或者你提出某种物理假设，正在考虑将其公式化，该方法可以切切实实地帮你做出检验。</p></li><br><li><p>经验法则。“72法则”：1.假设以年利率r%投资一笔钱y年，如果r<em>y = 72，<br>那么你的投资差不多会翻倍。2.如果一个盘子里的菌群以每小时3%的速率增长，<br>那么其数量每天(24小时)都会翻倍。在误差不超过千分之五的情况下，<br>\pi秒就是一个纳世纪。也就是说：</em></p><br><br><p>  3.14秒 = 10<sup>-9</sup>  100年 = 10<sup>-7</sup> 年</p></li><br></ul>


<p>也就是说，1年大概是3.14x10<sup>7</sup> 秒。所以如果有人告诉你，一个程序运行10<sup>7</sup> 秒，<br>你应该能很快反应出，他说的其实是4个月。</p>

<ul><br><li>实践。与许多其他活动一样，估算技巧只能通过实践来提高。</li><br></ul>


<p>如果问题的规模太大，我们还可以通过求解它的小规模同质问题来做估算。比如，<br>我们想测试某个程序运行10亿次需要多长时间，如果你真去跑10亿次，<br>说不定运行几个小时都没结束，那不是很悲剧？我们可以运行这个程序1万次或是10万次，<br>得出结果然后倍增它即可。当然，这个结果未必是准确的，<br>因为你没法保证运行时间是随着运行次数线性增加的。谨慎起见，我们可以运行不同的次数，<br>来观察它的变化趋势。比如运行10次，100次，1000次，10000次等，<br>观察它的运行时间是否是线性增加的，或是一条二次曲线。</p>

<p>有时候，我们需要为估算的结果乘上一个安全系数。比如，<br>我们预估完成某项功能需要时间t，那根据以往经验，也许我们需要为这个值乘上2或4，<br>这样也许才是一个靠谱的预估值。</p>

<p>Little定律：系统中物体的平均数量等于物体离开系统的平均速率和每个物体在系统中停留<br>的平均时间的乘积。(如果物体离开和进入系统的总体出入流是平衡的，<br>那么离开速率也就是进入速率)</p>

<p>举个例子，比如你正在排除等待进入一个火爆的夜总会，<br>你可以通过估计人们进入的速率来了解自己还要等待多长时间。根据Little定律，<br>你可以推论：这个地方可以容纳约60人，每个人在里面逗留时间大约是3小时，<br>因此我们进入夜总会的速率大概是每小时20人。现在队伍中我们前面还有20人，<br>也就意味着我们还要等待大约一个小时。</p>

<p>深入阅读：Darrell Huff的《How To Lie With Statistics》；关键词：<br>费米近似(Fermi estimate, Fermi problem)</p>

<h2><a id="AlgoDesign">算法设计技术</a></h2>

<p>这一章就一个小问题研究了4种不同的算法，重点强调这些算法的设计技术。<br>研究的这个小问题是一个非常常见的面试题：子数组之和的最大值。<br>如果之前没有听过，建议Google之。</p>

<p>深入阅读：Aho,Hopcroft和Ullman的《Data Structures and Algorithms》<br>Cormen,Leiserson,Rivest和Stein的《Introduction to Algorithms》</p>

<h2><a id="CodeTuning">代码调优</a></h2>

<p>前面各章讨论了提高程序效率的高层次方法：问题定义，系统结构，<br>算法设计及数据结构选择。本章讨论的则是低层次的方法：代码调优。</p>

<p>代码调优的最重要原理就是尽量少用它。不成熟的优化是大量编程灾害的根源。<br>它会危及程序的正确性，功能性以及可维护性。当效率很重要时，<br>第一步就是对系统进行性能监视，以确定其运行时间的分布状况。<br>效率问题可以由多种方法来解决，只有在确信没有更好的解决方案时才考虑进行代码调优。</p>

<p>事实上，如果不是十分十分必要，不要去做代码调优，<br>因为它会牺牲掉软件的其他许多性质。</p>

<p>so，just skip this chapter。</p>

<h2><a id="SqueezingSpace">节省空间</a></h2>

<p>本章讲述了节省空间的一些重要方法。</p>

<p>减少程序所需数据的存储空间，一般有以下方法：</p>

<ul><br><li>不存储，重新计算。</li><br><li>稀疏数据结构。下面着重讲一下这点。</li><br><li>数据压缩。可以通过压缩的方式对对象进行编码，以减少存储空间。</li><br><li>分配策略。只有在需要的时候才进行分配。</li><br><li>垃圾回收。对废弃的存储空间进行回收再利用。</li><br></ul>


<p>以下是节省代码空间的几种通用技术：</p>

<ul><br><li>函数定义。用函数替换代码中的常见模式可以简化程序，同时减少代码的空间需求。</li><br><li>解释程序。用解释程序命令替换长的程序文本。</li><br><li>翻译成机器语言。可以将大型系统中的关键部分用汇编语言进行手工编码。</li><br></ul>


<p><strong>稀疏数据结构</strong></p>

<p>假设我们有一个200 x 200的矩阵(共40000个元素)，里面只有2000个元素有值，<br>其它的都为0，示意图如下：</p>

<p><img src="http://www.hawstein.com/assets/img/2013/8/11/matrix.png"></p>

<p>显然这是一个稀疏矩阵，直接用一个200 x 200<br>的二维数组来存储这些数据会造成大量的空间浪费，共需要200x200x4B=160KB。<br>所以，我们应该想办法用另一种形式来存储这些数据。</p>

<p><strong>方法一</strong></p>

<p>使用数组表示所有的列，同时使用链表来表示给定列中的活跃元素。<br>如下图所示：</p>

<p><img src="http://www.hawstein.com/assets/img/2013/8/11/sparse_matrix.png"></p>

<p>该结构中，有200个指针(colhead)和2000条记录(每条记录是两个整数和一个指针)，<br>占用空间是200x4B + 2000x12B = 24800B = 24.8KB，<br>比直接用二维数组存储(160KB)要小很多。</p>

<p><strong>方法二</strong></p>

<p>我们可以开三个数组来保存这些数，如下图所示：</p>

<p><img src="http://www.hawstein.com/assets/img/2013/8/11/3array.png"></p>

<p>firstincol是一个长度为201的数组，对于第i列，在数组row中，<br>下标为firstincol[i]到firstincol[i+1]-1对应的行元素非0，<br>其值存储在相应的pointnum数组中。</p>

<p>比如对于上图，在第0列中，元素值非0的行有3行，分别是row[0],row[1],row[2],<br>元素值是pointnum[0],pointnum[1],pointnum[2]；在第1列中，元素值非0的行有2行，<br>分别是row[3],row[4]，元素值是pointnum[3],pointnum[4]。依次类推。</p>

<p>该结构所需要的存储空间为2x2000x4B + 201x4B = 16804B = 16.8KB。<br>由于row数组中的元素全部都小于200，所以每个元素可以用一个unsigned char来保存，<br>firstincol数组中元素最大也就2000，所以可以用一个short(或unsigned short)来保存，<br>pointnum中的元素是一个4B的int，<br>最终所需空间变为：2000x4B + 2000x1B + 201x2B = 10402B = 10.4KB。</p>

<p>深入阅读：Fred Brooks的《人月神话》</p>

<h2><a id="Sorting">排序</a></h2>

<p>本章先简单介绍了插入排序，然后着重讲述快速排序。</p>

<p><strong>插入排序</strong></p>

<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 版本1</span></div><div class="line"><span class="keyword">void</span> InsertSort(<span class="keyword">int</span> a[], <span class="keyword">int</span> n) {</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;n; ++i)</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i; j&gt;<span class="number">0</span> && a[j-<span class="number">1</span>]&gt;a[j]; —j)</div><div class="line">            swap(a[j-<span class="number">1</span>], a[j]);</div><div class="line">}</div><div class="line"><span class="comment">// 版本2</span></div><div class="line"><span class="keyword">void</span> InsertSort1(<span class="keyword">int</span> a[], <span class="keyword">int</span> n) {</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;n; ++i) {</div><div class="line">        <span class="keyword">int</span> t = a[i];</div><div class="line">        <span class="keyword">int</span> j = i;</div><div class="line">        <span class="keyword">for</span>(; j&gt;<span class="number">0</span> && a[j-<span class="number">1</span>]&gt;t; —j)</div><div class="line">            a[j] = a[j-<span class="number">1</span>];</div><div class="line">        a[j] = t;</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<p><strong>快速排序</strong></p>

<blockquote><blockquote><p>我们在这里规定：小于等于pivot的元素移到左边，大于pivot的元素移到右边。</p></blockquote></blockquote>

<p><strong>实现1：单向移动版本</strong></p>

<p>这个版本的关键是设置一快一慢两个指针，慢指针左侧都是小于等于pivot(包含慢指针所在位置)，<br>慢指针到快指针之间的值是大于pivot，快指针右侧的值是还未比较过的。示意图如下：</p>

<pre><code>小于等于pivot    ｜    大于pivot    ｜    ？
             slow                fast
</code></pre>

<p>快指针一次一步向前走，遇到大于pivot什么也不做继续向前走。遇到小于等于pivot的元素，<br>则慢指针slow向前走一步，然后交换快慢指针指向的元素。一次划分结束后，<br>再递归对左右两侧的元素进行快排。代码如下：</p>

<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 数组快排</span></div><div class="line"><span class="keyword">void</span> QSort(<span class="keyword">int</span> a[], <span class="keyword">int</span> head, <span class="keyword">int</span> end) {</div><div class="line">    <span class="keyword">if</span>(a==NULL || head==end) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">int</span> slow = head, fast = head + <span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> pivot = a[head];</div><div class="line">    <span class="keyword">while</span>(fast != end) {</div><div class="line">        <span class="keyword">if</span>(a[fast] &lt;= pivot)</div><div class="line">            swap(a[++slow], a[fast]);</div><div class="line">        ++fast;</div><div class="line">    }</div><div class="line">    swap(a[head], a[slow]);</div><div class="line">    QSort(a, head, slow);</div><div class="line">    QSort(a, slow+<span class="number">1</span>, end);</div><div class="line">}</div></pre></td></tr></table></figure>

<p>排序数组a只需要调用QSort(a, 0, n)即可。该思路同样可以很容易地在链表上实现：</p>

<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 单链表快排</span></div><div class="line"><span class="keyword">void</span> qsort(Node head, Node end){</div><div class="line">    <span class="keyword">if</span>(head==NULL || head==end) <span class="keyword">return</span>;</div><div class="line">    Node slow = head, fast = head-&gt;next;</div><div class="line">    <span class="keyword">int</span> pivot = head-&gt;data;</div><div class="line">    <span class="keyword">while</span>(fast != end){</div><div class="line">        <span class="keyword">if</span>(fast-&gt;data &lt;= pivot){</div><div class="line">            slow = slow-&gt;next;</div><div class="line">            swap(slow-&gt;data, fast-&gt;data);</div><div class="line">        }</div><div class="line">        fast = fast-&gt;next;</div><div class="line">    }</div><div class="line">    swap(head-&gt;data, slow-&gt;data);</div><div class="line">    qsort(head, slow);</div><div class="line">    qsort(slow-&gt;next, end);</div><div class="line">}</div></pre></td></tr></table></figure>

<p>排序头指针为head的单链表只需调用qsort(head, NULL)即可。</p>

<p><strong>实现2：双向移动版本</strong></p>

<p>版本1能能够快速完成对随机整数数组的排序，但如果数组有序，<br>或是数组中元素相同，快排的时间复杂度会退化成O(n<sup>2</sup> )，性能变得非常差。</p>

<p>一种缓解方案是使用双向移动版本的快排，它每次划分也是使用两个指针，<br>不过一个是从左向右移动，一个是从右向左移动，示意图如下：</p>

<pre><code>小于等于pivot    ｜    ？    ｜    大于pivot
               i            j
</code></pre>

<p>指针j不断向左移动，直到遇到小于等于pivot，就交换指针i和j所指元素<br>(指针i一开始指向pivot)；指针i不断向右移动，直到遇到大于pivot的，<br>就交换指针i和j所指元素。pivot在这个过程中，不断地换来换去，<br>最终会停在分界线上，分界线左边都是小于等于它的元素，右边都是大于它的元素。<br>这样就避免了最后还要交换一次pivot的操作，代码也变得美观许多。</p>

<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> partition(<span class="keyword">int</span> a[], <span class="keyword">int</span> low, <span class="keyword">int</span> high){</div><div class="line">    <span class="keyword">int</span> pivot = a[low], i=low, j=high;</div><div class="line">    <span class="keyword">while</span>(i &lt; j){</div><div class="line">        <span class="keyword">while</span>(i&lt;j && a[j]&gt;pivot) —j;</div><div class="line">        <span class="keyword">if</span>(i &lt; j) swap(a[i], a[j]);</div><div class="line">        <span class="keyword">while</span>(i&lt;j && a[i]&lt;=pivot) ++i;</div><div class="line">        <span class="keyword">if</span>(i &lt; j) swap(a[i], a[j]);</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> i;</div><div class="line">}</div><div class="line"><span class="keyword">void</span> quicksort(<span class="keyword">int</span> a[], <span class="keyword">int</span> first, <span class="keyword">int</span> last){</div><div class="line">    <span class="keyword">if</span>(first&lt;last){</div><div class="line">        <span class="keyword">int</span> k = partition(a, first, last);</div><div class="line">        quicksort(a, first, k-<span class="number">1</span>);</div><div class="line">        quicksort(a, k+<span class="number">1</span>, last);</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>当然，如果对于partition函数，你如果觉得大循环内的两个swap还是做了些无用功的话，<br>也可以把pivot的赋值放到最后一步，而不是在这个过程中swap来swap去的。代码如下：</p>

<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> partition(<span class="keyword">int</span> a[], <span class="keyword">int</span> low, <span class="keyword">int</span> high){</div><div class="line">    <span class="keyword">int</span> pivot = a[low], i=low, j=high;</div><div class="line">    <span class="keyword">while</span>(i&lt;j){</div><div class="line">        <span class="keyword">while</span>(i&lt;j && a[j]&gt;pivot) —j;</div><div class="line">        <span class="keyword">if</span>(i&lt;j) a[i++] = a[j];</div><div class="line">        <span class="keyword">while</span>(i&lt;j && a[i]&lt;=pivot) ++i;</div><div class="line">        <span class="keyword">if</span>(i&lt;j) a[j—] = a[i];</div><div class="line">    }</div><div class="line">    a[i] = pivot;</div><div class="line">    <span class="keyword">return</span> i;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>如果数组基本有序，那随机选择pivot(而不像上面那样选择第一个做为pivot)<br>会得到更好的性能。在partition函数里，我们只需要在数组中随机选一个元素，<br>然后将它和数组中第一个元素交换，后面的划分代码无需改变，<br>就可以达到随机选择pivot的效果。</p>

<p><strong>进一步优化</strong></p>

<p>对于小数组，用插入排序之类的简单方法来排序反而会更快，因此在快排中，<br>当数组长度小于某个值时，我们就什么也不做。对应到代码中，<br>就是修改quicksort中的if条件：</p>

<pre><code>if(first &lt; last)  改为  if(last-first &gt; cutoff)
</code></pre>

<p>其中cutoff是一个小整数。程序结束时，数组并不是有序的，<br>而是被组合成一块一块随机排列的值，并且满足这样的条件：<br>某一块中的元素小于它右边任何块中的元素。我们必须通过另一种排序算法对块内进行排序。<br>由于数组是几乎有序的，因此插入排序比较适用。</p>

<p>这种方法结合了快排和插入排序，让它们去做各自擅长的事情，往往比单纯用快排要快。</p>

<p>深入阅读：Don Knuth的《The Art of Computer Programming, Volume 3:<br>Sorting and Searching》；Robert Sedgewick的《Algorithms》；<br>《Algorithms in C》,《Algorithms in C++》,《Algorithms in Java》。</p>

<h2><a id="Sampling">取样问题</a></h2>

<p>本章讲述了一个小的随机抽样问题，并用不同的方法来解决它。</p>

<p>问题：对于整数m和n，其中m&lt;n，输出0~n-1范围内m个随机整数的<code>有序列表</code>，<br>不允许重复。</p>

<p>比如m=3, n=5，那么一种可能输出是0，2，3(要求有序)。实现1来自Knuth的TAOCP，<br>时间复杂度O(n)：</p>

<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> GenKnuth(<span class="keyword">int</span> m, <span class="keyword">int</span> n) {</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; ++i) {</div><div class="line">        <span class="keyword">if</span>((bigrand()%(n-i)) &lt; m) {</div><div class="line">            cout&lt;&lt;i&lt;&lt;endl;</div><div class="line">            —m;</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>其中，bigrand()的作用是返回一个很大的随机整数。</p>

<p>实现2：在一个初始为空的集合里面插入随机整数，直到个数足够。代码如下：</p>

<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> GenSets(<span class="keyword">int</span> m, <span class="keyword">int</span> n) {</div><div class="line">    set&lt;<span class="keyword">int</span>&gt; s;</div><div class="line">    <span class="keyword">while</span>(s.size() &lt; m)</div><div class="line">        s.insert(bigrand() % n);</div><div class="line">    set&lt;<span class="keyword">int</span>&gt;::iterator i;</div><div class="line">    <span class="keyword">for</span>(i=s.begin(); i!=s.end(); ++i)</div><div class="line">        cout&lt;&lt;*i&lt;&lt;endl;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>实现3：把包含整数0～n-1的数组顺序打乱，然后把前m个元素排序输出。<br>该方法的性能通常不如Knuth的算法。代码如下：</p>

<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> GenShuf(<span class="keyword">int</span> m, <span class="keyword">int</span> n) {</div><div class="line">    <span class="keyword">int</span> x[n];</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; ++i)</div><div class="line">        x[i] = i;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;m; ++i) {</div><div class="line">        <span class="keyword">int</span> j = randint(i, n-<span class="number">1</span>);</div><div class="line">        swap(x[i], x[j]);</div><div class="line">    }</div><div class="line">    sort(x, x+m);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;m; ++i)</div><div class="line">        cout&lt;&lt;x[i]&lt;&lt;endl;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>深入阅读：Don Knuth的《The Art of Computer Programming,<br>Volume 2: Seminumerical Algorithms》</p>

<h2><a id="Searching">搜索</a></h2>

<p>本章详细研究这样一个搜索问题：在没有其他相关数据的情况下，如何存储一组整数？<br>为些介绍了5种数据结构：有序数组，有序链表，二叉搜索树，箱，位向量。</p>

<p>其中，二叉搜索树应该熟练掌握，以下是一种实现：</p>

<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div></pre></td><td class="code"><pre><div class="line">struct Node {</div><div class="line">    <span class="keyword">int</span> data;</div><div class="line">    Node lchild, rchild, parent;</div><div class="line">    Node(): lchild(NULL), rchild(NULL), parent(NULL) { }</div><div class="line">};</div><div class="line"></div><div class="line">class BST {</div><div class="line"><span class="keyword">private</span>:</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> kMax = <span class="number">1000</span>;</div><div class="line">    Node root, *parent, nodes[kMax];</div><div class="line">    <span class="keyword">int</span> size;</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    Node <span class="title">minimum</span>(Node node);</div><div class="line">    Node maximum(Node node);</div><div class="line">    Node successor(Node node);</div><div class="line">    Node predecessor(Node node);</div><div class="line">    <span class="keyword">void</span> Insert(Node &node, <span class="keyword">int</span> x);</div><div class="line">    <span class="keyword">void</span> InorderTraver(Node node);</div><div class="line">    Node Find(Node node, <span class="keyword">int</span> x);</div><div class="line"></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="title">BST</span>(): <span class="title">root</span>(NULL), <span class="title">parent</span>(NULL), <span class="title">size</span>(0) {</div><div class="line">        memset(nodes, <span class="string">'\0'</span>, sizeof(nodes));</div><div class="line">    }</div><div class="line">    <span class="keyword">void</span> Insert(<span class="keyword">int</span> x);</div><div class="line">    <span class="keyword">void</span> InorderTraver();</div><div class="line">    Node Find(<span class="keyword">int</span> x);</div><div class="line">    <span class="keyword">void</span> Remove(Node z);</div><div class="line">};</div><div class="line"></div><div class="line">Node BST::minimum(Node node) {</div><div class="line">    <span class="keyword">if</span>(node == NULL) <span class="keyword">return</span> NULL;</div><div class="line">    <span class="keyword">while</span>(node-&gt;lchild)</div><div class="line">        node = node-&gt;lchild;</div><div class="line">    <span class="keyword">return</span> node;</div><div class="line">}</div><div class="line"></div><div class="line">Node BST::maximum(Node node) {</div><div class="line">    <span class="keyword">if</span>(node == NULL) <span class="keyword">return</span> NULL;</div><div class="line">    <span class="keyword">while</span>(node-&gt;rchild)</div><div class="line">        node = node-&gt;rchild;</div><div class="line">    <span class="keyword">return</span> node;</div><div class="line">}</div><div class="line"></div><div class="line">Node BST::successor(Node node) {</div><div class="line">    <span class="keyword">if</span>(node-&gt;rchild)</div><div class="line">        <span class="keyword">return</span> minimum(node-&gt;rchild);</div><div class="line">    Node y = node-&gt;parent;</div><div class="line">    <span class="keyword">while</span>(y && node==y-&gt;rchild) {</div><div class="line">        node = y;</div><div class="line">        y = node-&gt;parent;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> y;</div><div class="line">}</div><div class="line"></div><div class="line">Node BST::predecessor(Node node) {</div><div class="line">    <span class="keyword">if</span>(node-&gt;lchild)</div><div class="line">        <span class="keyword">return</span> maximum(node-&gt;lchild);</div><div class="line">    Node y = node-&gt;parent;</div><div class="line">    <span class="keyword">while</span>(y && node==y-&gt;lchild) {</div><div class="line">        node = y;</div><div class="line">        y = node-&gt;parent;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> y;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">void</span> BST::Insert(Node* &node, <span class="keyword">int</span> x) {</div><div class="line">    <span class="keyword">if</span>(node == NULL) {</div><div class="line">        nodes[size].data = x;</div><div class="line">        nodes[size].parent = parent;</div><div class="line">        node = &nodes[size];</div><div class="line">        ++size;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    }</div><div class="line">    parent = node;</div><div class="line">    <span class="keyword">if</span>(x &lt; node-&gt;data)</div><div class="line">        Insert(node-&gt;lchild, x);</div><div class="line">    <span class="keyword">else</span></div><div class="line">        Insert(node-&gt;rchild, x);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">void</span> BST::Insert(<span class="keyword">int</span> x) {</div><div class="line">    Insert(root, x);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">void</span> BST::InorderTraver(Node* node) {</div><div class="line">    <span class="keyword">if</span>(node == NULL) <span class="keyword">return</span>;</div><div class="line">    InorderTraver(node-&gt;lchild);</div><div class="line">    cout&lt;&lt;node-&gt;data&lt;&lt;<span class="string">" "</span>;</div><div class="line">    InorderTraver(node-&gt;rchild);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">void</span> BST::InorderTraver() {</div><div class="line">    InorderTraver(root);</div><div class="line">}</div><div class="line"></div><div class="line">Node BST::Find(Node node, <span class="keyword">int</span> x) {</div><div class="line">    <span class="keyword">if</span>(node == NULL) <span class="keyword">return</span> NULL;</div><div class="line">    <span class="keyword">if</span>(x &lt; node-&gt;data) <span class="keyword">return</span> Find(node-&gt;lchild, x);</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(x &gt; node-&gt;data) <span class="keyword">return</span> Find(node-&gt;rchild, x);</div><div class="line">    <span class="keyword">else</span> <span class="keyword">return</span> node;</div><div class="line">}</div><div class="line"></div><div class="line">Node BST::Find(<span class="keyword">int</span> x) {</div><div class="line">    <span class="keyword">return</span> Find(root_, x);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">void</span> BST::Remove(Node z) {</div><div class="line">    <span class="keyword">if</span>(!z-&gt;lchild && !z-&gt;rchild) {</div><div class="line">        <span class="keyword">if</span>(z == root) root = NULL;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(z == z-&gt;parent-&gt;lchild)</div><div class="line">            z-&gt;parent-&gt;lchild = NULL;</div><div class="line">        <span class="keyword">else</span></div><div class="line">            z-&gt;parent-&gt;rchild = NULL;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(z-&gt;lchild==NULL || z-&gt;rchild==NULL) {</div><div class="line">        <span class="keyword">if</span>(z == root) {</div><div class="line">            <span class="keyword">if</span>(z-&gt;lchild) root = z-&gt;lchild;</div><div class="line">            <span class="keyword">else</span> root = z-&gt;rchild;</div><div class="line">            root-&gt;parent = NULL;</div><div class="line">        }</div><div class="line">        <span class="keyword">else</span> {</div><div class="line">            <span class="keyword">if</span>(z==z-&gt;parent-&gt;lchild && z-&gt;lchild) {</div><div class="line">                z-&gt;parent-&gt;lchild = z-&gt;lchild;</div><div class="line">                z-&gt;lchild-&gt;parent = z-&gt;parent;</div><div class="line">            }</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(z==z-&gt;parent-&gt;lchild && z-&gt;rchild) {</div><div class="line">                z-&gt;parent-&gt;lchild = z-&gt;rchild;</div><div class="line">                z-&gt;rchild-&gt;parent = z-&gt;parent;</div><div class="line">            }</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(z==z-&gt;parent-&gt;rchild && z-&gt;lchild) {</div><div class="line">                z-&gt;parent-&gt;rchild = z-&gt;lchild;</div><div class="line">                z-&gt;lchild-&gt;parent = z-&gt;parent;</div><div class="line">            }</div><div class="line">            <span class="keyword">else</span> {</div><div class="line">                z-&gt;parent-&gt;rchild = z-&gt;rchild;</div><div class="line">                z-&gt;rchild-&gt;parent = z-&gt;parent;</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">else</span> {</div><div class="line">        Node *s = predecessor(z);</div><div class="line">        z-&gt;data = s-&gt;data;</div><div class="line">        <span class="keyword">if</span>(z == s-&gt;parent)</div><div class="line">            s-&gt;parent-&gt;lchild = s-&gt;lchild;</div><div class="line">        <span class="keyword">else</span></div><div class="line">            s-&gt;parent-&gt;rchild = s-&gt;lchild;</div><div class="line"></div><div class="line">        <span class="keyword">if</span>(s-&gt;lchild)</div><div class="line">            s-&gt;lchild-&gt;parent = s-&gt;parent;</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<h2><a id="Heap">堆</a></h2>

<p>本章主要介绍堆，下面是关于堆的一些主要操作：</p>

<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 最大堆实现, 数组下标从1开始，a[0]不使用。</span></div><div class="line"></div><div class="line"><span class="comment">// 交换两数</span></div><div class="line"><span class="keyword">void</span> swap(<span class="keyword">int</span> &a, <span class="keyword">int</span> &b) {</div><div class="line">    <span class="keyword">int</span> t = a;</div><div class="line">    a = b;</div><div class="line">    b = t;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// 把第i个元素向上移动</span></div><div class="line"><span class="keyword">void</span> ShiftUp(<span class="keyword">int</span> a[], <span class="keyword">int</span> i) {</div><div class="line">    <span class="keyword">while</span>(i&gt;<span class="number">1</span> && a[i]&gt;a[i/<span class="number">2</span>]) {</div><div class="line">        swap(a[i], a[i/<span class="number">2</span>]);</div><div class="line">        i &gt;&gt;= <span class="number">1</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// 把第i个元素向下移动</span></div><div class="line"><span class="keyword">void</span> ShiftDown(<span class="keyword">int</span> a[], <span class="keyword">int</span> n, <span class="keyword">int</span> i) {</div><div class="line">    <span class="keyword">while</span>((i=<span class="number">2</span>*i) &lt;= n) {</div><div class="line">        <span class="keyword">if</span>(i+<span class="number">1</span>&lt;=n && a[i+<span class="number">1</span>]&gt;a[i]) ++i;</div><div class="line">        <span class="keyword">if</span>(a[i] &gt; a[i/<span class="number">2</span>]) swap(a[i], a[i/<span class="number">2</span>]);</div><div class="line">        <span class="keyword">else</span> <span class="keyword">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// 把数组a变成具备最大堆性质的数组</span></div><div class="line"><span class="keyword">void</span> MakeHeap(<span class="keyword">int</span> a[], <span class="keyword">int</span> n) {</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n/<span class="number">2</span>; i&gt;<span class="number">0</span>; —i)</div><div class="line">        ShiftDown(a, n, i);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// 向堆中插入元素x</span></div><div class="line"><span class="keyword">void</span> Insert(<span class="keyword">int</span> a[], <span class="keyword">int</span> &n, <span class="keyword">int</span> x) {</div><div class="line">    a[++n] = x;</div><div class="line">    ShiftUp(a, n);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// 删除堆中第i个元素</span></div><div class="line"><span class="keyword">void</span> Del(<span class="keyword">int</span> a[], <span class="keyword">int</span> &n, <span class="keyword">int</span> i) {</div><div class="line">    a[i] = a[n—];</div><div class="line">    <span class="keyword">if</span>(i&gt;<span class="number">1</span> && a[i]&gt;a[i/<span class="number">2</span>]) ShiftUp(a, i);</div><div class="line">    <span class="keyword">else</span> ShiftDown(a, n, i);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// 堆排序，时间复杂度O(nlogn)</span></div><div class="line"><span class="keyword">void</span> HeapSort(<span class="keyword">int</span> a[], <span class="keyword">int</span> n) {</div><div class="line">    MakeHeap(a, n);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n; i&gt;<span class="number">1</span>; —i) {</div><div class="line">        swap(a[i], a[<span class="number">1</span>]);</div><div class="line">        ShiftDown(a, i-<span class="number">1</span>, <span class="number">1</span>);</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<h2><a id="String">字符串</a></h2>

<p>程序1：循环输入并将每个单词插入集合S(忽略重复单词)，然后排序输出。</p>

<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> main(<span class="keyword">void</span>) {</div><div class="line">    set&lt;string&gt; s;</div><div class="line">    set&lt;string&gt;::iterator j;</div><div class="line">    string t;</div><div class="line">    <span class="keyword">while</span>(cin &gt;&gt; t)</div><div class="line">        s.insert(t);</div><div class="line">    <span class="keyword">for</span>(j=s.begin(); j!=s.end(); ++j)</div><div class="line">        cout&lt;&lt;*j&lt;&lt;endl;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>程序2：单词计数</p>

<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> main(<span class="keyword">void</span>) {</div><div class="line">    map&lt;string, <span class="keyword">int</span>&gt; m;</div><div class="line">    map&lt;string, <span class="keyword">int</span>&gt;::iterator j;</div><div class="line">    string t;</div><div class="line">    <span class="keyword">while</span>(cin &gt;&gt; t)</div><div class="line">        m[t]++;</div><div class="line">    <span class="keyword">for</span>(j=m.begin(); j!=m.end(); ++j)</div><div class="line">        cout&lt;&lt;j-&gt;first&lt;&lt;<span class="string">" "</span>&lt;&lt;j-&gt;second&lt;&lt;endl;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>程序3：建立自己的哈希表(散列表)，以下是一种实现：</p>

<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">class Hash {</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="title">Hash</span>(): <span class="title">seed</span>(131), <span class="title">size</span>(0) {</div><div class="line">        memset(head, <span class="number">0</span>, sizeof(head));</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">void</span> Insert(<span class="keyword">const</span> <span class="keyword">char</span> str) {</div><div class="line">        unsigned <span class="keyword">int</span> id = hash(str);</div><div class="line">        <span class="keyword">char</span> dst = (<span class="keyword">char</span>)node[size].word;</div><div class="line">        <span class="keyword">while</span>(dst++ = str++);</div><div class="line">        node[size].next = head[id];</div><div class="line">        head[id] = &node[size];</div><div class="line">        ++size_;</div><div class="line">    }</div><div class="line"></div><div class="line">    bool Find(<span class="keyword">const</span> <span class="keyword">char</span> str) {</div><div class="line">        unsigned <span class="keyword">int</span> id = hash(str);</div><div class="line">        <span class="keyword">for</span>(Node p=head_[id]; p; p=p-&gt;next) {</div><div class="line">            <span class="keyword">char</span> dst = (<span class="keyword">char</span>)p-&gt;word;</div><div class="line">            <span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line">            <span class="keyword">for</span>(; (str+i) && (str+i)==(dst+i); ++i);</div><div class="line">            <span class="keyword">if</span>(!(str+i) && !(dst+i)) <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    }</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    unsigned <span class="keyword">int</span> <span class="title">hash</span>(<span class="keyword">const</span> <span class="keyword">char</span> str) {<span class="comment">// BKDR Hash Function</span></div><div class="line">        unsigned <span class="keyword">int</span> hash = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>(str) {</div><div class="line">            hash = hash  seed_ + (str++);</div><div class="line">        }</div><div class="line">        <span class="keyword">return</span> (hash & <span class="number">0x7FFFFFFF</span>) % kHashSize;</div><div class="line">    }</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    unsigned <span class="keyword">int</span> seed;</div><div class="line">    unsigned <span class="keyword">int</span> size;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> kWordSize = <span class="number">26</span> + <span class="number">1</span>;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> kNodeSize = <span class="number">20000</span>;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> kHashSize = <span class="number">10001</span>;</div><div class="line">    struct Node {</div><div class="line">        <span class="keyword">char</span> word[kWordSize];</div><div class="line">        Node next;</div><div class="line">    };</div><div class="line">    Node node_[kNodeSize];</div><div class="line">    Node head_[kHashSize];</div><div class="line">};</div></pre></td></tr></table></figure>

<p><strong>后缀数组</strong></p>

<p>假设我们有以下字符串及一个char*数组：</p>

<pre><code> char c[20] = "hawstein";
 char* pc[20];
</code></pre>

<p>我们让指针pc[i]指向字符串的第i个字符，即：</p>

<pre><code>for(int i=0; i&lt;8; ++i)
    pc[i] = &amp;c[i];
</code></pre>

<p>这时候我们输出pc[i]，会得到字符串”hawstein”的所有后缀：</p>

<pre><code>hawstein
awstein
wstein
stein
tein
ein
in
n
</code></pre>

<p>然后，我们对数组pc进行排序，将所有后缀按字典序排序：</p>

<pre><code>sort(pc, pc+8, cmp);
</code></pre>

<p>其中，比较函数cmp如下：</p>

<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">inline bool cmp(<span class="keyword">char</span> p, charq) {</div><div class="line">    <span class="keyword">return</span> strcmp(p, q) &lt; <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>这时，我们再输出pc[i]，会得到排序后的结果：</p>

<pre><code>awstein
ein
hawstein
in
n
stein
tein
wstein
</code></pre>

<p>我们把数组pc称为“后缀数组”。这里需要注意，数组pc<br>中存储的是指向每个后缀首字符的地址。我们也可以存储每个后缀首字符在原数组中的下标，<br>效果是一样的。</p>

<p>本章中用后缀数组解决了一个小问题：可重叠最长重复子串。比如对于字符串”banana”，<br>其后缀数组为：</p>

<pre><code>a
ana
anana
banana
na
nana
</code></pre>

<p>扫描一次数组，比较相邻子串，找到相邻子串的最长公共前缀即可。本例为”ana”，<br>其中一个a是重叠的。</p>

<p>后缀数组是处理字符串的有力工具，常见的两种实现方法是：倍增算法和DC3算法。<br>推荐阅读以下材料来学习后缀数组：</p>

<blockquote><blockquote><p>许智磊，《后缀数组》</p><br><br><p>罗穗骞，《后缀数组——处理字符串的有力工具》</p></blockquote></blockquote>

















]]></content>
    <summary type="html">
    <![CDATA[<p>出处：<a href="http://hawstein.com/posts/make-thiner-programming-pearls.html" target="_blank" rel="external">http://hawstein.com/posts/make-]]>
    </summary>
    
      <category term="Reading" scheme="http://sunbingjie.tk/tags/Reading/"/>
    
      <category term="刷题" scheme="http://sunbingjie.tk/categories/%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Black Mirror Christmas Special]]></title>
    <link href="http://sunbingjie.tk/2015/02/25/blackmirror/"/>
    <id>http://sunbingjie.tk/2015/02/25/blackmirror/</id>
    <published>2015-02-26T03:53:16.000Z</published>
    <updated>2015-02-26T03:53:16.000Z</updated>
    <content type="html"><![CDATA[<object width="1140" height="880"><param name="movie" value="http://share.vrs.sohu.com/2154005/v.swf&topBar=1&autoplay=false&plid=8358521&pub_catecode=0&from=page"><param name="allowFullScreen" value="true"><param name="allowscriptaccess" value="always"><param name="wmode" value="Transparent"><embed width="1140" height="488" wmode="Transparent" allowfullscreen="true" allowscriptaccess="always" quality="high" src="http://share.vrs.sohu.com/2154005/v.swf&topBar=1&autoplay=false&plid=8358521&pub_catecode=0&from=page" type="application/x-shockwave-flash"></object>]]></content>
    <summary type="html">
    <![CDATA[<object width="1140" height="880"><param name="movie" value="http://share.vrs.sohu.com/2154005/v.swf&topBar=1&autoplay=false&plid=8358521&pu]]>
    </summary>
    
      <category term="追剧" scheme="http://sunbingjie.tk/categories/%E8%BF%BD%E5%89%A7/"/>
    
  </entry>
  
</feed>
